<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><!-- hexo injector head_begin start -->
<link rel="stylesheet" href="/css/bilicard.css">
<!-- hexo injector head_begin end --><div id="myscoll"></div><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>LangChainå…¥é—¨æŒ‡å— | Kyle's Blog</title><meta name="keywords" content="LangChain"><meta name="author" content="Kyle Violet"><meta name="copyright" content="Kyle Violet"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="ä»€ä¹ˆæ˜¯LangChain  LangChainæ˜¯ä¸€ä¸ªå¼ºå¤§çš„æ¡†æ¶ï¼Œæ—¨åœ¨å¸®åŠ©å¼€å‘äººå‘˜ä½¿ç”¨è¯­è¨€æ¨¡å‹æ„å»ºç«¯åˆ°ç«¯çš„åº”ç”¨ç¨‹åºã€‚å®ƒæä¾›äº†ä¸€å¥—å·¥å…·ã€ç»„ä»¶å’Œæ¥å£ï¼Œå¯ç®€åŒ–åˆ›å»ºç”±å¤§å‹è¯­è¨€æ¨¡å‹ (LLM) å’ŒèŠå¤©æ¨¡å‹æä¾›æ”¯æŒçš„åº”ç”¨ç¨‹åºçš„è¿‡ç¨‹ã€‚LangChain å¯ä»¥è½»æ¾ç®¡ç†ä¸è¯­è¨€æ¨¡å‹çš„äº¤äº’ï¼Œå°†å¤šä¸ªç»„ä»¶é“¾æ¥åœ¨ä¸€èµ·ï¼Œå¹¶é›†æˆé¢å¤–çš„èµ„æºï¼Œä¾‹å¦‚ API å’Œæ•°æ®åº“ã€‚ å®˜æ–¹æ–‡æ¡£ï¼šhttps:&#x2F;&#x2F;python.langchain.com">
<meta property="og:type" content="article">
<meta property="og:title" content="LangChainå…¥é—¨æŒ‡å—">
<meta property="og:url" content="https://cyborg2077.github.io/2024/01/26/LangChainPrimer/index.html">
<meta property="og:site_name" content="Kyle&#39;s Blog">
<meta property="og:description" content="ä»€ä¹ˆæ˜¯LangChain  LangChainæ˜¯ä¸€ä¸ªå¼ºå¤§çš„æ¡†æ¶ï¼Œæ—¨åœ¨å¸®åŠ©å¼€å‘äººå‘˜ä½¿ç”¨è¯­è¨€æ¨¡å‹æ„å»ºç«¯åˆ°ç«¯çš„åº”ç”¨ç¨‹åºã€‚å®ƒæä¾›äº†ä¸€å¥—å·¥å…·ã€ç»„ä»¶å’Œæ¥å£ï¼Œå¯ç®€åŒ–åˆ›å»ºç”±å¤§å‹è¯­è¨€æ¨¡å‹ (LLM) å’ŒèŠå¤©æ¨¡å‹æä¾›æ”¯æŒçš„åº”ç”¨ç¨‹åºçš„è¿‡ç¨‹ã€‚LangChain å¯ä»¥è½»æ¾ç®¡ç†ä¸è¯­è¨€æ¨¡å‹çš„äº¤äº’ï¼Œå°†å¤šä¸ªç»„ä»¶é“¾æ¥åœ¨ä¸€èµ·ï¼Œå¹¶é›†æˆé¢å¤–çš„èµ„æºï¼Œä¾‹å¦‚ API å’Œæ•°æ®åº“ã€‚ å®˜æ–¹æ–‡æ¡£ï¼šhttps:&#x2F;&#x2F;python.langchain.com">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://img2.baidu.com/it/u=595920241,2439700946&fm=253&fmt=auto&app=120&f=JPEG?w=1422&h=800">
<meta property="article:published_time" content="2024-01-26T03:27:30.000Z">
<meta property="article:modified_time" content="2024-02-24T05:54:06.954Z">
<meta property="article:author" content="Kyle Violet">
<meta property="article:tag" content="LangChain">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://img2.baidu.com/it/u=595920241,2439700946&fm=253&fmt=auto&app=120&f=JPEG?w=1422&h=800"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://cyborg2077.github.io/2024/01/26/LangChainPrimer/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/font-awesome/6.0.0/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.staticfile.org/fancyapps-ui/4.0.31/fancybox.min.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?d54c3018e5f620d2cda0f5ca52ff80cb";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}"}},
  translate: undefined,
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":230},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '',
  date_suffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdnjs.cloudflare.com/ajax/libs/flickr-justified-gallery/2.1.2/fjGallery.min.js',
      css: 'https://cdnjs.cloudflare.com/ajax/libs/flickr-justified-gallery/2.1.2/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'LangChainå…¥é—¨æŒ‡å—',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-02-24 13:54:06'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const now = new Date()
          const hour = now.getHours()
          const isNight = hour <= 6 || hour >= 18
          if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
          else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://cdn1.tianli0.top/npm/element-ui@2.15.6/packages/theme-chalk/lib/index.css"><link rel="stylesheet" href="//at.alicdn.com/t/c/font_3049706_4756b0wkqjd.css"><script src="https://npm.elemecdn.com/echarts@4.9.0/dist/echarts.min.js"></script><script src='//unpkg.com/valine/dist/Valine.min.js'></script><style id="themeColor"></style><style id="rightSide"></style><style id="transPercent"></style><style id="blurNum"></style><style id="settingStyle"></style><style id="defineBg"></style><style id="menu_shadow"></style><svg aria-hidden="true" style="position:absolute; overflow:hidden; width:0; height:0"><symbol id="icon-sun" viewBox="0 0 1024 1024"><path d="M960 512l-128 128v192h-192l-128 128-128-128H192v-192l-128-128 128-128V192h192l128-128 128 128h192v192z" fill="#FFD878" p-id="8420"></path><path d="M736 512a224 224 0 1 0-448 0 224 224 0 1 0 448 0z" fill="#FFE4A9" p-id="8421"></path><path d="M512 109.248L626.752 224H800v173.248L914.752 512 800 626.752V800h-173.248L512 914.752 397.248 800H224v-173.248L109.248 512 224 397.248V224h173.248L512 109.248M512 64l-128 128H192v192l-128 128 128 128v192h192l128 128 128-128h192v-192l128-128-128-128V192h-192l-128-128z" fill="#4D5152" p-id="8422"></path><path d="M512 320c105.888 0 192 86.112 192 192s-86.112 192-192 192-192-86.112-192-192 86.112-192 192-192m0-32a224 224 0 1 0 0 448 224 224 0 0 0 0-448z" fill="#4D5152" p-id="8423"></path></symbol><symbol id="icon-moon" viewBox="0 0 1024 1024"><path d="M611.370667 167.082667a445.013333 445.013333 0 0 1-38.4 161.834666 477.824 477.824 0 0 1-244.736 244.394667 445.141333 445.141333 0 0 1-161.109334 38.058667 85.077333 85.077333 0 0 0-65.066666 135.722666A462.08 462.08 0 1 0 747.093333 102.058667a85.077333 85.077333 0 0 0-135.722666 65.024z" fill="#FFB531" p-id="11345"></path><path d="M329.728 274.133333l35.157333-35.157333a21.333333 21.333333 0 1 0-30.165333-30.165333l-35.157333 35.157333-35.114667-35.157333a21.333333 21.333333 0 0 0-30.165333 30.165333l35.114666 35.157333-35.114666 35.157334a21.333333 21.333333 0 1 0 30.165333 30.165333l35.114667-35.157333 35.157333 35.157333a21.333333 21.333333 0 1 0 30.165333-30.165333z" fill="#030835" p-id="11346"></path></symbol></svg><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu@1.1.6/lib/clock.min.css" /><link rel="stylesheet" href="https://unpkg.zhimg.com/hexo-butterfly-footer-beautify@1.0.0/lib/runtime.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload="this.media='all'"><script src="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/animate.min.css" media="print" onload="this.media='screen'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.css" media="print" onload="this.media='all'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="Kyle's Blog" type="application/atom+xml">
</head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">åŠ è½½ä¸­...</div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2023/11/18/D1mT7ed2uyJkwVG.png" onerror="onerror=null;src='/assets/r1.png'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">136</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">102</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">12</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-HOME"></use></svg><span class="menu_word" style="font-size:17px"> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-exe-article-primary"></use></svg><span class="menu_word" style="font-size:17px"> æ–‡ç« </span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-guidang1">                   </use></svg><span class="menu_word" style="font-size:17px"> å½’æ¡£</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-sekuaibiaoqian">                   </use></svg><span class="menu_word" style="font-size:17px"> æ ‡ç­¾</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-tags">                   </use></svg><span class="menu_word" style="font-size:17px"> åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-ziyuan1"></use></svg><span class="menu_word" style="font-size:17px"> ä¼‘é—²</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/box/fitness/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-tiyu">                   </use></svg><span class="menu_word" style="font-size:17px"> å¥èº«æ—¥å¯„</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/box/animation/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-nvwumao">                   </use></svg><span class="menu_word" style="font-size:17px"> ç•ªå‰§</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/secret/"><i class="fa-fw fas fa-heart faa-tada"></i><span class="menu_word" style="font-size:17px"> è®°å¿†èƒ¶å›Š</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-shejiaoxinxi"></use></svg><span class="menu_word" style="font-size:17px"> ç¤¾äº¤</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/comments/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-liuyan">                   </use></svg><span class="menu_word" style="font-size:17px"> ç•™è¨€æ¿</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/link/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-lianjie">                   </use></svg><span class="menu_word" style="font-size:17px"> å‹äººå¸</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-maoliang"></use></svg><span class="menu_word" style="font-size:17px"> ä¸ªäºº</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/gossip/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-qunliaotian">                   </use></svg><span class="menu_word" style="font-size:17px"> é—²è¨€ç¢è¯­</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/about/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-geren-dangqian">                   </use></svg><span class="menu_word" style="font-size:17px"> å…³äºæˆ‘</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Kyle's Blog</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-HOME"></use></svg><span class="menu_word" style="font-size:17px"> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-exe-article-primary"></use></svg><span class="menu_word" style="font-size:17px"> æ–‡ç« </span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-guidang1">                   </use></svg><span class="menu_word" style="font-size:17px"> å½’æ¡£</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-sekuaibiaoqian">                   </use></svg><span class="menu_word" style="font-size:17px"> æ ‡ç­¾</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-tags">                   </use></svg><span class="menu_word" style="font-size:17px"> åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-ziyuan1"></use></svg><span class="menu_word" style="font-size:17px"> ä¼‘é—²</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/box/fitness/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-tiyu">                   </use></svg><span class="menu_word" style="font-size:17px"> å¥èº«æ—¥å¯„</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/box/animation/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-nvwumao">                   </use></svg><span class="menu_word" style="font-size:17px"> ç•ªå‰§</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/secret/"><i class="fa-fw fas fa-heart faa-tada"></i><span class="menu_word" style="font-size:17px"> è®°å¿†èƒ¶å›Š</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-shejiaoxinxi"></use></svg><span class="menu_word" style="font-size:17px"> ç¤¾äº¤</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/comments/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-liuyan">                   </use></svg><span class="menu_word" style="font-size:17px"> ç•™è¨€æ¿</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/link/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-lianjie">                   </use></svg><span class="menu_word" style="font-size:17px"> å‹äººå¸</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-maoliang"></use></svg><span class="menu_word" style="font-size:17px"> ä¸ªäºº</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/gossip/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-qunliaotian">                   </use></svg><span class="menu_word" style="font-size:17px"> é—²è¨€ç¢è¯­</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/about/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-geren-dangqian">                   </use></svg><span class="menu_word" style="font-size:17px"> å…³äºæˆ‘</span></a></li></ul></div></div><center id="name-container"><a id="page-name" href="javascript:scrollToTop()">PAGE_NAME</a></center><div id="nav-right"><div id="search-button"><a class="search faa-parent animated-hover" title="æ£€ç´¢ç«™å†…ä»»ä½•ä½ æƒ³è¦çš„ä¿¡æ¯"><svg class="faa-tada icon" style="height:24px;width:24px;fill:currentColor;position:relative;top:6px" aria-hidden="true"><use xlink:href="#icon-valentine_-search-love-find-heart"></use></svg><span> æœç´¢</span></a></div><a class="meihua faa-parent animated-hover" onclick="toggleWinbox()" title="ç¾åŒ–è®¾ç½®-è‡ªå®šä¹‰ä½ çš„é£æ ¼" id="meihua-button"><svg class="faa-tada icon" style="height:26px;width:26px;fill:currentColor;position:relative;top:8px" aria-hidden="true"><use xlink:href="#icon-tupian1"></use></svg></a><a class="sun_moon faa-parent animated-hover" onclick="switchNightMode()" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢" id="nightmode-button"><svg class="faa-tada" style="height:25px;width:25px;fill:currentColor;position:relative;top:7px" viewBox="0 0 1024 1024"><use id="modeicon" xlink:href="#icon-moon">       </use></svg></a><div id="toggle-menu"><a><i class="fas fa-bars fa-fw"></i></a></div></div></div></nav><div id="post-info"><h1 class="post-title">LangChainå…¥é—¨æŒ‡å—</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><svg class="meta_icon post-meta-icon" style="width:30px;height:30px;position:relative;top:10px"><use xlink:href="#icon-rili"></use></svg><span class="post-meta-label">å‘è¡¨äº </span><time class="post-meta-date-created" datetime="2024-01-26T03:27:30.000Z" title="å‘è¡¨äº 2024-01-26 11:27:30">2024-01-26</time><span class="post-meta-separator">|</span><svg class="meta_icon post-meta-icon" style="width:18px;height:18px;position:relative;top:5px"><use xlink:href="#icon-gengxin1"></use></svg><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2024-02-24T05:54:06.954Z" title="æ›´æ–°äº 2024-02-24 13:54:06">2024-02-24</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><svg class="meta_icon post-meta-icon" style="width:18px;height:18px;position:relative;top:5px"><use xlink:href="#icon-biaoqian"></use></svg><a class="post-meta-categories" href="/categories/%E5%AE%9E%E7%94%A8%E6%95%99%E7%A8%8B/">å®ç”¨æ•™ç¨‹</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><svg class="meta_icon post-meta-icon" style="width:25px;height:25px;position:relative;top:8px"><use xlink:href="#icon-charuword"></use></svg><span class="post-meta-label">å­—æ•°æ€»è®¡:</span><span class="word-count">1.8w</span><span class="post-meta-separator">|</span><svg class="meta_icon post-meta-icon" style="width:20px;height:20px;position:relative;top:5px"><use xlink:href="#icon-shizhong"></use></svg><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>85åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="LangChainå…¥é—¨æŒ‡å—"><svg class="meta_icon post-meta-icon" style="width:25px;height:25px;position:relative;top:5px"><use xlink:href="#icon-eye"></use></svg><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1>ä»€ä¹ˆæ˜¯LangChain</h1>
<ul>
<li>LangChainæ˜¯ä¸€ä¸ªå¼ºå¤§çš„æ¡†æ¶ï¼Œæ—¨åœ¨å¸®åŠ©å¼€å‘äººå‘˜ä½¿ç”¨è¯­è¨€æ¨¡å‹æ„å»ºç«¯åˆ°ç«¯çš„åº”ç”¨ç¨‹åºã€‚å®ƒæä¾›äº†ä¸€å¥—å·¥å…·ã€ç»„ä»¶å’Œæ¥å£ï¼Œå¯ç®€åŒ–åˆ›å»ºç”±å¤§å‹è¯­è¨€æ¨¡å‹ (LLM) å’ŒèŠå¤©æ¨¡å‹æä¾›æ”¯æŒçš„åº”ç”¨ç¨‹åºçš„è¿‡ç¨‹ã€‚LangChain å¯ä»¥è½»æ¾ç®¡ç†ä¸è¯­è¨€æ¨¡å‹çš„äº¤äº’ï¼Œå°†å¤šä¸ªç»„ä»¶é“¾æ¥åœ¨ä¸€èµ·ï¼Œå¹¶é›†æˆé¢å¤–çš„èµ„æºï¼Œä¾‹å¦‚ API å’Œæ•°æ®åº“ã€‚</li>
<li>å®˜æ–¹æ–‡æ¡£ï¼š<a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/">https://python.langchain.com/en/latest/</a></li>
</ul>
<h1>å¦‚ä½•ä½¿ç”¨LangChain</h1>
<ul>
<li>è¦ä½¿ç”¨ LangChainï¼Œå¼€å‘äººå‘˜é¦–å…ˆè¦å¯¼å…¥å¿…è¦çš„ç»„ä»¶å’Œå·¥å…·ï¼Œä¾‹å¦‚ LLMs, chat models, agents, chains, å†…å­˜åŠŸèƒ½ã€‚è¿™äº›ç»„ä»¶ç»„åˆèµ·æ¥åˆ›å»ºä¸€ä¸ªå¯ä»¥ç†è§£ã€å¤„ç†å’Œå“åº”ç”¨æˆ·è¾“å…¥çš„åº”ç”¨ç¨‹åºã€‚</li>
<li>LangChain ä¸ºç‰¹å®šç”¨ä¾‹æä¾›äº†å¤šç§ç»„ä»¶ï¼Œä¾‹å¦‚ä¸ªäººåŠ©ç†ã€æ–‡æ¡£é—®ç­”ã€èŠå¤©æœºå™¨äººã€æŸ¥è¯¢è¡¨æ ¼æ•°æ®ã€ä¸ API äº¤äº’ã€æå–ã€è¯„ä¼°å’Œæ±‡æ€»ã€‚</li>
</ul>
<h1>LangChainçš„æ¨¡å‹</h1>
<ul>
<li>LangChain model æ˜¯ä¸€ç§æŠ½è±¡ï¼Œè¡¨ç¤ºæ¡†æ¶ä¸­ä½¿ç”¨çš„ä¸åŒç±»å‹çš„æ¨¡å‹ã€‚LangChain ä¸­çš„æ¨¡å‹ä¸»è¦åˆ†ä¸ºä¸‰ç±»ï¼š
<ol>
<li>LLMï¼ˆå¤§å‹è¯­è¨€æ¨¡å‹ï¼‰ï¼šè¿™äº›æ¨¡å‹å°†æ–‡æœ¬å­—ç¬¦ä¸²ä½œä¸ºè¾“å…¥å¹¶è¿”å›æ–‡æœ¬å­—ç¬¦ä¸²ä½œä¸ºè¾“å‡ºã€‚å®ƒä»¬æ˜¯è®¸å¤šè¯­è¨€æ¨¡å‹åº”ç”¨ç¨‹åºçš„æ”¯æŸ±ã€‚</li>
<li>èŠå¤©æ¨¡å‹( Chat Model)ï¼šèŠå¤©æ¨¡å‹ç”±è¯­è¨€æ¨¡å‹æ”¯æŒï¼Œä½†å…·æœ‰æ›´ç»“æ„åŒ–çš„ APIã€‚ä»–ä»¬å°†èŠå¤©æ¶ˆæ¯åˆ—è¡¨ä½œä¸ºè¾“å…¥å¹¶è¿”å›èŠå¤©æ¶ˆæ¯ã€‚è¿™ä½¿å¾—ç®¡ç†å¯¹è¯å†å²è®°å½•å’Œç»´æŠ¤ä¸Šä¸‹æ–‡å˜å¾—å®¹æ˜“ã€‚</li>
<li>æ–‡æœ¬åµŒå…¥æ¨¡å‹(Text Embedding Models)ï¼šè¿™äº›æ¨¡å‹å°†æ–‡æœ¬ä½œä¸ºè¾“å…¥å¹¶è¿”å›è¡¨ç¤ºæ–‡æœ¬åµŒå…¥çš„æµ®ç‚¹åˆ—è¡¨ã€‚è¿™äº›åµŒå…¥å¯ç”¨äºæ–‡æ¡£æ£€ç´¢ã€èšç±»å’Œç›¸ä¼¼æ€§æ¯”è¾ƒç­‰ä»»åŠ¡ã€‚</li>
</ol>
</li>
</ul>
<h1>LangChain çš„ä¸»è¦ç‰¹ç‚¹</h1>
<ul>
<li>LangChain æ—¨åœ¨ä¸ºå…­ä¸ªä¸»è¦é¢†åŸŸçš„å¼€å‘äººå‘˜æä¾›æ”¯æŒï¼š
<ol>
<li>LLM å’Œæç¤ºï¼šLangChain ä½¿ç®¡ç†æç¤ºã€ä¼˜åŒ–å®ƒä»¬ä»¥åŠä¸ºæ‰€æœ‰ LLM åˆ›å»ºé€šç”¨ç•Œé¢å˜å¾—å®¹æ˜“ã€‚æ­¤å¤–ï¼Œå®ƒè¿˜åŒ…æ‹¬ä¸€äº›ç”¨äºå¤„ç† LLM çš„ä¾¿æ·å®ç”¨ç¨‹åºã€‚</li>
<li>é“¾(Chain)ï¼šè¿™äº›æ˜¯å¯¹ LLM æˆ–å…¶ä»–å®ç”¨ç¨‹åºçš„è°ƒç”¨åºåˆ—ã€‚LangChain ä¸ºé“¾æä¾›æ ‡å‡†æ¥å£ï¼Œä¸å„ç§å·¥å…·é›†æˆï¼Œä¸ºæµè¡Œåº”ç”¨æä¾›ç«¯åˆ°ç«¯çš„é“¾ã€‚</li>
<li>æ•°æ®å¢å¼ºç”Ÿæˆï¼šLangChain ä½¿é“¾èƒ½å¤Ÿä¸å¤–éƒ¨æ•°æ®æºäº¤äº’ä»¥æ”¶é›†ç”Ÿæˆæ­¥éª¤çš„æ•°æ®ã€‚ä¾‹å¦‚ï¼Œå®ƒå¯ä»¥å¸®åŠ©æ€»ç»“é•¿æ–‡æœ¬æˆ–ä½¿ç”¨ç‰¹å®šæ•°æ®æºå›ç­”é—®é¢˜ã€‚</li>
<li>Agentsï¼šAgents è®© LLM åšå‡ºæœ‰å…³è¡ŒåŠ¨çš„å†³å®šï¼Œé‡‡å–è¿™äº›è¡ŒåŠ¨ï¼Œæ£€æŸ¥ç»“æœï¼Œå¹¶ç»§ç»­å‰è¿›ç›´åˆ°å·¥ä½œå®Œæˆã€‚LangChain æä¾›äº†ä»£ç†çš„æ ‡å‡†æ¥å£ï¼Œå¤šç§ä»£ç†å¯ä¾›é€‰æ‹©ï¼Œä»¥åŠç«¯åˆ°ç«¯çš„ä»£ç†ç¤ºä¾‹ã€‚</li>
<li>å†…å­˜ï¼šLangChain æœ‰ä¸€ä¸ªæ ‡å‡†çš„å†…å­˜æ¥å£ï¼Œæœ‰åŠ©äºç»´æŠ¤é“¾æˆ–ä»£ç†è°ƒç”¨ä¹‹é—´çš„çŠ¶æ€ã€‚å®ƒè¿˜æä¾›äº†ä¸€ç³»åˆ—å†…å­˜å®ç°å’Œä½¿ç”¨å†…å­˜çš„é“¾æˆ–ä»£ç†çš„ç¤ºä¾‹ã€‚</li>
<li>è¯„ä¼°ï¼šå¾ˆéš¾ç”¨ä¼ ç»ŸæŒ‡æ ‡è¯„ä¼°ç”Ÿæˆæ¨¡å‹ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ LangChain æä¾›æç¤ºå’Œé“¾æ¥å¸®åŠ©å¼€å‘è€…è‡ªå·±ä½¿ç”¨ LLM è¯„ä¼°ä»–ä»¬çš„æ¨¡å‹ã€‚</li>
</ol>
</li>
</ul>
<h1>ä½¿ç”¨ç¤ºä¾‹</h1>
<h2 id="æç¤ºæ¨¡æ¿ï¼ˆPromptTemplateï¼‰">æç¤ºæ¨¡æ¿ï¼ˆPromptTemplateï¼‰</h2>
<ol>
<li>æ”¯æŒæˆ‘ä»¬æ¥è‡ªå®šä¹‰æç¤ºæ¨¡æ¿ï¼Œä¸ä¼šå°†ç”¨æˆ·è¾“å…¥ç›´æ¥å‘é€åˆ° LLMï¼Œè€Œæ˜¯æ¥æ”¶ç”¨æˆ·çš„è¾“å…¥ï¼Œç„¶åæ„é€ ä¸€ä¸ªpromptå°†å…¶å‘é€ç»™ LLMã€‚</li>
</ol>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain.prompts import PromptTemplate</span><br><span class="line"></span><br><span class="line">prompt = PromptTemplate(</span><br><span class="line">    input_variables=[<span class="string">&quot;paperTitle&quot;</span>, <span class="string">&quot;area&quot;</span>, <span class="string">&quot;nums&quot;</span>, <span class="string">&quot;keywords&quot;</span>],</span><br><span class="line">    <span class="attribute">template</span>=<span class="string">&quot;æˆ‘æƒ³è®©ä½ å……å½“&#123;area&#125;é¢†åŸŸçš„ä¸“å®¶ï¼Œé’ˆå¯¹äº&#123;paperTitle&#125;è¿™ä¸ªä¸»é¢˜ï¼Œå¸®æˆ‘æ’°å†™ä¸€ç¯‡&#123;nums&#125;å­—çš„æ–‡çŒ®ç»¼è¿°ã€‚åŒ…å«çš„å…³é”®å­—å¦‚ä¸‹ï¼š&#123;keywords&#125;&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(prompt.format(<span class="attribute">paperTitle</span>=<span class="string">&quot;å¤§å­¦ç”Ÿç½‘çº¢äº§å“æ¶ˆè´¹è¡Œä¸ºç ”ç©¶&quot;</span>, <span class="attribute">area</span>=<span class="string">&quot;ç»æµå­¦&quot;</span>, <span class="attribute">nums</span>=500, <span class="attribute">keywords</span>=<span class="string">&quot;å¤§å­¦ç”Ÿã€ç½‘çº¢ã€æ¶ˆè´¹ã€è¡Œä¸ºç ”ç©¶&quot;</span>))</span><br><span class="line"><span class="comment"># è¾“å‡ºï¼šæˆ‘æƒ³è®©ä½ å……å½“ç»æµå­¦é¢†åŸŸçš„ä¸“å®¶ï¼Œé’ˆå¯¹äºå¤§å­¦ç”Ÿç½‘çº¢äº§å“æ¶ˆè´¹è¡Œä¸ºç ”ç©¶è¿™ä¸ªä¸»é¢˜ï¼Œå¸®æˆ‘æ’°å†™ä¸€ç¯‡500å­—çš„æ–‡çŒ®ç»¼è¿°ã€‚åŒ…å«çš„å…³é”®å­—å¦‚ä¸‹ï¼šå¤§å­¦ç”Ÿã€ç½‘çº¢ã€æ¶ˆè´¹ã€è¡Œä¸ºç ”ç©¶</span></span><br></pre></td></tr></table></figure>
<h2 id="LLM-Chain">LLM Chain</h2>
<ul>
<li>æˆ‘ä»¬å¯ä»¥æŠŠåˆå§‹åŒ–å¥½çš„LLMå’ŒTemplateï¼Œç»„åˆæˆä¸€ä¸ªchain</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain_openai <span class="keyword">import</span> ChatOpenAI</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. åˆå§‹åŒ–llm</span></span><br><span class="line">llm = ChatOpenAI()</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿™é‡Œå…¶å®å°±å¯ä»¥ç›´æ¥è°ƒç”¨llmäº†</span></span><br><span class="line">llm.invoke(<span class="string">&quot;how can langsmith help with testing?&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. è¿™é‡Œå¯ä»¥åˆå§‹åŒ–ä¸€ä¸ªæ¨¡æ¿</span></span><br><span class="line"><span class="keyword">from</span> langchain_core.prompts <span class="keyword">import</span> ChatPromptTemplate</span><br><span class="line">prompt = ChatPromptTemplate.from_messages([</span><br><span class="line">    (<span class="string">&quot;system&quot;</span>, <span class="string">&quot;ä½ æ˜¯ä¸–ç•Œä¸Šæœ€å¥½çš„ç§‘å¹»å°è¯´ä½œè€…&quot;</span>),</span><br><span class="line">    (<span class="string">&quot;user&quot;</span>, <span class="string">&quot;&#123;input&#125;&quot;</span>)</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. é‡‡ç”¨è¿™ç§æ–¹å¼å¯ä»¥å°†llmå’Œtemplateç»„åˆæˆä¸€ä¸ªchain</span></span><br><span class="line">chain = prompt | llm</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. è°ƒç”¨ç»„åˆåçš„chain</span></span><br><span class="line">chain.invoke(&#123;<span class="string">&quot;input&quot;</span>: <span class="string">&quot;ä½ å¯¹LangSmithäº†è§£å—ï¼Ÿ&quot;</span>&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="Retrieval-Chainï¼ˆåŸºäºæ£€ç´¢çš„chainï¼‰">Retrieval Chainï¼ˆåŸºäºæ£€ç´¢çš„chainï¼‰</h2>
<ul>
<li>å½“ä½ éœ€è¦è®©LLMå›ç­”ä¸€ä¸ªé—®é¢˜æ—¶ï¼ˆæ¯”å¦‚ â€œhow can langsmith help with testing?â€ï¼‰ï¼Œæœ‰æ—¶å€™ä½ è¦æä¾›çš„æç¤ºä¿¡æ¯å¯èƒ½å¤ªå¤šï¼Œç›´æ¥ä¼ é€’ç»™è¯­è¨€æ¨¡å‹å¯èƒ½ä¸å¤Ÿæœ‰æ•ˆã€‚ä¸ºäº†æä¾›æ›´å¤šä¸Šä¸‹æ–‡ï¼ŒLangChainæä¾›äº†é€šè¿‡æ£€ç´¢ï¼ˆretrievalï¼‰çš„æ–¹å¼è·å–ç›¸å…³çš„æ–‡æ¡£ï¼Œå¹¶å°†è¿™äº›æ–‡æ¡£ä¼ é€’ç»™è¯­è¨€æ¨¡å‹ã€‚</li>
<li>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªæ£€ç´¢å™¨ï¼ˆRetrieverï¼‰æ¥æŸ¥æ‰¾ç›¸å…³çš„æ–‡æ¡£ï¼Œç„¶åå°†è¿™äº›æ–‡æ¡£ä¼ é€’ç»™æç¤ºæ¨¡æ¿ã€‚æ£€ç´¢å™¨å¯ä»¥ç”±å„ç§æ•°æ®æ”¯æŒï¼Œæ¯”å¦‚ä¸€ä¸ª SQL è¡¨ã€äº’è”ç½‘ä¸Šçš„æ•°æ®ç­‰ï¼Œä½†åœ¨å®˜ç½‘çš„Demoé‡Œï¼Œå°†ä½¿ç”¨ä¸€ä¸ªå‘é‡å­˜å‚¨ï¼ˆvector storeï¼‰æ¥ä½œä¸ºæ£€ç´¢å™¨ã€‚</li>
<li>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åŠ è½½è¦ç´¢å¼•çš„æ•°æ®ã€‚ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ WebBaseLoaderï¼ˆè¿™ä¸ªåº”è¯¥æ˜¯LangChainå†…éƒ¨å®ç°çš„ä¸€ä¸ªçˆ¬è™«å·¥å…·ï¼Œè¦ä¾èµ–äºBeautifulSoup<br>
pip install beautifulsoup4</li>
<li>å¼•å…¥WebBaseLocderæ¥çˆ¬å–å†…å®¹</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain_community.document_loaders <span class="keyword">import</span> WebBaseLoader</span><br><span class="line"></span><br><span class="line">loader = WebBaseLoader(<span class="string">&quot;https://docs.smith.langchain.com/overview&quot;</span>)</span><br><span class="line">docs = loader.load()</span><br><span class="line"><span class="built_in">print</span>(docs)</span><br><span class="line"><span class="comment"># [Document(page_content=&#x27;\n\n\n\n\nLangSmith Overview and User Guide | ğŸ¦œï¸ğŸ› ï¸ LangSmith\n\n\n\n\n\nSkip to main contentğŸ¦œï¸ğŸ› ï¸ LangSmith DocsPython DocsJS/TS DocsSearchGo to AppLangSmithOverviewTracingTesting &amp; EvaluationOrganizationsHubLangSmith CookbookOverviewOn this pageLangSmith Overview and User GuideBuilding reliable LLM applications can be challenging. LangChain simplifies the initial setup, but there is still work needed to bring the performance of prompts, chains and agents up the level where they are reliable enough to be used in production.Over the past two months, we at LangChain have been building and using LangSmith with the goal of bridging this gap. This is our tactical user guide to outline effective ways to use LangSmith and maximize its benefits.On by default\u200bAt LangChain, all of us have LangSmithâ€™s tracing running in the background by default. On the Python side, this is achieved by setting environment variables, which we establish whenever we launch a virtual environment or open our bash shell and leave them set. The same principle applies to most JavaScript environments through process.env1.The benefit here is that all calls to LLMs, chains, agents, tools, and retrievers are logged to LangSmith. Around 90% of the time we donâ€™t even look at the traces, but the 10% of the time that we doâ€¦ itâ€™s so helpful. We can use LangSmith to debug:An unexpected end resultWhy an agent is loopingWhy a chain was slower than expectedHow many tokens an agent usedDebugging\u200bDebugging LLMs, chains, and agents can be tough. LangSmith helps solve the following pain points:What was the exact input to the LLM?\u200bLLM calls are often tricky and non-deterministic. The inputs/outputs may seem straightforward, given they are technically string â†’ string (or chat messages â†’ chat message), but this can be misleading as the input string is usually constructed from a combination of user input and auxiliary functions.Most inputs to an LLM call are a combination of some type of fixed template along with input variables. These input variables could come directly from user input or from an auxiliary function (like retrieval). By the time these input variables go into the LLM they will have been converted to a string format, but often times they are not naturally represented as a string (they could be a list, or a Document object). Therefore, it is important to have visibility into what exactly the final string going into the LLM is. This has helped us debug bugs in formatting logic, unexpected transformations to user input, and straight up missing user input.To a much lesser extent, this is also true of the output of an LLM. Oftentimes the output of an LLM is technically a string but that string may contain some structure (json, yaml) that is intended to be parsed into a structured representation. Understanding what the exact output is can help determine if there may be a need for different parsing.LangSmith provides a straightforward visualization of the exact inputs/outputs to all LLM calls, so you can easily understand them.If I edit the prompt, how does that affect the output?\u200bSo you notice a bad output, and you go into LangSmith to see what\&#x27;s going on. You find the faulty LLM call and are now looking at the exact input. You want to try changing a word or a phrase to see what happens -- what do you do?We constantly ran into this issue. Initially, we copied the prompt to a playground of sorts. But this got annoying, so we built a playground of our own! When examining an LLM call, you can click the Open in Playground button to access this playground. Here, you can modify the prompt and re-run it to observe the resulting changes to the output - as many times as needed!Currently, this feature supports only OpenAI and Anthropic models and works for LLM and Chat Model calls. We plan to extend its functionality to more LLM types, chains, agents, and retrievers in the future.What is the exact sequence of events?\u200bIn complicated chains and agents, it can often be hard to understand what is going on under the hood. What calls are being made? In what order? What are the inputs and outputs of each call?LangSmith\&#x27;s built-in tracing feature offers a visualization to clarify these sequences. This tool is invaluable for understanding intricate and lengthy chains and agents. For chains, it can shed light on the sequence of calls and how they interact. For agents, where the sequence of calls is non-deterministic, it helps visualize the specific sequence for a given run -- something that is impossible to know ahead of time.Why did my chain take much longer than expected?\u200bIf a chain takes longer than expected, you need to identify the cause. By tracking the latency of each step, LangSmith lets you identify and possibly eliminate the slowest components.How many tokens were used?\u200bBuilding and prototyping LLM applications can be expensive. LangSmith tracks the total token usage for a chain and the token usage of each step. This makes it easy to identify potentially costly parts of the chain.Collaborative debugging\u200bIn the past, sharing a faulty chain with a colleague for debugging was challenging when performed locally. With LangSmith, we\&#x27;ve added a â€œShareâ€ button that makes the chain and LLM runs accessible to anyone with the shared link.Collecting examples\u200bMost of the time we go to debug, it\&#x27;s because something bad or unexpected outcome has happened in our application. These failures are valuable data points! By identifying how our chain can fail and monitoring these failures, we can test future chain versions against these known issues.Why is this so impactful? When building LLM applications, itâ€™s often common to start without a dataset of any kind. This is part of the power of LLMs! They are amazing zero-shot learners, making it possible to get started as easily as possible. But this can also be a curse -- as you adjust the prompt, you\&#x27;re wandering blind. You donâ€™t have any examples to benchmark your changes against.LangSmith addresses this problem by including an â€œAdd to Datasetâ€ button for each run, making it easy to add the input/output examples a chosen dataset. You can edit the example before adding them to the dataset to include the expected result, which is particularly useful for bad examples.This feature is available at every step of a nested chain, enabling you to add examples for an end-to-end chain, an intermediary chain (such as a LLM Chain), or simply the LLM or Chat Model.End-to-end chain examples are excellent for testing the overall flow, while single, modular LLM Chain or LLM/Chat Model examples can be beneficial for testing the simplest and most directly modifiable components.Testing &amp; evaluation\u200bInitially, we do most of our evaluation manually and ad hoc. We pass in different\ninputs, and see what happens. At some point though, our application is performing\nwell and we want to be more rigorous about testing changes. We can use a dataset\nthat weâ€™ve constructed along the way (see above). Alternatively, we could spend some\ntime constructing a small dataset by hand. For these situations, LangSmith simplifies\ndataset uploading.Once we have a dataset, how can we use it to test changes to a prompt or chain? The most basic approach is to run the chain over the data points and visualize the outputs. Despite technological advancements, there still is no substitute for looking at outputs by eye. Currently, running the chain over the data points needs to be done client-side. The LangSmith client makes it easy to pull down a dataset and then run a chain over them, logging the results to a new project associated with the dataset. From there, you can review them. We\&#x27;ve made it easy to assign feedback to runs and mark them as correct or incorrect directly in the web app, displaying aggregate statistics for each test project.We also make it easier to evaluate these runs. To that end, we\&#x27;ve added a set of evaluators to the open-source LangChain library. These evaluators can be specified when initiating a test run and will evaluate the results once the test run completes. If weâ€™re being honest, most of these evaluators aren\&#x27;t perfect. We would not recommend that you trust them blindly. However, we do think they are useful for guiding your eye to examples you should look at. This becomes especially valuable as the number of data points increases and it becomes infeasible to look at each one manually.Human Evaluation\u200bAutomatic evaluation metrics are helpful for getting consistent and scalable information about model behavior;\nhowever, there is still no complete substitute for human review to get the utmost quality and reliability from your application.\nLangSmith makes it easy to manually review and annotate runs through annotation queues.These queues allow you to select any runs based on criteria like model type or automatic evaluation scores, and queue them up for human review. As a reviewer, you can then quickly step through the runs, viewing the input, output, and any existing tags before adding your own feedback.We often use this for a couple of reasons:To assess subjective qualities that automatic evaluators struggle with, like creativity or humorTo sample and validate a subset of runs that were auto-evaluated, ensuring the automatic metrics are still reliable and capturing the right informationAll the annotations made using the queue are assigned as &quot;feedback&quot; to the source runs, so you can easily filter and analyze them later.\nYou can also quickly edit examples and add them to datasets to expand the surface area of your evaluation sets or to fine-tune a model for improved quality or reduced costs.Monitoring\u200bAfter all this, your app might finally ready to go in production. LangSmith can also be used to monitor your application in much the same way that you used for debugging. You can log all traces, visualize latency and token usage statistics, and troubleshoot specific issues as they arise. Each run can also be assigned string tags or key-value metadata, allowing you to attach correlation ids or AB test variants, and filter runs accordingly.Weâ€™ve also made it possible to associate feedback programmatically with runs. This means that if your application has a thumbs up/down button on it, you can use that to log feedback back to LangSmith. This can be used to track performance over time and pinpoint under performing data points, which you can subsequently add to a dataset for future testing â€” mirroring the debug mode approach.Weâ€™ve provided several examples in the LangSmith documentation for extracting insights from logged runs. In addition to guiding you on performing this task yourself, we also provide examples of integrating with third parties for this purpose. We\&#x27;re eager to expand this area in the coming months! If you have ideas for either -- an open-source way to evaluate, or are building a company that wants to do analytics over these runs, please reach out.Exporting datasets\u200bLangSmith makes it easy to curate datasets. However, these arenâ€™t just useful inside LangSmith; they can be exported for use in other contexts. Notable applications include exporting for use in OpenAI Evals or fine-tuning, such as with FireworksAI.To set up tracing in Deno, web browsers, or other runtime environments without access to the environment, check out the FAQs.â†©PreviousLangSmithNextTracingOn by defaultDebuggingWhat was the exact input to the LLM?If I edit the prompt, how does that affect the output?What is the exact sequence of events?Why did my chain take much longer than expected?How many tokens were used?Collaborative debuggingCollecting examplesTesting &amp; evaluationHuman EvaluationMonitoringExporting datasetsCommunityDiscordTwitterGitHubDocs CodeLangSmith SDKPythonJS/TSMoreHomepageBlogCopyright Â© 2024 LangChain, Inc.\n\n\n\n&#x27;, metadata=&#123;&#x27;source&#x27;: &#x27;https://docs.smith.langchain.com/overview&#x27;, &#x27;title&#x27;: &#x27;LangSmith Overview and User Guide | ğŸ¦œï¸ğŸ› ï¸ LangSmith&#x27;, &#x27;description&#x27;: &#x27;Building reliable LLM applications can be challenging. LangChain simplifies the initial setup, but there is still work needed to bring the performance of prompts, chains and agents up the level where they are reliable enough to be used in production.&#x27;, &#x27;language&#x27;: &#x27;en&#x27;&#125;)]</span></span><br><span class="line"><span class="comment"># è¿™é‡Œè¾“å‡ºçš„docså°±æ˜¯ç½‘é¡µä¸Šçš„å†…å®¹</span></span><br></pre></td></tr></table></figure>
<ul>
<li>ç„¶åæˆ‘ä»¬éœ€è¦å°†è¿™äº›æ–‡æ¡£ç´¢å¼•åˆ°ä¸€ä¸ªå‘é‡å­˜å‚¨ä¸­ã€‚è¿™éœ€è¦ä¸€äº›ç»„ä»¶ï¼ŒåŒ…æ‹¬åµŒå…¥æ¨¡å‹ï¼ˆembedding modelï¼‰å’Œå‘é‡å­˜å‚¨ã€‚
<ol>
<li>æ£€ç´¢å™¨ï¼ˆRetrieverï¼‰ï¼š æƒ³è±¡ä¸€ä¸‹ä½ åœ¨å›¾ä¹¦é¦†æ‰¾ä¹¦çš„æ—¶å€™ï¼Œä½ å¯èƒ½ä¸ä¼šæŠŠæ•´ä¸ªå›¾ä¹¦é¦†çš„ä¹¦éƒ½æ‹¿å»çœ‹ã€‚ç›¸åï¼Œä½ å¯èƒ½ä¼šå’¨è¯¢å›¾ä¹¦ç®¡ç†å‘˜æˆ–è€…æŸ¥æ‰¾å›¾ä¹¦é¦†çš„ç›®å½•ï¼Œæ‰¾åˆ°ä¸ä½ é—®é¢˜ç›¸å…³çš„ä¹¦ç±ã€‚åœ¨è¿™é‡Œï¼Œæ£€ç´¢å™¨å°±åƒå›¾ä¹¦é¦†çš„ç›®å½•ï¼Œå®ƒå¸®åŠ©æˆ‘ä»¬æ‰¾åˆ°ä¸é—®é¢˜ç›¸å…³çš„ä¿¡æ¯ã€‚</li>
<li>å‘é‡å­˜å‚¨ï¼ˆVector Storeï¼‰ï¼š è¿™å°±åƒä¸€ä¸ªå¤§ä»“åº“ï¼Œé‡Œé¢å­˜æ”¾ç€å„ç§å„æ ·çš„ä¿¡æ¯ã€‚æ¯ä¸ªä¿¡æ¯éƒ½ç”¨ä¸€ä¸ªå‘é‡è¡¨ç¤ºï¼Œå°±åƒæ˜¯ä»“åº“ä¸­çš„ä¸€ä¸ªç®±å­ã€‚é€šè¿‡è¿™äº›å‘é‡ï¼Œæˆ‘ä»¬å¯ä»¥å¿«é€Ÿæ‰¾åˆ°å­˜å‚¨åº“ä¸­ä¸æˆ‘ä»¬å…³å¿ƒçš„ä¸»é¢˜ç›¸å…³çš„ä¿¡æ¯ã€‚</li>
<li>åµŒå…¥æ¨¡å‹ï¼ˆEmbedding Modelï¼‰ï¼š è¿™å°±åƒæ˜¯ä¸€ä¸ªç¿»è¯‘å·¥äººï¼Œå®ƒå°†æ–‡æ¡£ä¸­çš„æ–‡å­—ç¿»è¯‘æˆè®¡ç®—æœºèƒ½å¤Ÿç†è§£çš„å½¢å¼ï¼Œä¹Ÿå°±æ˜¯å‘é‡ã€‚è¿™æ ·ï¼Œè®¡ç®—æœºå°±èƒ½å¤Ÿæ›´å¥½åœ°å¤„ç†å’Œæ¯”è¾ƒæ–‡æ¡£ï¼Œæ‰¾åˆ°æœ€ç›¸å…³çš„ä¿¡æ¯ã€‚</li>
</ol>
</li>
</ul>
<h2 id="æ ¹æ®æ–‡æ¡£æ„å»ºå‘é‡">æ ¹æ®æ–‡æ¡£æ„å»ºå‘é‡</h2>
<ol>
<li>ä½¿ç”¨ OpenAIEmbeddings åˆå§‹åŒ–ä¸€ä¸ªåµŒå…¥æ¨¡å‹ï¼Œç”¨äºå°†æ–‡æ¡£è½¬åŒ–ä¸ºå‘é‡ã€‚</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain_openai <span class="keyword">import</span> OpenAIEmbeddings</span><br><span class="line"></span><br><span class="line">embeddings = OpenAIEmbeddings()</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>ä½¿ç”¨ä¸€ä¸ªç®€å•çš„æœ¬åœ°å‘é‡å­˜å‚¨ FAISS æ¥å»ºç«‹ç´¢å¼•.</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install faiss-cpu</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>æ„å»ºå‘é‡å­˜å‚¨</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain_community.vectorstores <span class="keyword">import</span> FAISS</span><br><span class="line"><span class="keyword">from</span> langchain.text_splitter <span class="keyword">import</span> RecursiveCharacterTextSplitter</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–‡æœ¬åˆ†å‰²å™¨</span></span><br><span class="line">text_splitter = RecursiveCharacterTextSplitter()</span><br><span class="line"><span class="comment"># å°†åˆšåˆšè·å–çš„docsåˆ†å‰²ï¼Œè¾“å‡ºæ˜¯ä¸€ä¸ªList&lt;String&gt;çš„ç±»å‹</span></span><br><span class="line">documents = text_splitter.split_documents(docs)</span><br><span class="line"><span class="comment"># æ ¹æ®åµŒå…¥æ¨¡å‹å’Œåˆ†å‰²åçš„æ–‡æ¡£ï¼Œè½¬æ¢ä¸ºå‘é‡</span></span><br><span class="line">vector = FAISS.from_documents(documents, embeddings)</span><br></pre></td></tr></table></figure>
<h2 id="æ„å»ºé“¾">æ„å»ºé“¾</h2>
<ol>
<li>æ„å»ºä¸€ä¸ªé“¾ï¼Œè¯¥é“¾æ¥å—é—®é¢˜å’Œæ£€ç´¢åˆ°çš„æ–‡æ¡£ï¼Œç”Ÿæˆç­”æ¡ˆï¼š</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain.chains.combine_documents <span class="keyword">import</span> create_stuff_documents_chain</span><br><span class="line"><span class="keyword">from</span> langchain_core.prompts <span class="keyword">import</span> ChatPromptTemplate</span><br><span class="line"></span><br><span class="line">prompt = ChatPromptTemplate.from_template(<span class="string">&quot;&quot;&quot;Answer the following question based only on the provided context:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;context&gt;</span></span><br><span class="line"><span class="string">&#123;context&#125;</span></span><br><span class="line"><span class="string">&lt;/context&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Question: &#123;input&#125;&quot;&quot;&quot;</span>)</span><br><span class="line"></span><br><span class="line">document_chain = create_stuff_documents_chain(llm, prompt)</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>ä½¿ç”¨æ£€ç´¢å™¨åŠ¨æ€é€‰æ‹©æœ€ç›¸å…³çš„æ–‡æ¡£å¹¶ä¼ é€’ç»™é“¾ï¼š</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain.chains <span class="keyword">import</span> create_retrieval_chain</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿™é‡Œçš„vectoræ˜¯æˆ‘ä»¬ç¬¬ä¸€æ­¥æ„å»ºçš„å‘é‡ï¼Œå°†å…¶è½¬æ¢ä¸ºæ£€ç´¢å™¨</span></span><br><span class="line">retriever = vector.as_retriever()</span><br><span class="line">retrieval_chain = create_retrieval_chain(retriever, document_chain)</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>è°ƒç”¨è¿™ä¸ªé“¾ï¼Œæ¥è·å–å“åº”ç»“æœï¼Œè¿™ä¸ªç­”æ¡ˆåº”è¯¥æ›´åŠ å‡†ç¡®ï¼Œå› ä¸ºå®ƒç»“åˆäº†æ£€ç´¢åˆ°çš„ç›¸å…³æ–‡æ¡£å’ŒåŸå§‹é—®é¢˜ã€‚è¿™æ•´ä¸ªè¿‡ç¨‹å°±æ˜¯ä¸ºäº†ä½¿å¾—è¯­è¨€æ¨¡å‹åœ¨å›ç­”é—®é¢˜æ—¶èƒ½å¤ŸåŸºäºæ›´å…¨é¢çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response = retrieval_chain.invoke(&#123;<span class="string">&quot;input&quot;</span>: <span class="string">&quot;how can langsmith help with testing?&quot;</span>&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="å®Œæ•´demo">å®Œæ•´demo</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain.chains <span class="keyword">import</span> create_retrieval_chain</span><br><span class="line"><span class="keyword">from</span> langchain.chains.combine_documents <span class="keyword">import</span> create_stuff_documents_chain</span><br><span class="line"><span class="keyword">from</span> langchain.text_splitter <span class="keyword">import</span> RecursiveCharacterTextSplitter</span><br><span class="line"><span class="keyword">from</span> langchain_community.document_loaders <span class="keyword">import</span> WebBaseLoader</span><br><span class="line"><span class="keyword">from</span> langchain_community.llms.ollama <span class="keyword">import</span> Ollama</span><br><span class="line"><span class="keyword">from</span> langchain_community.vectorstores.faiss <span class="keyword">import</span> FAISS</span><br><span class="line"><span class="keyword">from</span> langchain_core.prompts <span class="keyword">import</span> ChatPromptTemplate</span><br><span class="line"><span class="keyword">from</span> langchain_community.embeddings <span class="keyword">import</span> OllamaEmbeddings</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">llm = Ollama(model=<span class="string">&quot;llama2&quot;</span>)</span><br><span class="line"><span class="comment"># åˆå§‹åŒ–åµŒå…¥æ¨¡å‹</span></span><br><span class="line"></span><br><span class="line">embeddings = OllamaEmbeddings()</span><br><span class="line"></span><br><span class="line"><span class="comment"># çˆ¬å–å†…å®¹</span></span><br><span class="line">loader = WebBaseLoader(<span class="string">&quot;https://docs.smith.langchain.com/overview&quot;</span>)</span><br><span class="line">docs = loader.load()</span><br><span class="line"><span class="built_in">print</span>(docs)</span><br><span class="line"><span class="comment"># æ–‡æœ¬åˆ†å‰²å™¨</span></span><br><span class="line">text_splitter = RecursiveCharacterTextSplitter()</span><br><span class="line"><span class="comment"># å°†åˆšåˆšè·å–çš„docsåˆ†å‰²</span></span><br><span class="line">documents = text_splitter.split_documents(docs)</span><br><span class="line"><span class="built_in">print</span>(documents)</span><br><span class="line"><span class="comment"># æ ¹æ®åµŒå…¥æ¨¡å‹å’Œåˆ†å‰²åçš„æ–‡æ¡£ï¼Œè½¬æ¢ä¸ºå‘é‡</span></span><br><span class="line">vector = FAISS.from_documents(documents, embeddings)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;è½¬æ¢æˆå‘é‡å®Œæ¯•&quot;</span>)</span><br><span class="line"><span class="comment"># å°†å‘é‡è½¬æ¢ä¸ºæ£€ç´¢å™¨</span></span><br><span class="line">retriever = vector.as_retriever()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;å°†å‘é‡è½¬æ¢ä¸ºæ£€ç´¢å™¨&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ„å»ºé—®é¢˜é“¾</span></span><br><span class="line">prompt = ChatPromptTemplate.from_template(<span class="string">&quot;&quot;&quot;Answer the following question based only on the provided context:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;context&gt;</span></span><br><span class="line"><span class="string">&#123;context&#125;</span></span><br><span class="line"><span class="string">&lt;/context&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Question: &#123;input&#125;&quot;&quot;&quot;</span>)</span><br><span class="line"></span><br><span class="line">document_chain = create_stuff_documents_chain(llm, prompt)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;æ„å»ºé—®é¢˜å®Œæ¯•&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨æ£€ç´¢å™¨åŠ¨æ€é€‰æ‹©æœ€ç›¸å…³çš„æ–‡æ¡£å¹¶ä¼ é€’ç»™é“¾ï¼š</span></span><br><span class="line">retrieval_chain = create_retrieval_chain(retriever, document_chain)</span><br><span class="line"><span class="comment"># æœ€ç»ˆè°ƒç”¨</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;å¼€å§‹è°ƒç”¨&quot;</span>)</span><br><span class="line"></span><br><span class="line">response = retrieval_chain.invoke(&#123;<span class="string">&quot;input&quot;</span>: <span class="string">&quot;how can langsmith help with testing?&quot;</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;è°ƒç”¨å®Œæ¯•&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(response)</span><br></pre></td></tr></table></figure>
<ul>
<li>è¾“å‡ºå¦‚ä¸‹</li>
</ul>
<figure class="highlight monkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[Document(page_content=<span class="comment">&#x27;\n\n\n\n\nLangSmith Overview and User Guide | ğŸ¦œï¸ğŸ› ï¸ LangSmith\n\n\n\n\n\nSkip to main contentğŸ¦œï¸ğŸ› ï¸ LangSmith DocsPython DocsJS/TS DocsSearchGo to AppLangSmithOverviewTracingTesting &amp; EvaluationOrganizationsHubLangSmith CookbookOverviewOn this pageLangSmith Overview and User GuideBuilding reliable LLM applications can be challenging. LangChain simplifies the initial setup, but there is still work needed to bring the performance of prompts, chains and agents up the level where they are reliable enough to be used in production.Over the past two months, we at LangChain have been building and using LangSmith with the goal of bridging this gap. This is our tactical user guide to outline effective ways to use LangSmith and maximize its benefits.On by default\u200bAt LangChain, all of us have LangSmithâ€™s tracing running in the background by default. On the Python side, this is achieved by setting environment variables, which we establish whenever we launch a virtual environment or open our bash shell and leave them set. The same principle applies to most JavaScript environments through process.env1.The benefit here is that all calls to LLMs, chains, agents, tools, and retrievers are logged to LangSmith. Around 90% of the time we donâ€™t even look at the traces, but the 10% of the time that we doâ€¦ itâ€™s so helpful. We can use LangSmith to de<span class="doctag">bug:</span>An unexpected end resultWhy an agent is loopingWhy a chain was slower than expectedHow many tokens an agent usedDebugging\u200bDebugging LLMs, chains, and agents can be tough. LangSmith helps solve the following pain points:What was the exact input to the LLM?\u200bLLM calls are often tricky and non-deterministic. The inputs/outputs may seem straightforward, given they are technically string â†’ string (or chat messages â†’ chat message), but this can be misleading as the input string is usually constructed from a combination of user input and auxiliary functions.Most inputs to an LLM call are a combination of some type of fixed template along with input variables. These input variables could come directly from user input or from an auxiliary function (like retrieval). By the time these input variables go into the LLM they will have been converted to a string format, but often times they are not naturally represented as a string (they could be a list, or a Document object). Therefore, it is important to have visibility into what exactly the final string going into the LLM is. This has helped us debug bugs in formatting logic, unexpected transformations to user input, and straight up missing user input.To a much lesser extent, this is also true of the output of an LLM. Oftentimes the output of an LLM is technically a string but that string may contain some structure (json, yaml) that is intended to be parsed into a structured representation. Understanding what the exact output is can help determine if there may be a need for different parsing.LangSmith provides a straightforward visualization of the exact inputs/outputs to all LLM calls, so you can easily understand them.If I edit the prompt, how does that affect the output?\u200bSo you notice a bad output, and you go into LangSmith to see what\&#x27;s going on. You find the faulty LLM call and are now looking at the exact input. You want to try changing a word or a phrase to see what happens -- what do you do?We constantly ran into this issue. Initially, we copied the prompt to a playground of sorts. But this got annoying, so we built a playground of our own! When examining an LLM call, you can click the Open in Playground button to access this playground. Here, you can modify the prompt and re-run it to observe the resulting changes to the output - as many times as needed!Currently, this feature supports only OpenAI and Anthropic models and works for LLM and Chat Model calls. We plan to extend its functionality to more LLM types, chains, agents, and retrievers in the future.What is the exact sequence of events?\u200bIn complicated chains and agents, it can often be hard to understand what is going on under the hood. What calls are being made? In what order? What are the inputs and outputs of each call?LangSmith\&#x27;s built-in tracing feature offers a visualization to clarify these sequences. This tool is invaluable for understanding intricate and lengthy chains and agents. For chains, it can shed light on the sequence of calls and how they interact. For agents, where the sequence of calls is non-deterministic, it helps visualize the specific sequence for a given run -- something that is impossible to know ahead of time.Why did my chain take much longer than expected?\u200bIf a chain takes longer than expected, you need to identify the cause. By tracking the latency of each step, LangSmith lets you identify and possibly eliminate the slowest components.How many tokens were used?\u200bBuilding and prototyping LLM applications can be expensive. LangSmith tracks the total token usage for a chain and the token usage of each step. This makes it easy to identify potentially costly parts of the chain.Collaborative debugging\u200bIn the past, sharing a faulty chain with a colleague for debugging was challenging when performed locally. With LangSmith, we\&#x27;ve added a â€œShareâ€ button that makes the chain and LLM runs accessible to anyone with the shared link.Collecting examples\u200bMost of the time we go to debug, it\&#x27;s because something bad or unexpected outcome has happened in our application. These failures are valuable data points! By identifying how our chain can fail and monitoring these failures, we can test future chain versions against these known issues.Why is this so impactful? When building LLM applications, itâ€™s often common to start without a dataset of any kind. This is part of the power of LLMs! They are amazing zero-shot learners, making it possible to get started as easily as possible. But this can also be a curse -- as you adjust the prompt, you\&#x27;re wandering blind. You donâ€™t have any examples to benchmark your changes against.LangSmith addresses this problem by including an â€œAdd to Datasetâ€ button for each run, making it easy to add the input/output examples a chosen dataset. You can edit the example before adding them to the dataset to include the expected result, which is particularly useful for bad examples.This feature is available at every step of a nested chain, enabling you to add examples for an end-to-end chain, an intermediary chain (such as a LLM Chain), or simply the LLM or Chat Model.End-to-end chain examples are excellent for testing the overall flow, while single, modular LLM Chain or LLM/Chat Model examples can be beneficial for testing the simplest and most directly modifiable components.Testing &amp; evaluation\u200bInitially, we do most of our evaluation manually and ad hoc. We pass in different\ninputs, and see what happens. At some point though, our application is performing\nwell and we want to be more rigorous about testing changes. We can use a dataset\nthat weâ€™ve constructed along the way (see above). Alternatively, we could spend some\ntime constructing a small dataset by hand. For these situations, LangSmith simplifies\ndataset uploading.Once we have a dataset, how can we use it to test changes to a prompt or chain? The most basic approach is to run the chain over the data points and visualize the outputs. Despite technological advancements, there still is no substitute for looking at outputs by eye. Currently, running the chain over the data points needs to be done client-side. The LangSmith client makes it easy to pull down a dataset and then run a chain over them, logging the results to a new project associated with the dataset. From there, you can review them. We\&#x27;ve made it easy to assign feedback to runs and mark them as correct or incorrect directly in the web app, displaying aggregate statistics for each test project.We also make it easier to evaluate these runs. To that end, we\&#x27;ve added a set of evaluators to the open-source LangChain library. These evaluators can be specified when initiating a test run and will evaluate the results once the test run completes. If weâ€™re being honest, most of these evaluators aren\&#x27;t perfect. We would not recommend that you trust them blindly. However, we do think they are useful for guiding your eye to examples you should look at. This becomes especially valuable as the number of data points increases and it becomes infeasible to look at each one manually.Human Evaluation\u200bAutomatic evaluation metrics are helpful for getting consistent and scalable information about model behavior;\nhowever, there is still no complete substitute for human review to get the utmost quality and reliability from your application.\nLangSmith makes it easy to manually review and annotate runs through annotation queues.These queues allow you to select any runs based on criteria like model type or automatic evaluation scores, and queue them up for human review. As a reviewer, you can then quickly step through the runs, viewing the input, output, and any existing tags before adding your own feedback.We often use this for a couple of reasons:To assess subjective qualities that automatic evaluators struggle with, like creativity or humorTo sample and validate a subset of runs that were auto-evaluated, ensuring the automatic metrics are still reliable and capturing the right informationAll the annotations made using the queue are assigned as &quot;feedback&quot; to the source runs, so you can easily filter and analyze them later.\nYou can also quickly edit examples and add them to datasets to expand the surface area of your evaluation sets or to fine-tune a model for improved quality or reduced costs.Monitoring\u200bAfter all this, your app might finally ready to go in production. LangSmith can also be used to monitor your application in much the same way that you used for debugging. You can log all traces, visualize latency and token usage statistics, and troubleshoot specific issues as they arise. Each run can also be assigned string tags or key-value metadata, allowing you to attach correlation ids or AB test variants, and filter runs accordingly.Weâ€™ve also made it possible to associate feedback programmatically with runs. This means that if your application has a thumbs up/down button on it, you can use that to log feedback back to LangSmith. This can be used to track performance over time and pinpoint under performing data points, which you can subsequently add to a dataset for future testing â€” mirroring the debug mode approach.Weâ€™ve provided several examples in the LangSmith documentation for extracting insights from logged runs. In addition to guiding you on performing this task yourself, we also provide examples of integrating with third parties for this purpose. We\&#x27;re eager to expand this area in the coming months! If you have ideas for either -- an open-source way to evaluate, or are building a company that wants to do analytics over these runs, please reach out.Exporting datasets\u200bLangSmith makes it easy to curate datasets. However, these arenâ€™t just useful inside LangSmith; they can be exported for use in other contexts. Notable applications include exporting for use in OpenAI Evals or fine-tuning, such as with FireworksAI.To set up tracing in Deno, web browsers, or other runtime environments without access to the environment, check out the FAQs.â†©PreviousLangSmithNextTracingOn by defaultDebuggingWhat was the exact input to the LLM?If I edit the prompt, how does that affect the output?What is the exact sequence of events?Why did my chain take much longer than expected?How many tokens were used?Collaborative debuggingCollecting examplesTesting &amp; evaluationHuman EvaluationMonitoringExporting datasetsCommunityDiscordTwitterGitHubDocs CodeLangSmith SDKPythonJS/TSMoreHomepageBlogCopyright Â© 2024 LangChain, Inc.\n\n\n\n&#x27;, metadata=&#123;&#x27;source&#x27;: &#x27;https://docs.smith.langchain.com/overview&#x27;, &#x27;title&#x27;: &#x27;LangSmith Overview and User Guide | ğŸ¦œï¸ğŸ› ï¸ LangSmith&#x27;, &#x27;description&#x27;: &#x27;Building reliable LLM applications can be challenging. LangChain simplifies the initial setup, but there is still work needed to bring the performance of prompts, chains and agents up the level where they are reliable enough to be used in production.&#x27;, &#x27;language&#x27;: &#x27;en&#x27;&#125;)]</span></span><br><span class="line">[Document(page_content=<span class="comment">&#x27;LangSmith Overview and User Guide | ğŸ¦œï¸ğŸ› ï¸ LangSmith&#x27;, metadata=&#123;&#x27;source&#x27;: &#x27;https://docs.smith.langchain.com/overview&#x27;, &#x27;title&#x27;: &#x27;LangSmith Overview and User Guide | ğŸ¦œï¸ğŸ› ï¸ LangSmith&#x27;, &#x27;description&#x27;: &#x27;Building reliable LLM applications can be challenging. LangChain simplifies the initial setup, but there is still work needed to bring the performance of prompts, chains and agents up the level where they are reliable enough to be used in production.&#x27;, &#x27;language&#x27;: &#x27;en&#x27;&#125;), Document(page_content=&quot;Skip to main contentğŸ¦œï¸ğŸ› ï¸ LangSmith DocsPython DocsJS/TS DocsSearchGo to AppLangSmithOverviewTracingTesting &amp; EvaluationOrganizationsHubLangSmith CookbookOverviewOn this pageLangSmith Overview and User GuideBuilding reliable LLM applications can be challenging. LangChain simplifies the initial setup, but there is still work needed to bring the performance of prompts, chains and agents up the level where they are reliable enough to be used in production.Over the past two months, we at LangChain have been building and using LangSmith with the goal of bridging this gap. This is our tactical user guide to outline effective ways to use LangSmith and maximize its benefits.On by default\u200bAt LangChain, all of us have LangSmithâ€™s tracing running in the background by default. On the Python side, this is achieved by setting environment variables, which we establish whenever we launch a virtual environment or open our bash shell and leave them set. The same principle applies to most JavaScript environments through process.env1.The benefit here is that all calls to LLMs, chains, agents, tools, and retrievers are logged to LangSmith. Around 90% of the time we donâ€™t even look at the traces, but the 10% of the time that we doâ€¦ itâ€™s so helpful. We can use LangSmith to de<span class="doctag">bug:</span>An unexpected end resultWhy an agent is loopingWhy a chain was slower than expectedHow many tokens an agent usedDebugging\u200bDebugging LLMs, chains, and agents can be tough. LangSmith helps solve the following pain points:What was the exact input to the LLM?\u200bLLM calls are often tricky and non-deterministic. The inputs/outputs may seem straightforward, given they are technically string â†’ string (or chat messages â†’ chat message), but this can be misleading as the input string is usually constructed from a combination of user input and auxiliary functions.Most inputs to an LLM call are a combination of some type of fixed template along with input variables. These input variables could come directly from user input or from an auxiliary function (like retrieval). By the time these input variables go into the LLM they will have been converted to a string format, but often times they are not naturally represented as a string (they could be a list, or a Document object). Therefore, it is important to have visibility into what exactly the final string going into the LLM is. This has helped us debug bugs in formatting logic, unexpected transformations to user input, and straight up missing user input.To a much lesser extent, this is also true of the output of an LLM. Oftentimes the output of an LLM is technically a string but that string may contain some structure (json, yaml) that is intended to be parsed into a structured representation. Understanding what the exact output is can help determine if there may be a need for different parsing.LangSmith provides a straightforward visualization of the exact inputs/outputs to all LLM calls, so you can easily understand them.If I edit the prompt, how does that affect the output?\u200bSo you notice a bad output, and you go into LangSmith to see what&#x27;s going on. You find the faulty LLM call and are now looking at the exact input. You want to try changing a word or a phrase to see what happens -- what do you do?We constantly ran into this issue. Initially, we copied the prompt to a playground of sorts. But this got annoying, so we built a playground of our own! When examining an LLM call, you can click the Open in Playground button to access this playground. Here, you can modify the prompt and re-run it to observe the resulting changes to the output - as many times as needed!Currently, this feature supports only OpenAI and Anthropic models and works for LLM and Chat Model calls. We plan to extend its functionality to more LLM types, chains, agents, and retrievers in the future.What is the exact sequence of events?\u200bIn complicated chains and agents, it can often be hard to understand what is going on under the hood. What calls are being made? In what&quot;, metadata=&#123;&#x27;source&#x27;: &#x27;https://docs.smith.langchain.com/overview&#x27;, &#x27;title&#x27;: &#x27;LangSmith Overview and User Guide | ğŸ¦œï¸ğŸ› ï¸ LangSmith&#x27;, &#x27;description&#x27;: &#x27;Building reliable LLM applications can be challenging. LangChain simplifies the initial setup, but there is still work needed to bring the performance of prompts, chains and agents up the level where they are reliable enough to be used in production.&#x27;, &#x27;language&#x27;: &#x27;en&#x27;&#125;), Document(page_content=&quot;retrievers in the future.What is the exact sequence of events?\u200bIn complicated chains and agents, it can often be hard to understand what is going on under the hood. What calls are being made? In what order? What are the inputs and outputs of each call?LangSmith&#x27;s built-in tracing feature offers a visualization to clarify these sequences. This tool is invaluable for understanding intricate and lengthy chains and agents. For chains, it can shed light on the sequence of calls and how they interact. For agents, where the sequence of calls is non-deterministic, it helps visualize the specific sequence for a given run -- something that is impossible to know ahead of time.Why did my chain take much longer than expected?\u200bIf a chain takes longer than expected, you need to identify the cause. By tracking the latency of each step, LangSmith lets you identify and possibly eliminate the slowest components.How many tokens were used?\u200bBuilding and prototyping LLM applications can be expensive. LangSmith tracks the total token usage for a chain and the token usage of each step. This makes it easy to identify potentially costly parts of the chain.Collaborative debugging\u200bIn the past, sharing a faulty chain with a colleague for debugging was challenging when performed locally. With LangSmith, we&#x27;ve added a â€œShareâ€ button that makes the chain and LLM runs accessible to anyone with the shared link.Collecting examples\u200bMost of the time we go to debug, it&#x27;s because something bad or unexpected outcome has happened in our application. These failures are valuable data points! By identifying how our chain can fail and monitoring these failures, we can test future chain versions against these known issues.Why is this so impactful? When building LLM applications, itâ€™s often common to start without a dataset of any kind. This is part of the power of LLMs! They are amazing zero-shot learners, making it possible to get started as easily as possible. But this can also be a curse -- as you adjust the prompt, you&#x27;re wandering blind. You donâ€™t have any examples to benchmark your changes against.LangSmith addresses this problem by including an â€œAdd to Datasetâ€ button for each run, making it easy to add the input/output examples a chosen dataset. You can edit the example before adding them to the dataset to include the expected result, which is particularly useful for bad examples.This feature is available at every step of a nested chain, enabling you to add examples for an end-to-end chain, an intermediary chain (such as a LLM Chain), or simply the LLM or Chat Model.End-to-end chain examples are excellent for testing the overall flow, while single, modular LLM Chain or LLM/Chat Model examples can be beneficial for testing the simplest and most directly modifiable components.Testing &amp; evaluation\u200bInitially, we do most of our evaluation manually and ad hoc. We pass in different&quot;, metadata=&#123;&#x27;source&#x27;: &#x27;https://docs.smith.langchain.com/overview&#x27;, &#x27;title&#x27;: &#x27;LangSmith Overview and User Guide | ğŸ¦œï¸ğŸ› ï¸ LangSmith&#x27;, &#x27;description&#x27;: &#x27;Building reliable LLM applications can be challenging. LangChain simplifies the initial setup, but there is still work needed to bring the performance of prompts, chains and agents up the level where they are reliable enough to be used in production.&#x27;, &#x27;language&#x27;: &#x27;en&#x27;&#125;), Document(page_content=&#x27;inputs, and see what happens. At some point though, our application is performing\nwell and we want to be more rigorous about testing changes. We can use a dataset\nthat weâ€™ve constructed along the way (see above). Alternatively, we could spend some\ntime constructing a small dataset by hand. For these situations, LangSmith simplifies\ndataset uploading.Once we have a dataset, how can we use it to test changes to a prompt or chain? The most basic approach is to run the chain over the data points and visualize the outputs. Despite technological advancements, there still is no substitute for looking at outputs by eye. Currently, running the chain over the data points needs to be done client-side. The LangSmith client makes it easy to pull down a dataset and then run a chain over them, logging the results to a new project associated with the dataset. From there, you can review them. We\&#x27;ve made it easy to assign feedback to runs and mark them as correct or incorrect directly in the web app, displaying aggregate statistics for each test project.We also make it easier to evaluate these runs. To that end, we\&#x27;ve added a set of evaluators to the open-source LangChain library. These evaluators can be specified when initiating a test run and will evaluate the results once the test run completes. If weâ€™re being honest, most of these evaluators aren\&#x27;t perfect. We would not recommend that you trust them blindly. However, we do think they are useful for guiding your eye to examples you should look at. This becomes especially valuable as the number of data points increases and it becomes infeasible to look at each one manually.Human Evaluation\u200bAutomatic evaluation metrics are helpful for getting consistent and scalable information about model behavior;\nhowever, there is still no complete substitute for human review to get the utmost quality and reliability from your application.\nLangSmith makes it easy to manually review and annotate runs through annotation queues.These queues allow you to select any runs based on criteria like model type or automatic evaluation scores, and queue them up for human review. As a reviewer, you can then quickly step through the runs, viewing the input, output, and any existing tags before adding your own feedback.We often use this for a couple of reasons:To assess subjective qualities that automatic evaluators struggle with, like creativity or humorTo sample and validate a subset of runs that were auto-evaluated, ensuring the automatic metrics are still reliable and capturing the right informationAll the annotations made using the queue are assigned as &quot;feedback&quot; to the source runs, so you can easily filter and analyze them later.&#x27;, metadata=&#123;&#x27;source&#x27;: &#x27;https://docs.smith.langchain.com/overview&#x27;, &#x27;title&#x27;: &#x27;LangSmith Overview and User Guide | ğŸ¦œï¸ğŸ› ï¸ LangSmith&#x27;, &#x27;description&#x27;: &#x27;Building reliable LLM applications can be challenging. LangChain simplifies the initial setup, but there is still work needed to bring the performance of prompts, chains and agents up the level where they are reliable enough to be used in production.&#x27;, &#x27;language&#x27;: &#x27;en&#x27;&#125;), Document(page_content=&quot;You can also quickly edit examples and add them to datasets to expand the surface area of your evaluation sets or to fine-tune a model for improved quality or reduced costs.Monitoring\u200bAfter all this, your app might finally ready to go in production. LangSmith can also be used to monitor your application in much the same way that you used for debugging. You can log all traces, visualize latency and token usage statistics, and troubleshoot specific issues as they arise. Each run can also be assigned string tags or key-value metadata, allowing you to attach correlation ids or AB test variants, and filter runs accordingly.Weâ€™ve also made it possible to associate feedback programmatically with runs. This means that if your application has a thumbs up/down button on it, you can use that to log feedback back to LangSmith. This can be used to track performance over time and pinpoint under performing data points, which you can subsequently add to a dataset for future testing â€” mirroring the debug mode approach.Weâ€™ve provided several examples in the LangSmith documentation for extracting insights from logged runs. In addition to guiding you on performing this task yourself, we also provide examples of integrating with third parties for this purpose. We&#x27;re eager to expand this area in the coming months! If you have ideas for either -- an open-source way to evaluate, or are building a company that wants to do analytics over these runs, please reach out.Exporting datasets\u200bLangSmith makes it easy to curate datasets. However, these arenâ€™t just useful inside LangSmith; they can be exported for use in other contexts. Notable applications include exporting for use in OpenAI Evals or fine-tuning, such as with FireworksAI.To set up tracing in Deno, web browsers, or other runtime environments without access to the environment, check out the FAQs.â†©PreviousLangSmithNextTracingOn by defaultDebuggingWhat was the exact input to the LLM?If I edit the prompt, how does that affect the output?What is the exact sequence of events?Why did my chain take much longer than expected?How many tokens were used?Collaborative debuggingCollecting examplesTesting &amp; evaluationHuman EvaluationMonitoringExporting datasetsCommunityDiscordTwitterGitHubDocs CodeLangSmith SDKPythonJS/TSMoreHomepageBlogCopyright Â© 2024 LangChain, Inc.&quot;, metadata=&#123;&#x27;source&#x27;: &#x27;https://docs.smith.langchain.com/overview&#x27;, &#x27;title&#x27;: &#x27;LangSmith Overview and User Guide | ğŸ¦œï¸ğŸ› ï¸ LangSmith&#x27;, &#x27;description&#x27;: &#x27;Building reliable LLM applications can be challenging. LangChain simplifies the initial setup, but there is still work needed to bring the performance of prompts, chains and agents up the level where they are reliable enough to be used in production.&#x27;, &#x27;language&#x27;: &#x27;en&#x27;&#125;)]</span></span><br><span class="line">è½¬æ¢æˆå‘é‡å®Œæ¯•</span><br><span class="line">å°†å‘é‡è½¬æ¢ä¸ºæ£€ç´¢å™¨</span><br><span class="line">æ„å»ºé—®é¢˜å®Œæ¯•</span><br><span class="line">å¼€å§‹è°ƒç”¨</span><br><span class="line">è°ƒç”¨å®Œæ¯•</span><br><span class="line">&#123;<span class="comment">&#x27;input&#x27;: &#x27;how can langsmith help with testing?&#x27;, &#x27;context&#x27;: [Document(page_content=&quot;You can also quickly edit examples and add them to datasets to expand the surface area of your evaluation sets or to fine-tune a model for improved quality or reduced costs.Monitoring\u200bAfter all this, your app might finally ready to go in production. LangSmith can also be used to monitor your application in much the same way that you used for debugging. You can log all traces, visualize latency and token usage statistics, and troubleshoot specific issues as they arise. Each run can also be assigned string tags or key-value metadata, allowing you to attach correlation ids or AB test variants, and filter runs accordingly.Weâ€™ve also made it possible to associate feedback programmatically with runs. This means that if your application has a thumbs up/down button on it, you can use that to log feedback back to LangSmith. This can be used to track performance over time and pinpoint under performing data points, which you can subsequently add to a dataset for future testing â€” mirroring the debug mode approach.Weâ€™ve provided several examples in the LangSmith documentation for extracting insights from logged runs. In addition to guiding you on performing this task yourself, we also provide examples of integrating with third parties for this purpose. We&#x27;re eager to expand this area in the coming months! If you have ideas for either -- an open-source way to evaluate, or are building a company that wants to do analytics over these runs, please reach out.Exporting datasets\u200bLangSmith makes it easy to curate datasets. However, these arenâ€™t just useful inside LangSmith; they can be exported for use in other contexts. Notable applications include exporting for use in OpenAI Evals or fine-tuning, such as with FireworksAI.To set up tracing in Deno, web browsers, or other runtime environments without access to the environment, check out the FAQs.â†©PreviousLangSmithNextTracingOn by defaultDebuggingWhat was the exact input to the LLM?If I edit the prompt, how does that affect the output?What is the exact sequence of events?Why did my chain take much longer than expected?How many tokens were used?Collaborative debuggingCollecting examplesTesting &amp; evaluationHuman EvaluationMonitoringExporting datasetsCommunityDiscordTwitterGitHubDocs CodeLangSmith SDKPythonJS/TSMoreHomepageBlogCopyright Â© 2024 LangChain, Inc.&quot;, metadata=&#123;&#x27;source&#x27;: &#x27;https://docs.smith.langchain.com/overview&#x27;, &#x27;title&#x27;: &#x27;LangSmith Overview and User Guide | ğŸ¦œï¸ğŸ› ï¸ LangSmith&#x27;, &#x27;description&#x27;: &#x27;Building reliable LLM applications can be challenging. LangChain simplifies the initial setup, but there is still work needed to bring the performance of prompts, chains and agents up the level where they are reliable enough to be used in production.&#x27;, &#x27;language&#x27;: &#x27;en&#x27;&#125;), Document(page_content=&#x27;inputs, and see what happens. At some point though, our application is performing\nwell and we want to be more rigorous about testing changes. We can use a dataset\nthat weâ€™ve constructed along the way (see above). Alternatively, we could spend some\ntime constructing a small dataset by hand. For these situations, LangSmith simplifies\ndataset uploading.Once we have a dataset, how can we use it to test changes to a prompt or chain? The most basic approach is to run the chain over the data points and visualize the outputs. Despite technological advancements, there still is no substitute for looking at outputs by eye. Currently, running the chain over the data points needs to be done client-side. The LangSmith client makes it easy to pull down a dataset and then run a chain over them, logging the results to a new project associated with the dataset. From there, you can review them. We\&#x27;ve made it easy to assign feedback to runs and mark them as correct or incorrect directly in the web app, displaying aggregate statistics for each test project.We also make it easier to evaluate these runs. To that end, we\&#x27;ve added a set of evaluators to the open-source LangChain library. These evaluators can be specified when initiating a test run and will evaluate the results once the test run completes. If weâ€™re being honest, most of these evaluators aren\&#x27;t perfect. We would not recommend that you trust them blindly. However, we do think they are useful for guiding your eye to examples you should look at. This becomes especially valuable as the number of data points increases and it becomes infeasible to look at each one manually.Human Evaluation\u200bAutomatic evaluation metrics are helpful for getting consistent and scalable information about model behavior;\nhowever, there is still no complete substitute for human review to get the utmost quality and reliability from your application.\nLangSmith makes it easy to manually review and annotate runs through annotation queues.These queues allow you to select any runs based on criteria like model type or automatic evaluation scores, and queue them up for human review. As a reviewer, you can then quickly step through the runs, viewing the input, output, and any existing tags before adding your own feedback.We often use this for a couple of reasons:To assess subjective qualities that automatic evaluators struggle with, like creativity or humorTo sample and validate a subset of runs that were auto-evaluated, ensuring the automatic metrics are still reliable and capturing the right informationAll the annotations made using the queue are assigned as &quot;feedback&quot; to the source runs, so you can easily filter and analyze them later.&#x27;, metadata=&#123;&#x27;source&#x27;: &#x27;https://docs.smith.langchain.com/overview&#x27;, &#x27;title&#x27;: &#x27;LangSmith Overview and User Guide | ğŸ¦œï¸ğŸ› ï¸ LangSmith&#x27;, &#x27;description&#x27;: &#x27;Building reliable LLM applications can be challenging. LangChain simplifies the initial setup, but there is still work needed to bring the performance of prompts, chains and agents up the level where they are reliable enough to be used in production.&#x27;, &#x27;language&#x27;: &#x27;en&#x27;&#125;), Document(page_content=&#x27;LangSmith Overview and User Guide | ğŸ¦œï¸ğŸ› ï¸ LangSmith&#x27;, metadata=&#123;&#x27;source&#x27;: &#x27;https://docs.smith.langchain.com/overview&#x27;, &#x27;title&#x27;: &#x27;LangSmith Overview and User Guide | ğŸ¦œï¸ğŸ› ï¸ LangSmith&#x27;, &#x27;description&#x27;: &#x27;Building reliable LLM applications can be challenging. LangChain simplifies the initial setup, but there is still work needed to bring the performance of prompts, chains and agents up the level where they are reliable enough to be used in production.&#x27;, &#x27;language&#x27;: &#x27;en&#x27;&#125;), Document(page_content=&quot;retrievers in the future.What is the exact sequence of events?\u200bIn complicated chains and agents, it can often be hard to understand what is going on under the hood. What calls are being made? In what order? What are the inputs and outputs of each call?LangSmith&#x27;s built-in tracing feature offers a visualization to clarify these sequences. This tool is invaluable for understanding intricate and lengthy chains and agents. For chains, it can shed light on the sequence of calls and how they interact. For agents, where the sequence of calls is non-deterministic, it helps visualize the specific sequence for a given run -- something that is impossible to know ahead of time.Why did my chain take much longer than expected?\u200bIf a chain takes longer than expected, you need to identify the cause. By tracking the latency of each step, LangSmith lets you identify and possibly eliminate the slowest components.How many tokens were used?\u200bBuilding and prototyping LLM applications can be expensive. LangSmith tracks the total token usage for a chain and the token usage of each step. This makes it easy to identify potentially costly parts of the chain.Collaborative debugging\u200bIn the past, sharing a faulty chain with a colleague for debugging was challenging when performed locally. With LangSmith, we&#x27;ve added a â€œShareâ€ button that makes the chain and LLM runs accessible to anyone with the shared link.Collecting examples\u200bMost of the time we go to debug, it&#x27;s because something bad or unexpected outcome has happened in our application. These failures are valuable data points! By identifying how our chain can fail and monitoring these failures, we can test future chain versions against these known issues.Why is this so impactful? When building LLM applications, itâ€™s often common to start without a dataset of any kind. This is part of the power of LLMs! They are amazing zero-shot learners, making it possible to get started as easily as possible. But this can also be a curse -- as you adjust the prompt, you&#x27;re wandering blind. You donâ€™t have any examples to benchmark your changes against.LangSmith addresses this problem by including an â€œAdd to Datasetâ€ button for each run, making it easy to add the input/output examples a chosen dataset. You can edit the example before adding them to the dataset to include the expected result, which is particularly useful for bad examples.This feature is available at every step of a nested chain, enabling you to add examples for an end-to-end chain, an intermediary chain (such as a LLM Chain), or simply the LLM or Chat Model.End-to-end chain examples are excellent for testing the overall flow, while single, modular LLM Chain or LLM/Chat Model examples can be beneficial for testing the simplest and most directly modifiable components.Testing &amp; evaluation\u200bInitially, we do most of our evaluation manually and ad hoc. We pass in different&quot;, metadata=&#123;&#x27;source&#x27;: &#x27;https://docs.smith.langchain.com/overview&#x27;, &#x27;title&#x27;: &#x27;LangSmith Overview and User Guide | ğŸ¦œï¸ğŸ› ï¸ LangSmith&#x27;, &#x27;description&#x27;: &#x27;Building reliable LLM applications can be challenging. LangChain simplifies the initial setup, but there is still work needed to bring the performance of prompts, chains and agents up the level where they are reliable enough to be used in production.&#x27;, &#x27;language&#x27;: &#x27;en&#x27;&#125;)], &#x27;answer&#x27;: &#x27;LangSmith can assist with testing by providing various features to simplify dataset uploading, running chains over the data points, visualizing the outputs, and evaluating the results. Here are some ways LangSmith can help with testing:\n\n1. Easy dataset uploading: LangSmith simplifies dataset uploading, making it easier to construct a small dataset by hand or use an existing one.\n2. Running chains over data points: Once you have a dataset, LangSmith allows you to run the chain over the data points and visualize the outputs. You can review the outputs directly in the web app by assigning feedback to runs and marking them as correct or incorrect.\n3. Evaluating results: LangSmith adds a set of evaluators to the open-source LangChain library, which can be specified when initiating a test run. These evaluators will evaluate the results once the test run completes, providing valuable information for guiding your eye to examples you should look at.\n4. Manual testing and annotation: LangSmith makes it easy to manually review and annotate runs through a visualization of the sequence of events, helping identify subjective qualities that automatic evaluators struggle with.\n5. Tracking token usage: LangSmith tracks the total token usage for a chain and the token usage of each step, making it easier to identify potentially costly parts of the chain.\n6. Collecting examples: LangSmith includes an &quot;Add to Dataset&quot; button for each run, enabling you to add examples for an end-to-end chain, an intermediary chain (such as a LLM Chain), or simply the LLM or Chat Model. This feature is available at every step of a nested chain, making it easier to test the overall flow and individual components.\n\nBy leveraging these features, LangSmith can help streamline your testing process and provide valuable insights into your LLM application\&#x27;s performance.&#x27;&#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="Conversation-Retrieval-Chainï¼ˆå¯¹è¯æ£€ç´¢é“¾ï¼‰">Conversation Retrieval Chainï¼ˆå¯¹è¯æ£€ç´¢é“¾ï¼‰</h2>
<ul>
<li>æˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„é“¾åªèƒ½å›ç­”å•ä¸€çš„é—®é¢˜ï¼Œä½†æœ‰äº›åº”ç”¨åœºæ™¯éœ€è¦æ„å»ºå¯¹è¯å‹çš„èŠå¤©æœºå™¨äººã€‚</li>
<li>ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥ä½¿ç”¨create_retrieval_chainå‡½æ•°ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦æ”¹å˜ä¸¤ä»¶äº‹ï¼š
<ul>
<li>æ£€ç´¢æ–¹æ³•ç°åœ¨ä¸åº”ä»…é€‚ç”¨äºæœ€è¿‘çš„è¾“å…¥ï¼Œè€Œåº”è€ƒè™‘æ•´ä¸ªå†å²è®°å½•ã€‚</li>
<li>æœ€ç»ˆçš„ LLM é“¾åŒæ ·åº”è¯¥è€ƒè™‘æ•´ä¸ªå†å²<br>
æ›´æ–°æ£€ç´¢ï¼ˆretrievalï¼‰<br>
æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„é“¾ï¼Œè¿™ä¸ªé“¾å°†æ¥å—æœ€è¿‘çš„ç”¨æˆ·è¾“å…¥ï¼ˆinputï¼‰å’Œæ•´ä¸ªå¯¹è¯å†å²ï¼ˆchat_historyï¼‰ï¼Œç„¶åä½¿ç”¨è¯­è¨€æ¨¡å‹ç”Ÿæˆä¸€ä¸ªæœç´¢æŸ¥è¯¢ã€‚è¿™é‡Œä½¿ç”¨äº† create_history_aware_retriever å‡½æ•°æ¥å®ç°è¿™ä¸ªæ–°é“¾ã€‚</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain.chains <span class="keyword">import</span> create_history_aware_retriever</span><br><span class="line"><span class="keyword">from</span> langchain_core.prompts <span class="keyword">import</span> MessagesPlaceholder</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰ä¸€ä¸ªæç¤ºæ¨¡æ¿ï¼Œç”¨äºæ ¹æ®å¯¹è¯å†å²ç”Ÿæˆæœç´¢æŸ¥è¯¢</span></span><br><span class="line">prompt = ChatPromptTemplate.from_messages([</span><br><span class="line">    MessagesPlaceholder(variable_name=<span class="string">&quot;chat_history&quot;</span>),  <span class="comment"># å¯¹è¯å†å²çš„å ä½ç¬¦</span></span><br><span class="line">    (<span class="string">&quot;user&quot;</span>, <span class="string">&quot;&#123;input&#125;&quot;</span>),  <span class="comment"># ç”¨æˆ·è¾“å…¥çš„å ä½ç¬¦</span></span><br><span class="line">    (<span class="string">&quot;user&quot;</span>, <span class="string">&quot;åœ¨ä¸Šè¿°å¯¹è¯çš„åŸºç¡€ä¸Šï¼Œç”Ÿæˆä¸€ä¸ªæœç´¢æŸ¥è¯¢ï¼Œä»¥è·å–ä¸å¯¹è¯ç›¸å…³çš„ä¿¡æ¯&quot;</span>)  <span class="comment"># ç”Ÿæˆæœç´¢æŸ¥è¯¢çš„æŒ‡ä»¤ï¼ŒåŸºäºå¯¹è¯å†…å®¹</span></span><br><span class="line">])</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºä¸€ä¸ªæ£€ç´¢å™¨é“¾ï¼Œæ•´åˆè¯­è¨€æ¨¡å‹ã€æ£€ç´¢å™¨å’Œå®šä¹‰çš„æç¤º</span></span><br><span class="line">retriever_chain = create_history_aware_retriever(llm, retriever, prompt)</span><br></pre></td></tr></table></figure>
<ul>
<li>æˆ‘ä»¬å¯ä»¥ä¼ å…¥åç»­çš„é—®é¢˜å®ä¾‹æ¥æµ‹è¯•è¿™ä¸€ç‚¹</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain_core.messages <span class="keyword">import</span> HumanMessage, AIMessage</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰å¯¹è¯å†å²ï¼ŒåŒ…æ‹¬äººç±»æ¶ˆæ¯å’ŒAIæ¶ˆæ¯</span></span><br><span class="line">chat_history = [HumanMessage(content=<span class="string">&quot;LangSmithå¯ä»¥å¸®åŠ©æˆ‘æµ‹è¯•Appå—ï¼Ÿ&quot;</span>), AIMessage(content=<span class="string">&quot;Yes!&quot;</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment"># è°ƒç”¨æ£€ç´¢å™¨é“¾ï¼Œä¼ å…¥å¯¹è¯å†å²å’Œç”¨æˆ·è¾“å…¥</span></span><br><span class="line">retriever_chain.invoke(&#123;</span><br><span class="line">    <span class="string">&quot;chat_history&quot;</span>: chat_history,</span><br><span class="line">    <span class="string">&quot;input&quot;</span>: <span class="string">&quot;å‘Šè¯‰æˆ‘æ€ä¹ˆåš&quot;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li>æ­¤æ—¶çš„è¾“å‡ºåº”è¯¥æ˜¯ä¼šè¿”å›æœ‰å…³ LangSmith ä¸­æµ‹è¯•çš„æ–‡æ¡£ã€‚è¿™æ˜¯å› ä¸ºLLMç”Ÿæˆäº†ä¸€ä¸ªæ–°æŸ¥è¯¢ï¼Œå°†èŠå¤©å†å²è®°å½•ä¸åç»­é—®é¢˜ç›¸ç»“åˆã€‚</li>
<li>ç°åœ¨æˆ‘ä»¬æœ‰äº†è¿™ä¸ªæ–°çš„æ£€ç´¢å™¨ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„é“¾æ¥ç»§ç»­ä¸è¿™äº›æ£€ç´¢åˆ°çš„æ–‡æ¡£è¿›è¡Œå¯¹è¯ã€‚</li>
</ul>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">prompt</span> = ChatPromptTemplate.from_messages([</span><br><span class="line">    (<span class="string">&quot;system&quot;</span>, <span class="string">&quot;æ ¹æ®ä¸Šä¸‹æ–‡å›ç­”ç”¨æˆ·çš„é—®é¢˜\n\n&#123;context&#125;&quot;</span>),</span><br><span class="line">    MessagesPlaceholder(variable_name=<span class="string">&quot;chat_history&quot;</span>),</span><br><span class="line">    (<span class="string">&quot;user&quot;</span>, <span class="string">&quot;&#123;input&#125;&quot;</span>),</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line"><span class="attr">document_chain</span> = create_stuff_documents_chain(llm, prompt)</span><br><span class="line"><span class="attr">retrieval_chain</span> = create_retrieval_chain(retriever_chain, document_chain)</span><br></pre></td></tr></table></figure>
<ul>
<li>ç°åœ¨è¿›è¡Œæ•´ä½“çš„æµ‹è¯•ï¼š</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">chat_history = [HumanMessage(content=<span class="string">&quot;LangSmithå¯ä»¥å¸®åŠ©æˆ‘æµ‹è¯•Appå—ï¼Ÿ&quot;</span>), AIMessage(content=<span class="string">&quot;Yes!&quot;</span>)]</span><br><span class="line"></span><br><span class="line">retriever_chain.invoke(&#123;</span><br><span class="line">    <span class="string">&quot;chat_history&quot;</span>: chat_history,</span><br><span class="line">    <span class="string">&quot;input&quot;</span>: <span class="string">&quot;å‘Šè¯‰æˆ‘æ€ä¹ˆåš&quot;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li>ä¼šå‡ºäº†ä¸€ä¸ªè¿è´¯çš„ç­”æ¡ˆï¼Œè¡¨æ˜æˆ‘ä»¬å·²ç»æˆåŠŸåœ°å°†æ£€ç´¢é“¾å˜æˆäº†èŠå¤©æœºå™¨äºº</li>
</ul>
<h2 id="Agent">Agent</h2>
<ul>
<li>æ„å»ºä»£ç†æ—¶è¦åšçš„ç¬¬ä¸€ä»¶äº‹å°±æ˜¯å†³å®šå®ƒåº”è¯¥æœ‰æƒè®¿é—®å“ªäº›å·¥å…·ã€‚åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†ä¸ºä»£ç†æä¾›ä¸¤ä¸ªå·¥å…·çš„è®¿é—®æƒé™ï¼š
<ol>
<li>æˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„æ£€ç´¢å™¨ã€‚è¿™å°†è®©å®ƒè½»æ¾å›ç­”æœ‰å…³ LangSmith çš„é—®é¢˜</li>
</ol>
<ul>
<li>é¦–å…ˆï¼Œè®©æˆ‘ä»¬ä¸ºåˆšåˆšåˆ›å»ºçš„æ£€ç´¢å™¨è®¾ç½®ä¸€ä¸ªå·¥å…·ï¼š</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain.tools.retriever <span class="keyword">import</span> create_retriever_tool</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿™ä¸ªæ£€ç´¢å™¨å°±æ˜¯åˆšåˆšçˆ¬å–LongSmithæ–‡æ¡£çš„å†…å®¹ï¼Œç”Ÿæˆçš„æ£€ç´¢å™¨</span></span><br><span class="line">retriever_tool = create_retriever_tool(</span><br><span class="line">    retriever,</span><br><span class="line">    <span class="string">&quot;langsmith_search&quot;</span>,</span><br><span class="line">    <span class="string">&quot;æœç´¢æœ‰å…³LangSmithçš„ä¿¡æ¯æˆ–è€…æœ‰å…³LangSmithçš„ä»»ä½•é—®é¢˜ï¼Œå¿…é¡»ä½¿ç”¨è¿™ä¸ªå·¥å…·ï¼&quot;</span>,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>ä¸€ä¸ªæœç´¢å·¥å…·ã€‚è¿™å°†ä½¿å®ƒèƒ½å¤Ÿè½»æ¾å›ç­”éœ€è¦æœ€æ–°ä¿¡æ¯çš„é—®é¢˜ã€‚<br>
- å®˜ç½‘ç¤ºä¾‹ä¸­ä½¿ç”¨çš„æœç´¢å·¥å…·æ˜¯Tavilyï¼Œéœ€è¦ä¸€ä¸ª API å¯†é’¥ï¼ˆæœ‰å…è´¹å¥—é¤ï¼‰ã€‚åœ¨ä»–ä»¬çš„å¹³å°ä¸Šåˆ›å»ºåï¼Œéœ€è¦å°†å…¶è®¾ç½®ä¸ºç¯å¢ƒå˜é‡</li>
</ol>
<pre><code><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain_community.tools.tavily_search <span class="keyword">import</span> TavilySearchResults</span><br><span class="line"></span><br><span class="line">search = TavilySearchResults()</span><br></pre></td></tr></table></figure>
- æˆ‘ä»¬ç°åœ¨å¯ä»¥åˆ›å»ºæˆ‘ä»¬æƒ³è¦ä½¿ç”¨çš„å·¥å…·çš„åˆ—è¡¨ï¼š
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tools = [retriever_tool, search]</span><br></pre></td></tr></table></figure>
- ç°åœ¨æˆ‘ä»¬æœ‰äº†å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªä»£ç†æ¥ä½¿ç”¨å®ƒä»¬ã€‚
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿™ä¸ªå¯ä»¥æ‹‰å–é¢„å®šä¹‰å¥½çš„prompt</span></span><br><span class="line">pip install langchainhub</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> langchain_openai <span class="keyword">import</span> ChatOpenAI</span><br><span class="line"><span class="keyword">from</span> langchain <span class="keyword">import</span> hub</span><br><span class="line"><span class="keyword">from</span> langchain.agents <span class="keyword">import</span> create_openai_functions_agent</span><br><span class="line"><span class="keyword">from</span> langchain.agents <span class="keyword">import</span> AgentExecutor</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‹‰å–åˆ«äººé¢„å®šä¹‰å¥½çš„prompt</span></span><br><span class="line">prompt = hub.pull(<span class="string">&quot;hwchase17/openai-functions-agent&quot;</span>)</span><br><span class="line">llm = ChatOpenAI(model=<span class="string">&quot;gpt-3.5-turbo&quot;</span>, temperature=<span class="number">0</span>)</span><br><span class="line">agent = create_openai_functions_agent(llm, tools, prompt)</span><br><span class="line">agent_executor = AgentExecutor(agent=agent, tools=tools, verbose=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
- è°ƒç”¨
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">agent_executor.invoke(&#123;<span class="string">&quot;input&quot;</span>: <span class="string">&quot;LangSmithå¯ä»¥å¸®åŠ©æˆ‘æµ‹è¯•Appå—ï¼Ÿ&quot;</span>&#125;)</span><br></pre></td></tr></table></figure>
</code></pre>
<h2 id="æ„å»ºæœåŠ¡">æ„å»ºæœåŠ¡</h2>
<ul>
<li>LangServe å¯ä»¥å¸®åŠ©å¼€å‘äººå‘˜å°† LangChain é“¾éƒ¨ç½²ä¸º REST APIã€‚</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">List</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> fastapi <span class="keyword">import</span> FastAPI</span><br><span class="line"><span class="keyword">from</span> langchain_core.prompts <span class="keyword">import</span> ChatPromptTemplate</span><br><span class="line"><span class="keyword">from</span> langchain_openai <span class="keyword">import</span> ChatOpenAI</span><br><span class="line"><span class="keyword">from</span> langchain_community.document_loaders <span class="keyword">import</span> WebBaseLoader</span><br><span class="line"><span class="keyword">from</span> langchain_openai <span class="keyword">import</span> OpenAIEmbeddings</span><br><span class="line"><span class="keyword">from</span> langchain_community.vectorstores <span class="keyword">import</span> FAISS</span><br><span class="line"><span class="keyword">from</span> langchain.text_splitter <span class="keyword">import</span> RecursiveCharacterTextSplitter</span><br><span class="line"><span class="keyword">from</span> langchain.tools.retriever <span class="keyword">import</span> create_retriever_tool</span><br><span class="line"><span class="keyword">from</span> langchain_community.tools.tavily_search <span class="keyword">import</span> TavilySearchResults</span><br><span class="line"><span class="keyword">from</span> langchain_openai <span class="keyword">import</span> ChatOpenAI</span><br><span class="line"><span class="keyword">from</span> langchain <span class="keyword">import</span> hub</span><br><span class="line"><span class="keyword">from</span> langchain.agents <span class="keyword">import</span> create_openai_functions_agent</span><br><span class="line"><span class="keyword">from</span> langchain.agents <span class="keyword">import</span> AgentExecutor</span><br><span class="line"><span class="keyword">from</span> langchain.pydantic_v1 <span class="keyword">import</span> BaseModel, Field</span><br><span class="line"><span class="keyword">from</span> langchain_core.messages <span class="keyword">import</span> BaseMessage</span><br><span class="line"><span class="keyword">from</span> langserve <span class="keyword">import</span> add_routes</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. åŠ è½½æ£€ç´¢å™¨ï¼ˆRetrieverï¼‰</span></span><br><span class="line"><span class="comment"># é¦–å…ˆï¼Œé€šè¿‡ WebBaseLoader ä» LangChain æ–‡æ¡£ç½‘ç«™åŠ è½½æ–‡æ¡£æ•°æ®ã€‚ç„¶åï¼Œä½¿ç”¨ RecursiveCharacterTextSplitter å°†æ–‡æ¡£åˆ†å‰²ä¸ºæ–‡æ¡£ç‰‡æ®µï¼Œå¹¶ä½¿ç”¨ OpenAIEmbeddings å°†æ–‡æ¡£ç‰‡æ®µåµŒå…¥ä¸ºå‘é‡ã€‚æœ€åï¼Œä½¿ç”¨ FAISS åˆ›å»ºä¸€ä¸ªå‘é‡å­˜å‚¨ä½œä¸ºæ£€ç´¢å™¨ã€‚</span></span><br><span class="line">loader = WebBaseLoader(<span class="string">&quot;https://docs.smith.langchain.com/overview&quot;</span>)</span><br><span class="line">docs = loader.load()</span><br><span class="line">text_splitter = RecursiveCharacterTextSplitter()</span><br><span class="line">documents = text_splitter.split_documents(docs)</span><br><span class="line">embeddings = OpenAIEmbeddings()</span><br><span class="line">vector = FAISS.from_documents(documents, embeddings)</span><br><span class="line">retriever = vector.as_retriever()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. åˆ›å»ºå·¥å…·ï¼ˆToolsï¼‰</span></span><br><span class="line"><span class="comment"># åˆ›å»ºä¸¤ä¸ªå·¥å…·ï¼šä¸€ä¸ªæ˜¯ä¹‹å‰åˆ›å»ºçš„æ£€ç´¢å™¨å·¥å…· retriever_toolï¼Œå¦ä¸€ä¸ªæ˜¯ Tavily æœç´¢å·¥å…· searchã€‚</span></span><br><span class="line">retriever_tool = create_retriever_tool(</span><br><span class="line">    retriever,</span><br><span class="line">    <span class="string">&quot;langsmith_search&quot;</span>,</span><br><span class="line">    <span class="string">&quot;æœç´¢æœ‰å…³LangSmithçš„ä¿¡æ¯æˆ–è€…æœ‰å…³LangSmithçš„ä»»ä½•é—®é¢˜ï¼Œå¿…é¡»ä½¿ç”¨è¿™ä¸ªå·¥å…·ï¼&quot;</span>,</span><br><span class="line">)</span><br><span class="line">search = TavilySearchResults()</span><br><span class="line">tools = [retriever_tool, search]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. åˆ›å»ºä»£ç†</span></span><br><span class="line"><span class="comment"># ä½¿ç”¨ LangChain Hub ä¸­æä¾›çš„é¢„å®šä¹‰æç¤ºï¼ˆè‡ªå·±æ„å»ºä¹Ÿå¯ä»¥ï¼‰ï¼Œåˆ›å»ºä¸€ä¸ªä½¿ç”¨ OpenAI æ¨¡å‹å’Œå·¥å…·çš„ä»£ç†ã€‚è¿™ä¸ªä»£ç†è¢«è®¾ç½®ä¸ºèƒ½å¤Ÿå†³å®šåœ¨å¤„ç†é—®é¢˜æ—¶ä½¿ç”¨å“ªäº›å·¥å…·ã€‚</span></span><br><span class="line">prompt = hub.pull(<span class="string">&quot;hwchase17/openai-functions-agent&quot;</span>)</span><br><span class="line">llm = ChatOpenAI(model=<span class="string">&quot;gpt-3.5-turbo&quot;</span>, temperature=<span class="number">0</span>)</span><br><span class="line">agent = create_openai_functions_agent(llm, tools, prompt)</span><br><span class="line">agent_executor = AgentExecutor(agent=agent, tools=tools, verbose=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. FastAPI å®šä¹‰</span></span><br><span class="line">app = FastAPI(</span><br><span class="line">  title=<span class="string">&quot;LangChain Server&quot;</span>,</span><br><span class="line">  version=<span class="string">&quot;1.0&quot;</span>,</span><br><span class="line">  description=<span class="string">&quot;A simple API server using LangChain&#x27;s Runnable interfaces&quot;</span>,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5. æ·»åŠ é“¾è·¯ç”±</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é€šè¿‡è°ƒç”¨ add_routes å‡½æ•°ï¼Œå°†ä»£ç†é“¾æ·»åŠ ä¸º FastAPI åº”ç”¨çš„ä¸€ä¸ªè·¯ç”±ï¼Œä»è€Œå¯ä»¥é€šè¿‡ /agent è·¯å¾„è®¿é—®ä»£ç†é“¾ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Input</span>(<span class="title class_ inherited__">BaseModel</span>):</span><br><span class="line">    <span class="built_in">input</span>: <span class="built_in">str</span></span><br><span class="line">    chat_history: <span class="type">List</span>[BaseMessage] = Field(</span><br><span class="line">        ...,</span><br><span class="line">        extra=&#123;<span class="string">&quot;widget&quot;</span>: &#123;<span class="string">&quot;type&quot;</span>: <span class="string">&quot;chat&quot;</span>, <span class="string">&quot;input&quot;</span>: <span class="string">&quot;location&quot;</span>&#125;&#125;,</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Output</span>(<span class="title class_ inherited__">BaseModel</span>):</span><br><span class="line">    output: <span class="built_in">str</span></span><br><span class="line"></span><br><span class="line">add_routes(</span><br><span class="line">    app,</span><br><span class="line">    agent_executor.with_types(input_type=Input, output_type=Output),</span><br><span class="line">    path=<span class="string">&quot;/agent&quot;</span>,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="keyword">import</span> uvicorn</span><br><span class="line"></span><br><span class="line">    uvicorn.run(app, host=<span class="string">&quot;localhost&quot;</span>, port=<span class="number">8000</span>)</span><br></pre></td></tr></table></figure>
<h1>é“¾çš„æ¦‚å¿µï¼ˆè¡¥å……ï¼‰</h1>
<ul>
<li>é“¾ï¼ˆChainsï¼‰é€šå¸¸å°†å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ä¸æç¤ºï¼ˆPromptï¼‰ç»“åˆåœ¨ä¸€èµ·ï¼ŒåŸºäºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹æ–‡æœ¬æˆ–æ•°æ®è¿›è¡Œä¸€ç³»åˆ—æ“ä½œã€‚é“¾ï¼ˆChainsï¼‰å¯ä»¥ä¸€æ¬¡æ€§æ¥å—å¤šä¸ªè¾“å…¥ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªé“¾ï¼Œè¯¥é“¾æ¥å—ç”¨æˆ·è¾“å…¥ï¼Œä½¿ç”¨æç¤ºæ¨¡æ¿å¯¹å…¶è¿›è¡Œæ ¼å¼åŒ–ï¼Œç„¶åå°†æ ¼å¼åŒ–çš„å“åº”ä¼ é€’ç»™ LLM ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å°†å¤šä¸ªé“¾ç»„åˆåœ¨ä¸€èµ·ï¼Œæˆ–è€…é€šè¿‡å°†é“¾ä¸å…¶ä»–ç»„ä»¶ç»„åˆåœ¨ä¸€èµ·æ¥æ„å»ºæ›´å¤æ‚çš„é“¾ã€‚</li>
</ul>
<h2 id="é¡ºåºé“¾ï¼ˆSequentialChainsï¼‰">é¡ºåºé“¾ï¼ˆSequentialChainsï¼‰</h2>
<ul>
<li>æ˜¯æŒ‰é¢„å®šä¹‰é¡ºåºæ‰§è¡Œå…¶é“¾æ¥çš„é“¾ã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ç®€å•é¡ºåºé“¾ï¼ˆSimpleSequentialChainï¼‰ï¼Œè¿™æ˜¯é¡ºåºé“¾çš„æœ€ç®€å•ç±»å‹ï¼Œå…¶ä¸­æ¯ä¸ªæ­¥éª¤éƒ½æœ‰ä¸€ä¸ªè¾“å…¥/è¾“å‡ºï¼Œä¸€ä¸ªæ­¥éª¤çš„è¾“å‡ºæ˜¯ä¸‹ä¸€ä¸ªæ­¥éª¤çš„è¾“å…¥ã€‚</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> langchain_community.llms <span class="keyword">import</span> Tongyi</span><br><span class="line"><span class="keyword">from</span> langchain.chains <span class="keyword">import</span> LLMChain, SimpleSequentialChain</span><br><span class="line"><span class="keyword">from</span> langchain_core.prompts <span class="keyword">import</span> ChatPromptTemplate</span><br><span class="line"></span><br><span class="line">os.environ[<span class="string">&quot;DASHSCOPE_API_KEY&quot;</span>] = <span class="string">&quot;sk-1903ddb520ac4637a1d36b2f93e0aa4c&quot;</span></span><br><span class="line"></span><br><span class="line">llm = Tongyi()</span><br><span class="line"></span><br><span class="line">prompt1 = ChatPromptTemplate.from_template(<span class="string">&quot;ä½ ç°åœ¨æ˜¯å†™ä½œé¢†åŸŸçš„å¤§å¸ˆï¼Œç°åœ¨ä¸º&#123;title&#125;è¿™ç¯‡æ–‡ç« ç”Ÿæˆä¸€äº›å¤§çº²å§ã€‚&quot;</span>)</span><br><span class="line"></span><br><span class="line">chain_one = LLMChain(llm=llm, prompt=prompt1)</span><br><span class="line"></span><br><span class="line">prompt2 = ChatPromptTemplate.from_template(<span class="string">&quot;æ ¹æ®è¿™ä¸ªå¤§çº²ï¼š&#123;toc&#125;ï¼Œç”Ÿæˆæ¯ä¸ªç« èŠ‚å¯¹åº”çš„å†…å®¹å§ã€‚&quot;</span>)</span><br><span class="line"></span><br><span class="line">chain_two = LLMChain(llm=llm, prompt=prompt2)</span><br><span class="line"></span><br><span class="line">chain = SimpleSequentialChain(chains=[chain_one, chain_two], verbose=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    title = <span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥é¢˜ç›®ï¼š&quot;</span>)</span><br><span class="line">    res = chain.invoke(&#123;<span class="string">&quot;input&quot;</span>: title&#125;)</span><br><span class="line">    <span class="built_in">print</span>(json.dumps(res, indent=<span class="number">4</span>))</span><br></pre></td></tr></table></figure>
<ul>
<li>æ‰§è¡Œç»“æœ</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line">å½“ç„¶å¯ä»¥ï¼Œä»¥ä¸‹æ˜¯ä¸€ä¸ªå…³äºâ€œå¤§å­¦ç”Ÿç½‘çº¢æ¶ˆè´¹è¡Œä¸ºåˆ†æâ€çš„æ–‡ç« å¤§çº²ï¼š</span><br><span class="line"></span><br><span class="line">I. å¼•è¨€</span><br><span class="line">   A. ç½‘çº¢ç»æµçš„å´›èµ·ä¸å¤§å­¦ç”Ÿæ¶ˆè´¹è€…çš„æ¦‚è¿°</span><br><span class="line">   B. å¤§å­¦ç”Ÿç½‘çº¢æ¶ˆè´¹ç°è±¡çš„é‡è¦æ€§åŠç ”ç©¶èƒŒæ™¯</span><br><span class="line">   C. æ–‡ç« çš„ç ”ç©¶ç›®çš„å’Œæ„ä¹‰</span><br><span class="line"></span><br><span class="line">II. å¤§å­¦ç”Ÿç½‘çº¢æ¶ˆè´¹è€…ç¾¤ä½“ç‰¹å¾åˆ†æ</span><br><span class="line">   A. å¹´é¾„ã€æ€§åˆ«ã€ä¸“ä¸šç­‰äººå£ç»Ÿè®¡å­¦ç‰¹å¾</span><br><span class="line">   B. å¤§å­¦ç”Ÿçš„ç½‘ç»œä½¿ç”¨ä¹ æƒ¯ä¸ç¤¾äº¤åª’ä½“åå¥½</span><br><span class="line">   C. å¤§å­¦ç”Ÿå¯¹ç½‘çº¢çš„è®¤å¯åº¦ä¸ä¿¡ä»»åº¦</span><br><span class="line"></span><br><span class="line">III. å¤§å­¦ç”Ÿç½‘çº¢æ¶ˆè´¹è¡Œä¸ºçš„ç‰¹ç‚¹</span><br><span class="line">   A. æ¶ˆè´¹åŠ¨æœºï¼šä»å¨±ä¹æ¶ˆé£åˆ°è´­ç‰©å†³ç­–çš„å½±å“</span><br><span class="line">   B. æ¶ˆè´¹å“ç±»åå‘ï¼šæ—¶å°šç©¿æ­ã€ç¾å¦†æŠ¤è‚¤ã€ç”µå­äº§å“ç­‰æ–¹é¢çš„æ¶ˆè´¹æƒ…å†µ</span><br><span class="line">   C. è·Ÿé£æ¶ˆè´¹ä¸ä¸ªæ€§åŒ–æ¶ˆè´¹éœ€æ±‚çš„å¹³è¡¡</span><br><span class="line">   D. æƒ…æ„Ÿå› ç´ åœ¨è´­ä¹°å†³ç­–ä¸­çš„ä½œç”¨</span><br><span class="line"></span><br><span class="line">IV. ç½‘çº¢å¯¹å¤§å­¦ç”Ÿæ¶ˆè´¹è¡Œä¸ºçš„å½±å“æœºåˆ¶</span><br><span class="line">   A. ç½‘çº¢çš„å½±å“åŠ›æ¥æºï¼šå†…å®¹åˆ›ä½œèƒ½åŠ›ã€äººæ ¼é­…åŠ›ã€å£ç¢‘æ•ˆåº”ç­‰</span><br><span class="line">   B. ç½‘çº¢è¥é”€ç­–ç•¥å¯¹å¤§å­¦ç”Ÿæ¶ˆè´¹å¿ƒç†çš„å½±å“ï¼šæƒ…æ„Ÿå…±é¸£ã€ç”Ÿæ´»æ–¹å¼å¡‘é€ ã€æ„è§é¢†è¢–è§’è‰²</span><br><span class="line">   C. ç½‘çº¢å¹¿å‘Šä¸è½¯æ€§æ¨å¹¿å¯¹å¤§å­¦ç”Ÿæ¶ˆè´¹é€‰æ‹©çš„å¼•å¯¼</span><br><span class="line"></span><br><span class="line">V. å¤§å­¦ç”Ÿç½‘çº¢æ¶ˆè´¹è¡Œä¸ºçš„ç¤¾ä¼šæ–‡åŒ–å½±å“</span><br><span class="line">   A. å¯¹å¤§å­¦ç”Ÿä»·å€¼è§‚å¡‘é€ çš„å½±å“</span><br><span class="line">   B. ç¤¾ä¼šå®¡ç¾è¶‹åŠ¿ä¸æ¶ˆè´¹è§‚å¿µçš„å˜åŒ–</span><br><span class="line">   C. å¯¹æ ¡å›­æ–‡åŒ–å’Œå¸‚åœºç»æµå‘å±•çš„å¯ç¤º</span><br><span class="line"></span><br><span class="line">VI. ç»“è®º</span><br><span class="line">   A. å¤§å­¦ç”Ÿç½‘çº¢æ¶ˆè´¹è¡Œä¸ºçš„ä¸»è¦ç‰¹ç‚¹åŠå…¶æˆå› æ€»ç»“</span><br><span class="line">   B. å¯¹æ•™è‚²éƒ¨é—¨ã€ä¼ä¸šã€ç½‘çº¢è‡ªèº«ä»¥åŠç¤¾ä¼šå„æ–¹é¢åº”å¯¹å¤§å­¦ç”Ÿç½‘çº¢æ¶ˆè´¹è¡Œä¸ºè¿›è¡Œåˆç†å¼•å¯¼å’Œè§„èŒƒçš„å»ºè®®</span><br><span class="line">   C. å±•æœ›æœªæ¥ç ”ç©¶æ–¹å‘ä¸å¯èƒ½æ€§</span><br><span class="line"></span><br><span class="line">è¿™ä¸ªå¤§çº²æ—¨åœ¨å…¨é¢æ¢è®¨å¤§å­¦ç”Ÿç½‘çº¢æ¶ˆè´¹è¡Œä¸ºçš„ç°è±¡ã€ç‰¹ç‚¹ã€æˆå› ä»¥åŠå…¶èƒŒåçš„ç¤¾ä¼šæ–‡åŒ–å½±å“ï¼Œå¹¶é’ˆå¯¹ç›¸å…³å„æ–¹æå‡ºæœ‰é’ˆå¯¹æ€§çš„æ€è€ƒä¸å»ºè®®ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸‹é¢å°±æ˜¯æ¯ä¸ªç« èŠ‚å¯¹åº”çš„å†…å®¹</span></span><br><span class="line"></span><br><span class="line">I. å¼•è¨€</span><br><span class="line">A. ç½‘çº¢ç»æµçš„å´›èµ·ä¸å¤§å­¦ç”Ÿæ¶ˆè´¹è€…çš„æ¦‚è¿°</span><br><span class="line">éšç€äº’è”ç½‘æŠ€æœ¯çš„å‘å±•å’Œç¤¾äº¤åª’ä½“å¹³å°çš„æ™®åŠï¼Œç½‘çº¢ç»æµä½œä¸ºä¸€ç§æ–°å‹å•†ä¸šæ¨¡å¼åœ¨å…¨çƒèŒƒå›´å†…è¿…é€Ÿå´›èµ·ã€‚å¤§å­¦ç”Ÿä½œä¸ºç½‘ç»œä¸»åŠ›å†›å’Œæ–°å…´æ¶ˆè´¹ç¾¤ä½“ï¼Œä»–ä»¬å¯¹äºç½‘çº¢çš„è¿½æ§å’Œæ¶ˆè´¹è¡Œä¸ºæˆä¸ºå½“å‰å¸‚åœºå…³æ³¨çš„çƒ­ç‚¹ã€‚è¿™ä¸€ç°è±¡ä¸ä»…åæ˜ å‡ºäº†ç½‘çº¢ç»æµçš„å·¨å¤§æ½œåŠ›ï¼Œä¹Ÿæ­ç¤ºäº†å¤§å­¦ç”Ÿåœ¨æ¶ˆè´¹è§‚å¿µå’Œè¡Œä¸ºä¸Šçš„æ–°å˜åŒ–ã€‚</span><br><span class="line"></span><br><span class="line">B. å¤§å­¦ç”Ÿç½‘çº¢æ¶ˆè´¹ç°è±¡çš„é‡è¦æ€§åŠç ”ç©¶èƒŒæ™¯</span><br><span class="line">å¤§å­¦ç”Ÿç½‘çº¢æ¶ˆè´¹ç°è±¡æ—¥ç›Šæ™®éï¼Œå…¶èƒŒåçš„æ¶ˆè´¹å¿ƒç†ã€æ¶ˆè´¹è¡Œä¸ºæ¨¡å¼ä»¥åŠå¯¹ç¤¾ä¼šæ–‡åŒ–çš„å½±å“å…·æœ‰é‡è¦ç ”ç©¶ä»·å€¼ã€‚é€šè¿‡æ·±å…¥æ¢ç©¶è¿™ä¸€ç°è±¡ï¼Œæœ‰åŠ©äºç†è§£æ–°ä¸€ä»£æ¶ˆè´¹è€…çš„æ¶ˆè´¹è¶‹åŠ¿ï¼Œä¸ºç›¸å…³ä¼ä¸šå’Œæ”¿ç­–åˆ¶å®šè€…æä¾›é’ˆå¯¹æ€§çš„ç­–ç•¥æŒ‡å¯¼ã€‚</span><br><span class="line"></span><br><span class="line">C. æ–‡ç« çš„ç ”ç©¶ç›®çš„å’Œæ„ä¹‰</span><br><span class="line">æœ¬æ–‡æ—¨åœ¨é€šè¿‡ç³»ç»Ÿåœ°ç ”ç©¶å¤§å­¦ç”Ÿç½‘çº¢æ¶ˆè´¹è¡Œä¸ºï¼Œæ­ç¤ºå…¶ç‰¹å¾ã€æˆå› åŠå…¶ç¤¾ä¼šæ–‡åŒ–å½±å“ï¼Œä¸ºæ•™è‚²éƒ¨é—¨ã€ä¼ä¸šã€ç½‘çº¢è‡ªèº«ä¹ƒè‡³æ•´ä¸ªç¤¾ä¼šæä¾›ç†æ€§åº”å¯¹è¿™ä¸€ç°è±¡çš„æ€è·¯å’Œå»ºè®®ï¼ŒåŒæ—¶å¯¹æœªæ¥ç›¸å…³ç ”ç©¶é¢†åŸŸçš„å‘å±•æ–¹å‘è¿›è¡Œå±•æœ›ã€‚</span><br><span class="line"></span><br><span class="line">II. å¤§å­¦ç”Ÿç½‘çº¢æ¶ˆè´¹è€…ç¾¤ä½“ç‰¹å¾åˆ†æ</span><br><span class="line">A. å¹´é¾„ã€æ€§åˆ«ã€ä¸“ä¸šç­‰äººå£ç»Ÿè®¡å­¦ç‰¹å¾</span><br><span class="line">ä»¥åœ¨æ ¡å¤§å­¦ç”Ÿä¸ºä¸»ä½“çš„å¹´è½»æ¶ˆè´¹äººç¾¤ä¸»è¦é›†ä¸­åœ¨<span class="number">18</span>-<span class="number">24</span>å²å¹´é¾„æ®µï¼Œç”·å¥³æ¯”ä¾‹ç›¸å¯¹å‡è¡¡ï¼Œä¸åŒä¸“ä¸šçš„å­¦ç”Ÿå¯èƒ½ç”±äºå…´è¶£çˆ±å¥½ã€å®¡ç¾å–å‘ç­‰å› ç´ ï¼Œåœ¨ç½‘çº¢æ¶ˆè´¹ä¸Šè¡¨ç°å‡ºä¸€å®šçš„å·®å¼‚ã€‚</span><br><span class="line"></span><br><span class="line">B. å¤§å­¦ç”Ÿçš„ç½‘ç»œä½¿ç”¨ä¹ æƒ¯ä¸ç¤¾äº¤åª’ä½“åå¥½</span><br><span class="line">å½“ä»£å¤§å­¦ç”Ÿæ˜¯äº’è”ç½‘çš„é‡åº¦ä½¿ç”¨è€…ï¼Œä»–ä»¬åœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­å¹¿æ³›ä¾èµ–äºç¤¾äº¤åª’ä½“å¹³å°è·å–ä¿¡æ¯ã€äº¤æµäº’åŠ¨å’Œå¨±ä¹ä¼‘é—²ã€‚å°¤å…¶åçˆ±çŸ­è§†é¢‘ã€ç›´æ’­ã€å¾®åšç­‰æ–°åª’ä½“å½¢å¼ï¼Œè¿™ä¸ºç½‘çº¢ä¼ æ’­å†…å®¹æä¾›äº†å¹¿é˜”çš„å—ä¼—åŸºç¡€ã€‚</span><br><span class="line"></span><br><span class="line">C. å¤§å­¦ç”Ÿå¯¹ç½‘çº¢çš„è®¤å¯åº¦ä¸ä¿¡ä»»åº¦</span><br><span class="line">å¤§å­¦ç”Ÿæ™®éè®¤ä¸ºç½‘çº¢å…·å¤‡è¾ƒé«˜çš„æ½®æµå¼•é¢†åŠ›å’Œç¤¾äº¤å½±å“åŠ›ï¼Œå¯¹äºå…·æœ‰ä¸€å®šä¸“ä¸šç´ å…»å’Œäº²å’ŒåŠ›çš„ç½‘çº¢æ›´å®¹æ˜“äº§ç”Ÿè®¤åŒæ„Ÿå’Œä¿¡èµ–æ„Ÿï¼Œä»è€Œå°†å…¶æ¨èçš„äº§å“æˆ–æœåŠ¡çº³å…¥è‡ªå·±çš„æ¶ˆè´¹è€ƒè™‘èŒƒå›´ã€‚</span><br><span class="line"></span><br><span class="line">III. å¤§å­¦ç”Ÿç½‘çº¢æ¶ˆè´¹è¡Œä¸ºçš„ç‰¹ç‚¹</span><br><span class="line">A. æ¶ˆè´¹åŠ¨æœºï¼šä»å¨±ä¹æ¶ˆé£åˆ°è´­ç‰©å†³ç­–çš„å½±å“</span><br><span class="line">å¤§å­¦ç”Ÿåœ¨å…³æ³¨ç½‘çº¢çš„è¿‡ç¨‹ä¸­ï¼Œæœ€åˆå¯èƒ½å‡ºäºå¨±ä¹æ¶ˆé£çš„éœ€æ±‚ï¼Œä½†é€æ¸åœ°ï¼Œç½‘çº¢æ‰€å±•ç¤ºçš„ç”Ÿæ´»æ–¹å¼ã€æ—¶å°šå“å‘³ä»¥åŠäº§å“ä½“éªŒç­‰å†…å®¹ä¼šå½±å“ä»–ä»¬çš„è´­ç‰©å†³ç­–ï¼Œä½¿å¾—æ¶ˆè´¹è¡Œä¸ºç”±å•çº¯çš„è§‚èµè½¬å˜ä¸ºå®é™…è´­ä¹°è¡Œä¸ºã€‚</span><br><span class="line"></span><br><span class="line">B. æ¶ˆè´¹å“ç±»åå‘ï¼šæ—¶å°šç©¿æ­ã€ç¾å¦†æŠ¤è‚¤ã€ç”µå­äº§å“ç­‰æ–¹é¢çš„æ¶ˆè´¹æƒ…å†µ</span><br><span class="line">å¤§å­¦ç”Ÿç½‘çº¢æ¶ˆè´¹è¡Œä¸ºä¸­ï¼Œæ—¶å°šç©¿æ­ã€ç¾å¦†æŠ¤è‚¤å’Œä¸ªäººç”µå­äº§å“æ˜¯æœ€å¸¸è§çš„æ¶ˆè´¹ç±»åˆ«ã€‚è¿™äº›å•†å“å¾€å¾€ä¸å¹´è½»äººè¿½æ±‚ä¸ªæ€§åŒ–ã€æ—¶å°šåŒ–å’Œé«˜å“è´¨ç”Ÿæ´»çš„éœ€æ±‚ç›¸å¥‘åˆã€‚</span><br><span class="line"></span><br><span class="line">C. è·Ÿé£æ¶ˆè´¹ä¸ä¸ªæ€§åŒ–æ¶ˆè´¹éœ€æ±‚çš„å¹³è¡¡</span><br><span class="line">å¤§å­¦ç”Ÿåœ¨ç½‘çº¢æ¶ˆè´¹è¿‡ç¨‹ä¸­ï¼Œæ—¢å­˜åœ¨è·Ÿé£æ¨¡ä»¿çš„ç°è±¡ï¼Œä¹Ÿæ³¨é‡ä¸ªæ€§è¡¨è¾¾å’Œè‡ªæˆ‘é£æ ¼çš„å¡‘é€ ã€‚ä»–ä»¬ä¼šåœ¨ä¸€å®šç¨‹åº¦ä¸Šæ¥å—ç½‘çº¢æ¨èçš„å•†å“å’ŒæœåŠ¡ï¼ŒåŒæ—¶ä¹Ÿæ ¹æ®ä¸ªäººå–œå¥½å’Œå®é™…æƒ…å†µåšå‡ºé€‰æ‹©ï¼Œå®ç°è·Ÿé£ä¸ä¸ªæ€§éœ€æ±‚çš„åŠ¨æ€å¹³è¡¡ã€‚</span><br><span class="line"></span><br><span class="line">D. æƒ…æ„Ÿå› ç´ åœ¨è´­ä¹°å†³ç­–ä¸­çš„ä½œç”¨</span><br><span class="line">å¤§å­¦ç”Ÿæ¶ˆè´¹è€…åœ¨ç½‘çº¢è´­ç‰©å†³ç­–ä¸­æƒ…æ„Ÿå› ç´ å æ®è¾ƒå¤§æ¯”é‡ï¼ŒåŒ…æ‹¬å¯¹ç½‘çº¢æœ¬äººçš„æƒ…æ„Ÿè®¤åŒã€å¯¹ç½‘çº¢æ‰€æ„å»ºç”Ÿæ´»æ–¹å¼çš„å‘å¾€ä»¥åŠä¸å…¶ä»–ç²‰ä¸é—´çš„ç¤¾äº¤å…³ç³»ç­‰å› ç´ éƒ½ä¼šå½±å“åˆ°è´­ä¹°è¡Œä¸ºã€‚</span><br><span class="line"></span><br><span class="line">IV. ç½‘çº¢å¯¹å¤§å­¦ç”Ÿæ¶ˆè´¹è¡Œä¸ºçš„å½±å“æœºåˆ¶</span><br><span class="line">A. ç½‘çº¢çš„å½±å“åŠ›æ¥æºï¼šå†…å®¹åˆ›ä½œèƒ½åŠ›ã€äººæ ¼é­…åŠ›ã€å£ç¢‘æ•ˆåº”ç­‰</span><br><span class="line">ç½‘çº¢çš„å½±å“åŠ›æºäºå…¶ç‹¬ç‰¹çš„å†…å®¹åˆ›ä½œèƒ½åŠ›ã€é²œæ˜çš„ä¸ªæ€§ç‰¹è´¨ä»¥åŠè‰¯å¥½çš„å£ç¢‘æ•ˆåº”ã€‚ä»–ä»¬é€šè¿‡é«˜è´¨é‡çš„å†…å®¹è¾“å‡ºï¼Œå¸å¼•å¹¶ç»´ç³»ç²‰ä¸ç¾¤ä½“ï¼Œè¿›è€Œè½¬åŒ–ä¸ºå•†ä¸šä»·å€¼ã€‚</span><br><span class="line"></span><br><span class="line">B. ç½‘çº¢è¥é”€ç­–ç•¥å¯¹å¤§å­¦ç”Ÿæ¶ˆè´¹å¿ƒç†çš„å½±å“ï¼šæƒ…æ„Ÿå…±é¸£ã€ç”Ÿæ´»æ–¹å¼å¡‘é€ ã€æ„è§é¢†è¢–è§’è‰²</span><br><span class="line">ç½‘çº¢è¿ç”¨æƒ…æ„Ÿå…±é¸£ã€ç”Ÿæ´»æ–¹å¼å±•ç¤ºä»¥åŠæ„è§é¢†è¢–çš„è§’è‰²å®šä½ï¼Œå·§å¦™åœ°å°†äº§å“èå…¥å…¶ä¸­ï¼Œæ¿€å‘å¤§å­¦ç”Ÿæ¶ˆè´¹è€…çš„å¿ƒç†å…±é¸£ï¼Œå½¢æˆæ½œåœ¨è´­ä¹°æ„æ„¿ï¼Œå¹¶æ¨åŠ¨å®é™…æ¶ˆè´¹è¡Œä¸ºçš„å‘ç”Ÿã€‚</span><br><span class="line"></span><br><span class="line">C. ç½‘çº¢å¹¿å‘Šä¸è½¯æ€§æ¨å¹¿å¯¹å¤§å­¦ç”Ÿæ¶ˆè´¹é€‰æ‹©çš„å¼•å¯¼</span><br><span class="line">ç½‘çº¢å€ŸåŠ©å¹¿å‘Šæ¤å…¥ã€å“ç‰Œåˆä½œç­‰å½¢å¼è¿›è¡Œå•†å“æ¨å¹¿ï¼Œè¿™ç§éšæ€§ä¸”æ˜“äºæ¥å—çš„è¥é”€æ‰‹æ®µåœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå·¦å³äº†å¤§å­¦ç”Ÿçš„æ¶ˆè´¹é€‰æ‹©ã€‚</span><br><span class="line"></span><br><span class="line">V. å¤§å­¦ç”Ÿç½‘çº¢æ¶ˆè´¹è¡Œä¸ºçš„ç¤¾ä¼šæ–‡åŒ–å½±å“</span><br><span class="line">A. å¯¹å¤§å­¦ç”Ÿä»·å€¼è§‚å¡‘é€ çš„å½±å“</span><br><span class="line">å¤§å­¦ç”Ÿç½‘çº¢æ¶ˆè´¹è¡Œä¸ºä¿ƒè¿›äº†ä»–ä»¬å¯¹ç¾çš„è¿½æ±‚ã€ä¸ªæ€§åŒ–æ„è¯†çš„è§‰é†’ä»¥åŠå¯¹å“è´¨ç”Ÿæ´»çš„å‘å¾€ï¼Œè¿›ä¸€æ­¥å¡‘é€ äº†æ–°ä¸€ä»£æ¶ˆè´¹è€…çš„æ¶ˆè´¹ä»·å€¼è§‚ã€‚</span><br><span class="line"></span><br><span class="line">B. ç¤¾ä¼šå®¡ç¾è¶‹åŠ¿ä¸æ¶ˆè´¹è§‚å¿µçš„å˜åŒ–</span><br><span class="line">éšç€å¤§å­¦ç”Ÿå¯¹ç½‘çº¢æ¶ˆè´¹çš„ç§¯æå‚ä¸ï¼Œä»–ä»¬çš„å®¡ç¾æƒ…è¶£å’Œæ¶ˆè´¹è§‚å¿µé€æ¸æˆä¸ºç¤¾ä¼šå®¡ç¾è¶‹åŠ¿çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œè¿›ä¸€æ­¥æ¨åŠ¨ç€ç¤¾ä¼šæ•´ä½“æ¶ˆè´¹è§‚å¿µçš„å˜é©ä¸å‘å±•ã€‚</span><br><span class="line"></span><br><span class="line">C. å¯¹æ ¡å›­æ–‡åŒ–å’Œå¸‚åœºç»æµå‘å±•çš„å¯ç¤º</span><br><span class="line">å¤§å­¦ç”Ÿç½‘çº¢æ¶ˆè´¹è¡Œä¸ºä¸ä»…åæ˜ äº†å½“å‰å¸‚åœºç»æµç¯å¢ƒä¸‹æ¶ˆè´¹ç»“æ„å’Œæ¶ˆè´¹è¡Œä¸ºçš„æ–°å˜åŒ–ï¼Œä¹Ÿä¸ºæ ¡å›­æ–‡åŒ–çš„å¤šå…ƒåŒ–å‘å±•æä¾›äº†æ–°çš„è§†è§’ä¸å¯ç¤ºã€‚</span><br><span class="line"></span><br><span class="line">VI. ç»“è®º</span><br><span class="line">A. å¤§å­¦ç”Ÿç½‘çº¢æ¶ˆè´¹è¡Œä¸ºçš„ä¸»è¦ç‰¹ç‚¹åŠå…¶æˆå› æ€»ç»“</span><br><span class="line">é€šè¿‡å¯¹å¤§å­¦ç”Ÿç½‘çº¢æ¶ˆè´¹è¡Œä¸ºçš„ç ”ç©¶ï¼Œæˆ‘ä»¬å‘ç°å…¶ä¸»è¦ç‰¹ç‚¹åŒ…æ‹¬é«˜åº¦æ´»è·ƒçš„ç¤¾äº¤åª’ä½“å‚ä¸ã€å¼ºçƒˆçš„æƒ…æ„Ÿé©±åŠ¨æ¶ˆè´¹ã€ç´§è·Ÿæ½®æµä¸”å…¼é¡¾ä¸ªæ€§åŒ–çš„æ¶ˆè´¹éœ€æ±‚ä»¥åŠæ·±å—ç½‘çº¢è¥é”€ç­–ç•¥çš„å½±å“ã€‚è¿™äº›ç‰¹ç‚¹çš„èƒŒåæˆå› ä¸»è¦åŒ…æ‹¬å¤§å­¦ç”Ÿç‹¬ç‰¹çš„å¹´é¾„ç‰¹å¾ã€ç½‘ç»œç¯å¢ƒä¸‹çš„ä¿¡æ¯æ¥æ”¶æ–¹å¼ä»¥åŠç½‘çº¢å½±å“åŠ›çš„å¤šé‡ä½œç”¨ã€‚</span><br><span class="line"></span><br><span class="line">B. å¯¹æ•™è‚²éƒ¨é—¨ã€ä¼ä¸šã€ç½‘çº¢è‡ªèº«ä»¥åŠç¤¾ä¼šå„æ–¹é¢åº”å¯¹å¤§å­¦ç”Ÿç½‘çº¢æ¶ˆè´¹è¡Œä¸ºè¿›è¡Œåˆç†å¼•å¯¼å’Œè§„èŒƒçš„å»ºè®®</span><br><span class="line">æ•™è‚²éƒ¨é—¨åº”åŠ å¼ºå¯¹å¤§å­¦ç”Ÿæ¶ˆè´¹è§‚çš„å¼•å¯¼æ•™è‚²ï¼ŒåŸ¹å…»ä»–ä»¬çš„ç†æ€§æ¶ˆè´¹æ„è¯†ï¼›ä¼ä¸šåº”å……åˆ†è®¤è¯†åˆ°ç½‘çº¢è¥é”€çš„ä»·å€¼ï¼Œåˆç†åˆ©ç”¨ç½‘çº¢èµ„æºï¼ŒåŒæ—¶ä¸¥æ ¼éµå®ˆç›¸å…³æ³•å¾‹æ³•è§„ï¼Œç¡®ä¿è¥é”€æ´»åŠ¨çš„åˆæ³•åˆè§„ï¼›ç½‘çº¢è‡ªèº«åˆ™éœ€ä¿æŒèŒä¸šæ“å®ˆï¼Œä¼ é€’æ­£èƒ½é‡ï¼Œå‘æŒ¥å¥½æ¦œæ ·ä½œç”¨ï¼›ç¤¾ä¼šå„ç•Œä¹Ÿåº”å¯¹ç½‘çº¢ç»æµæŒå¼€æ”¾åŒ…å®¹æ€åº¦ï¼Œå¼ºåŒ–ç›‘ç®¡ä¸è‡ªå¾‹ç›¸ç»“åˆï¼Œå…±åŒè¥é€ å¥åº·æœ‰åºçš„ç½‘çº¢æ¶ˆè´¹ç¯å¢ƒã€‚</span><br><span class="line"></span><br><span class="line">C. å±•æœ›æœªæ¥ç ”ç©¶æ–¹å‘ä¸å¯èƒ½æ€§</span><br><span class="line">æœªæ¥çš„ç ”ç©¶å¯ä»¥ä»æ›´å¾®è§‚çš„å±‚é¢æ·±å…¥å‰–æå¤§å­¦ç”Ÿç½‘çº¢æ¶ˆè´¹è¡Œä¸ºçš„å†…åœ¨æœºç†ï¼Œæ¢ç©¶ä¸åŒä¸ªä½“ä¹‹é—´æ¶ˆè´¹å·®å¼‚çš„å…·ä½“åŸå› ï¼›ä¹Ÿå¯ä»¥ç€çœ¼äºå…¨çƒè§†é‡ï¼Œå¯¹æ¯”å›½å†…å¤–å¤§å­¦ç”Ÿç½‘çº¢æ¶ˆè´¹ç°è±¡çš„å¼‚åŒå’Œå‘å±•è¶‹åŠ¿ï¼›æ­¤å¤–ï¼Œè¿˜å¯ä»¥æ¢è®¨å¦‚ä½•ç»“åˆæ–°æŠ€æœ¯åº”ç”¨ï¼Œå¦‚å¤§æ•°æ®ã€äººå·¥æ™ºèƒ½ç­‰ï¼Œæ›´å¥½åœ°ç†è§£å’Œå¼•å¯¼å¤§å­¦ç”Ÿç½‘çº¢æ¶ˆè´¹è¡Œä¸ºã€‚</span><br></pre></td></tr></table></figure>
<h2 id="å¤šé“¾ç»„åˆ">å¤šé“¾ç»„åˆ</h2>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain.chains import LLMChain, SequentialChain</span><br><span class="line"><span class="keyword">from</span> langchain_community.llms.tongyi import Tongyi</span><br><span class="line"><span class="keyword">from</span> langchain_core.prompts import ChatPromptTemplate</span><br><span class="line">import os</span><br><span class="line"></span><br><span class="line">os.environ[<span class="string">&quot;DASHSCOPE_API_KEY&quot;</span>] = <span class="string">&quot;sk-1903ddb520ac4637a1d36b2f93e0aa4c&quot;</span></span><br><span class="line"></span><br><span class="line">llm = Tongyi()</span><br><span class="line"></span><br><span class="line"><span class="comment"># å­é“¾1</span></span><br><span class="line"><span class="comment"># promptæ¨¡æ¿ 1: ç¿»è¯‘æˆè‹±è¯­ï¼ˆæŠŠä¸‹é¢çš„reviewç¿»è¯‘æˆè‹±è¯­ï¼‰</span></span><br><span class="line">first_prompt = ChatPromptTemplate.from_template(</span><br><span class="line">    <span class="string">&quot;æŠŠä¸‹é¢çš„è¯„è®ºreviewç¿»è¯‘æˆä¸­æ–‡:&quot;</span></span><br><span class="line">    <span class="string">&quot;\n\n&#123;Review&#125;&quot;</span></span><br><span class="line">)</span><br><span class="line"><span class="comment"># chain 1: è¾“å…¥ï¼šReview    è¾“å‡ºï¼šä¸­æ–‡çš„ Review</span></span><br><span class="line">chain_one = LLMChain(<span class="attribute">llm</span>=llm, <span class="attribute">prompt</span>=first_prompt, <span class="attribute">output_key</span>=<span class="string">&quot;Chinese_Review&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å­é“¾2</span></span><br><span class="line"><span class="comment"># promptæ¨¡æ¿ 2: ç”¨ä¸€å¥è¯æ€»ç»“ä¸‹é¢çš„ review</span></span><br><span class="line">second_prompt = ChatPromptTemplate.from_template(</span><br><span class="line">    <span class="string">&quot;è¯·ä½ ç”¨ä¸€å¥è¯æ¥æ€»ç»“ä¸‹é¢çš„è¯„è®ºreview:&quot;</span></span><br><span class="line">    <span class="string">&quot;\n\n&#123;Chinese_Review&#125;&quot;</span></span><br><span class="line">)</span><br><span class="line"><span class="comment"># chain 2: è¾“å…¥ï¼šä¸­æ–‡çš„Review   è¾“å‡ºï¼šæ€»ç»“</span></span><br><span class="line">chain_two = LLMChain(<span class="attribute">llm</span>=llm, <span class="attribute">prompt</span>=second_prompt, <span class="attribute">output_key</span>=<span class="string">&quot;summary&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å­é“¾3</span></span><br><span class="line"><span class="comment"># promptæ¨¡æ¿ 3: ä¸‹é¢reviewä½¿ç”¨çš„ä»€ä¹ˆè¯­è¨€</span></span><br><span class="line">third_prompt = ChatPromptTemplate.from_template(</span><br><span class="line">    <span class="string">&quot;ä¸‹é¢çš„è¯„è®ºreviewä½¿ç”¨çš„ä»€ä¹ˆè¯­è¨€:\n\n&#123;Review&#125;&quot;</span></span><br><span class="line">)</span><br><span class="line"><span class="comment"># chain 3: è¾“å…¥ï¼šReview  è¾“å‡ºï¼šè¯­è¨€</span></span><br><span class="line">chain_three = LLMChain(<span class="attribute">llm</span>=llm, <span class="attribute">prompt</span>=third_prompt, <span class="attribute">output_key</span>=<span class="string">&quot;language&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å­é“¾4</span></span><br><span class="line"><span class="comment"># promptæ¨¡æ¿ 4: ä½¿ç”¨ç‰¹å®šçš„è¯­è¨€å¯¹ä¸‹é¢çš„æ€»ç»“å†™ä¸€ä¸ªåç»­å›å¤</span></span><br><span class="line">fourth_prompt = ChatPromptTemplate.from_template(</span><br><span class="line">    <span class="string">&quot;ä½¿ç”¨ç‰¹å®šçš„è¯­è¨€å¯¹ä¸‹é¢çš„æ€»ç»“å†™ä¸€ä¸ªåç»­å›å¤:&quot;</span></span><br><span class="line">    <span class="string">&quot;\n\næ€»ç»“: &#123;summary&#125;\n\nè¯­è¨€: &#123;language&#125;&quot;</span></span><br><span class="line">)</span><br><span class="line"><span class="comment"># chain 4: è¾“å…¥ï¼š æ€»ç»“, è¯­è¨€    è¾“å‡ºï¼š åç»­å›å¤</span></span><br><span class="line">chain_four = LLMChain(<span class="attribute">llm</span>=llm, <span class="attribute">prompt</span>=fourth_prompt, <span class="attribute">output_key</span>=<span class="string">&quot;followup_message&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#è¾“å…¥ï¼šreview</span></span><br><span class="line"><span class="comment">#è¾“å‡ºï¼šä¸­æ–‡reviewï¼Œæ€»ç»“ï¼Œåç»­å›å¤</span></span><br><span class="line">overall_chain = SequentialChain(</span><br><span class="line">    chains=[chain_one, chain_two, chain_three, chain_four],</span><br><span class="line">    input_variables=[<span class="string">&quot;Review&quot;</span>],</span><br><span class="line">    output_variables=[<span class="string">&quot;Chinese_Review&quot;</span>, <span class="string">&quot;summary&quot;</span>, <span class="string">&quot;followup_message&quot;</span>, <span class="string">&quot;language&quot;</span>],</span><br><span class="line">    <span class="attribute">verbose</span>=<span class="literal">True</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    text = input(<span class="string">&quot;è¯·è¾“å…¥å†…å®¹ï¼š&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(overall_chain.invoke(&#123;<span class="string">&quot;Review&quot;</span>: text&#125;))</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s11.ax1x.com/2024/02/24/pFUftjf.png" alt=""></p>
<h2 id="è·¯ç”±é“¾">è·¯ç”±é“¾</h2>
<ul>
<li>å‰é¢çš„é“¾çš„è¾“å…¥é¡ºåºåŸºæœ¬ä¸Šéƒ½æ˜¯å›ºå®šçš„ï¼Œå¦‚æœæƒ³åšæ›´å¤æ‚çš„äº‹æƒ…ï¼Œå°±éœ€è¦æ ¹æ®è¾“å…¥å°†å…¶è·¯ç”±åˆ°ç‰¹å®šçš„é“¾ã€‚å‡è®¾ä½ æœ‰å¤šä¸ªå­é“¾ï¼Œæ¯ä¸ªå­é“¾éƒ½ä¸“é—¨ç”¨äºç‰¹å®šç±»å‹çš„è¾“å…¥ï¼Œé‚£ä¹ˆå¯ä»¥ç»„æˆä¸€ä¸ªè·¯ç”±é“¾</li>
<li>è·¯ç”±å™¨ç”±ä¸¤ä¸ªç»„ä»¶ç»„æˆï¼š
<ol>
<li>è·¯ç”±é“¾ï¼ˆRouter Chainï¼‰ï¼šè·¯ç”±å™¨é“¾æœ¬èº«ï¼Œè´Ÿè´£é€‰æ‹©è¦è°ƒç”¨çš„ä¸‹ä¸€ä¸ªé“¾</li>
<li>destination_chainsï¼šè·¯ç”±å™¨é“¾å¯ä»¥è·¯ç”±åˆ°çš„é“¾</li>
</ol>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> langchain.chains <span class="keyword">import</span> LLMChain, MultiPromptChain</span><br><span class="line"><span class="keyword">from</span> langchain.chains.router.llm_router <span class="keyword">import</span> RouterOutputParser, LLMRouterChain</span><br><span class="line"><span class="keyword">from</span> langchain.chains.router.multi_prompt_prompt <span class="keyword">import</span> MULTI_PROMPT_ROUTER_TEMPLATE</span><br><span class="line"><span class="keyword">from</span> langchain_community.llms.tongyi <span class="keyword">import</span> Tongyi</span><br><span class="line"><span class="keyword">from</span> langchain_core.prompts <span class="keyword">import</span> ChatPromptTemplate, PromptTemplate</span><br><span class="line"></span><br><span class="line">os.environ[<span class="string">&quot;DASHSCOPE_API_KEY&quot;</span>] = <span class="string">&quot;sk-1903ddb520ac4637a1d36b2f93e0aa4c&quot;</span></span><br><span class="line"></span><br><span class="line">llm = Tongyi()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰å¤šç§æç¤ºæ¨¡æ¿</span></span><br><span class="line"><span class="comment"># ç¬¬ä¸€ä¸ªæç¤ºé€‚åˆå›ç­”ç‰©ç†é—®é¢˜</span></span><br><span class="line">physics_template = <span class="string">&quot;&quot;&quot;ä½ æ˜¯ä¸€ä¸ªéå¸¸èªæ˜çš„ç‰©ç†ä¸“å®¶ã€‚ \</span></span><br><span class="line"><span class="string">ä½ æ“…é•¿ç”¨ä¸€ç§ç®€æ´å¹¶ä¸”æ˜“äºç†è§£çš„æ–¹å¼å»å›ç­”é—®é¢˜ã€‚\</span></span><br><span class="line"><span class="string">å½“ä½ ä¸çŸ¥é“é—®é¢˜çš„ç­”æ¡ˆæ—¶ï¼Œä½ æ‰¿è®¤\</span></span><br><span class="line"><span class="string">ä½ ä¸çŸ¥é“.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">è¿™æ˜¯ä¸€ä¸ªé—®é¢˜:</span></span><br><span class="line"><span class="string">&#123;input&#125;&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¬¬äºŒä¸ªæç¤ºé€‚åˆå›ç­”æ•°å­¦é—®é¢˜</span></span><br><span class="line">math_template = <span class="string">&quot;&quot;&quot;ä½ æ˜¯ä¸€ä¸ªéå¸¸ä¼˜ç§€çš„æ•°å­¦å®¶ã€‚ \</span></span><br><span class="line"><span class="string">ä½ æ“…é•¿å›ç­”æ•°å­¦é—®é¢˜ã€‚ \</span></span><br><span class="line"><span class="string">ä½ ä¹‹æ‰€ä»¥å¦‚æ­¤ä¼˜ç§€ï¼Œ \</span></span><br><span class="line"><span class="string">æ˜¯å› ä¸ºä½ èƒ½å¤Ÿå°†æ£˜æ‰‹çš„é—®é¢˜åˆ†è§£ä¸ºç»„æˆéƒ¨åˆ†ï¼Œ\</span></span><br><span class="line"><span class="string">å›ç­”ç»„æˆéƒ¨åˆ†ï¼Œç„¶åå°†å®ƒä»¬ç»„åˆåœ¨ä¸€èµ·ï¼Œå›ç­”æ›´å¹¿æ³›çš„é—®é¢˜ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">è¿™æ˜¯ä¸€ä¸ªé—®é¢˜ï¼š</span></span><br><span class="line"><span class="string">&#123;input&#125;&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¬¬ä¸‰ä¸ªé€‚åˆå›ç­”å†å²é—®é¢˜</span></span><br><span class="line">history_template = <span class="string">&quot;&quot;&quot;ä½ æ˜¯ä»¥ä¸ºéå¸¸ä¼˜ç§€çš„å†å²å­¦å®¶ã€‚ \</span></span><br><span class="line"><span class="string">ä½ å¯¹ä¸€ç³»åˆ—å†å²æ—¶æœŸçš„äººç‰©ã€äº‹ä»¶å’ŒèƒŒæ™¯æœ‰ç€æå¥½çš„å­¦è¯†å’Œç†è§£\</span></span><br><span class="line"><span class="string">ä½ æœ‰èƒ½åŠ›æ€è€ƒã€åæ€ã€è¾©è¯ã€è®¨è®ºå’Œè¯„ä¼°è¿‡å»ã€‚\</span></span><br><span class="line"><span class="string">ä½ å°Šé‡å†å²è¯æ®ï¼Œå¹¶æœ‰èƒ½åŠ›åˆ©ç”¨å®ƒæ¥æ”¯æŒä½ çš„è§£é‡Šå’Œåˆ¤æ–­ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">è¿™æ˜¯ä¸€ä¸ªé—®é¢˜:</span></span><br><span class="line"><span class="string">&#123;input&#125;&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¬¬å››ä¸ªé€‚åˆå›ç­”è®¡ç®—æœºé—®é¢˜</span></span><br><span class="line">computerscience_template = <span class="string">&quot;&quot;&quot; ä½ æ˜¯ä¸€ä¸ªæˆåŠŸçš„è®¡ç®—æœºç§‘å­¦ä¸“å®¶ã€‚\</span></span><br><span class="line"><span class="string">ä½ æœ‰åˆ›é€ åŠ›ã€åä½œç²¾ç¥ã€\</span></span><br><span class="line"><span class="string">å‰ç»æ€§æ€ç»´ã€è‡ªä¿¡ã€è§£å†³é—®é¢˜çš„èƒ½åŠ›ã€\</span></span><br><span class="line"><span class="string">å¯¹ç†è®ºå’Œç®—æ³•çš„ç†è§£ä»¥åŠå‡ºè‰²çš„æ²Ÿé€šæŠ€å·§ã€‚\</span></span><br><span class="line"><span class="string">ä½ éå¸¸æ“…é•¿å›ç­”ç¼–ç¨‹é—®é¢˜ã€‚\</span></span><br><span class="line"><span class="string">ä½ ä¹‹æ‰€ä»¥å¦‚æ­¤ä¼˜ç§€ï¼Œæ˜¯å› ä¸ºä½ çŸ¥é“  \</span></span><br><span class="line"><span class="string">å¦‚ä½•é€šè¿‡ä»¥æœºå™¨å¯ä»¥è½»æ¾è§£é‡Šçš„å‘½ä»¤å¼æ­¥éª¤æè¿°è§£å†³æ–¹æ¡ˆæ¥è§£å†³é—®é¢˜ï¼Œ\</span></span><br><span class="line"><span class="string">å¹¶ä¸”ä½ çŸ¥é“å¦‚ä½•é€‰æ‹©åœ¨æ—¶é—´å¤æ‚æ€§å’Œç©ºé—´å¤æ‚æ€§ä¹‹é—´å–å¾—è‰¯å¥½å¹³è¡¡çš„è§£å†³æ–¹æ¡ˆã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">è¿™è¿˜æ˜¯ä¸€ä¸ªé—®é¢˜ï¼š</span></span><br><span class="line"><span class="string">&#123;input&#125;&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸ºæ¯ä¸ªæ¨¡æ¿å‘½åï¼Œå¹¶ä¸”ç»™å‡ºå…·ä½“æè¿°ï¼Œå°†è¿™äº›ä¿¡æ¯ä¼ é€’ç»™è·¯ç”±é“¾ï¼Œè·¯ç”±é“¾å†³å®šä½•æ—¶è°ƒç”¨å­é“¾</span></span><br><span class="line">prompt_infos = [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;åå­—&quot;</span>: <span class="string">&quot;ç‰©ç†å­¦&quot;</span>,</span><br><span class="line">        <span class="string">&quot;æè¿°&quot;</span>: <span class="string">&quot;æ“…é•¿å›ç­”å…³äºç‰©ç†å­¦çš„é—®é¢˜&quot;</span>,</span><br><span class="line">        <span class="string">&quot;æç¤ºæ¨¡æ¿&quot;</span>: physics_template</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;åå­—&quot;</span>: <span class="string">&quot;æ•°å­¦&quot;</span>,</span><br><span class="line">        <span class="string">&quot;æè¿°&quot;</span>: <span class="string">&quot;æ“…é•¿å›ç­”æ•°å­¦é—®é¢˜&quot;</span>,</span><br><span class="line">        <span class="string">&quot;æç¤ºæ¨¡æ¿&quot;</span>: math_template</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;åå­—&quot;</span>: <span class="string">&quot;å†å²&quot;</span>,</span><br><span class="line">        <span class="string">&quot;æè¿°&quot;</span>: <span class="string">&quot;æ“…é•¿å›ç­”å†å²é—®é¢˜&quot;</span>,</span><br><span class="line">        <span class="string">&quot;æç¤ºæ¨¡æ¿&quot;</span>: history_template</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;åå­—&quot;</span>: <span class="string">&quot;è®¡ç®—æœºç§‘å­¦&quot;</span>,</span><br><span class="line">        <span class="string">&quot;æè¿°&quot;</span>: <span class="string">&quot;æ“…é•¿å›ç­”è®¡ç®—æœºç§‘å­¦é—®é¢˜&quot;</span>,</span><br><span class="line">        <span class="string">&quot;æç¤ºæ¨¡æ¿&quot;</span>: computerscience_template</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŸºäºæç¤ºæ¨¡ç‰ˆä¿¡æ¯åˆ›å»ºç›¸åº”ç›®æ ‡é“¾</span></span><br><span class="line">destination_chains = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> p_info <span class="keyword">in</span> prompt_infos:</span><br><span class="line">    name = p_info[<span class="string">&quot;åå­—&quot;</span>]</span><br><span class="line">    prompt_template = p_info[<span class="string">&quot;æç¤ºæ¨¡æ¿&quot;</span>]</span><br><span class="line">    prompt = ChatPromptTemplate.from_template(template=prompt_template)</span><br><span class="line">    chain = LLMChain(llm=llm, prompt=prompt)</span><br><span class="line">    destination_chains[name] = chain</span><br><span class="line"></span><br><span class="line">destinations = [<span class="string">f&quot;<span class="subst">&#123;p[<span class="string">&#x27;åå­—&#x27;</span>]&#125;</span>: <span class="subst">&#123;p[<span class="string">&#x27;æè¿°&#x27;</span>]&#125;</span>&quot;</span> <span class="keyword">for</span> p <span class="keyword">in</span> prompt_infos]</span><br><span class="line">destinations_str = <span class="string">&quot;\n&quot;</span>.join(destinations)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ„å»ºé»˜è®¤ç›®æ ‡é“¾ï¼Œå½“è·¯ç”±å™¨æ— æ³•å†³å®šä½¿ç”¨å“ªä¸ªå­é“¾æ—¶è°ƒç”¨çš„é“¾ã€‚</span></span><br><span class="line">default_prompt = ChatPromptTemplate.from_template(<span class="string">&quot;&#123;input&#125;&quot;</span>)</span><br><span class="line">default_chain = LLMChain(llm=llm, prompt=default_prompt)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ„å»ºè·¯ç”±é“¾</span></span><br><span class="line">router_template = MULTI_PROMPT_ROUTER_TEMPLATE.<span class="built_in">format</span>(destinations=destinations_str)</span><br><span class="line"></span><br><span class="line">router_prompt = PromptTemplate(</span><br><span class="line">    template=router_template,</span><br><span class="line">    input_variables=[<span class="string">&quot;input&quot;</span>],</span><br><span class="line">    output_parser=RouterOutputParser(),</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">router_chain = LLMRouterChain.from_llm(llm, router_prompt)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ„å»ºæ•´ä½“é“¾è·¯</span></span><br><span class="line">chain = MultiPromptChain(router_chain=router_chain,  <span class="comment"># è·¯ç”±é“¾è·¯</span></span><br><span class="line">                         destination_chains=destination_chains,  <span class="comment"># ç›®æ ‡é“¾è·¯</span></span><br><span class="line">                         default_chain=default_chain,  <span class="comment"># é»˜è®¤é“¾è·¯</span></span><br><span class="line">                         verbose=<span class="literal">True</span></span><br><span class="line">                         )</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    que = <span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥é—®é¢˜ï¼š&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(chain.invoke(&#123;<span class="string">&quot;input&quot;</span>: que&#125;))</span><br></pre></td></tr></table></figure>
<ul>
<li>åç»­æˆ‘ä»¬å¯ä»¥é¢„å®šä¹‰éå¸¸å¤šçš„promptï¼Œç„¶åé€šè¿‡è·¯ç”±é“¾æ¥è¿›è¡Œä»»åŠ¡åˆ†å‘ï¼Œå°½å¯èƒ½æŠŠä»»åŠ¡ç»†åˆ†ï¼Œè¿™æ ·å‡ºç°é—®é¢˜æ—¶ï¼Œåªéœ€è¦å…³æ³¨å¯¹åº”çš„æŸä¸€ä¸ªpromptï¼Œè€Œä¸éœ€è¦æ•´ä½“çš„æ”¹åŠ¨ã€‚</li>
</ul>
<h1>ä»£ç†çš„æ¦‚å¿µï¼ˆè¡¥å……ï¼‰</h1>
<ul>
<li>
<p>å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMsï¼‰éå¸¸å¼ºå¤§ï¼Œä½†å®ƒä»¬ç¼ºä¹â€œæœ€ç¬¨â€çš„è®¡ç®—æœºç¨‹åºå¯ä»¥è½»æ¾å¤„ç†çš„ç‰¹å®šèƒ½åŠ›ã€‚LLM å¯¹é€»è¾‘æ¨ç†ã€è®¡ç®—å’Œæ£€ç´¢å¤–éƒ¨ä¿¡æ¯çš„èƒ½åŠ›è¾ƒå¼±ï¼Œè¿™ä¸æœ€ç®€å•çš„è®¡ç®—æœºç¨‹åºå½¢æˆå¯¹æ¯”ã€‚ä¾‹å¦‚ï¼Œè¯­è¨€æ¨¡å‹æ— æ³•å‡†ç¡®å›ç­”ç®€å•çš„è®¡ç®—é—®é¢˜ï¼Œè¿˜æœ‰å½“è¯¢é—®æœ€è¿‘å‘ç”Ÿçš„äº‹ä»¶æ—¶ï¼Œå…¶å›ç­”ä¹Ÿå¯èƒ½è¿‡æ—¶æˆ–é”™è¯¯ï¼Œå› ä¸ºæ— æ³•ä¸»åŠ¨è·å–æœ€æ–°ä¿¡æ¯ã€‚è¿™æ˜¯ç”±äºå½“å‰è¯­è¨€æ¨¡å‹ä»…ä¾èµ–é¢„è®­ç»ƒæ•°æ®ï¼Œä¸å¤–ç•Œâ€œæ–­å¼€â€ã€‚è¦å…‹æœè¿™ä¸€ç¼ºé™·ï¼ŒLangChainæ¡†æ¶æå‡ºäº†â€œä»£ç†â€(Agent)çš„è§£å†³æ–¹æ¡ˆã€‚</p>
</li>
<li>
<p>ä»£ç†ä½œä¸ºè¯­è¨€æ¨¡å‹çš„å¤–éƒ¨æ¨¡å—ï¼Œå¯æä¾›è®¡ç®—ã€é€»è¾‘ã€æ£€ç´¢ç­‰åŠŸèƒ½çš„æ”¯æŒï¼Œä½¿è¯­è¨€æ¨¡å‹è·å¾—å¼‚å¸¸å¼ºå¤§çš„æ¨ç†å’Œè·å–ä¿¡æ¯çš„è¶…èƒ½åŠ›ã€‚</p>
</li>
<li>
<p>è¦ä½¿ç”¨ä»£ç† (Agents) ï¼Œæˆ‘ä»¬éœ€è¦ä¸‰æ ·ä¸œè¥¿ï¼š</p>
<ol>
<li>ä¸€ä¸ªåŸºæœ¬çš„ LLM</li>
<li>æˆ‘ä»¬å°†è¦è¿›è¡Œäº¤äº’çš„å·¥å…· Tools</li>
<li>ä¸€ä¸ªæ§åˆ¶äº¤äº’çš„ä»£ç† (Agents) ã€‚</li>
</ol>
<ul>
<li>ç°åœ¨å°è¯•ä½¿ç”¨ä»£ç†æ¥è§£å†³æ•°å­¦é—®é¢˜</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> langchain.agents <span class="keyword">import</span> load_tools, initialize_agent, AgentType</span><br><span class="line"><span class="keyword">from</span> langchain_community.llms.tongyi <span class="keyword">import</span> Tongyi</span><br><span class="line"></span><br><span class="line">os.environ[<span class="string">&quot;DASHSCOPE_API_KEY&quot;</span>] = <span class="string">&quot;sk-1903ddb520ac4637a1d36b2f93e0aa4c&quot;</span></span><br><span class="line"></span><br><span class="line">llm = Tongyi()</span><br><span class="line"></span><br><span class="line">tools = load_tools(</span><br><span class="line">    [<span class="string">&quot;llm-math&quot;</span>, <span class="string">&quot;wikipedia&quot;</span>],</span><br><span class="line">    llm=llm</span><br><span class="line">)</span><br><span class="line">agent = initialize_agent(</span><br><span class="line">    tools,  <span class="comment"># ç¬¬äºŒæ­¥åŠ è½½çš„å·¥å…·</span></span><br><span class="line">    llm,  <span class="comment"># ç¬¬ä¸€æ­¥åˆå§‹åŒ–çš„æ¨¡å‹</span></span><br><span class="line">    agent=AgentType.CHAT_ZERO_SHOT_REACT_DESCRIPTION,  <span class="comment"># ä»£ç†ç±»å‹</span></span><br><span class="line">    handle_parsing_errors=<span class="literal">True</span>,  <span class="comment"># å¤„ç†è§£æé”™è¯¯</span></span><br><span class="line">    verbose=<span class="literal">True</span>  <span class="comment"># è¾“å‡ºä¸­é—´æ­¥éª¤</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">agent.invoke(&#123;<span class="string">&quot;input&quot;</span>: <span class="string">&quot;2084çš„25%æ˜¯å¤šå°‘ï¼Ÿè¿˜æœ‰ï¼Œä½ çŸ¥é“Palworldè¿™æ¬¾æ¸¸æˆå—&quot;</span>&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>è¾“å‡º</p>
<blockquote>
<p>Thought: ç¬¬ä¸€ä¸ªé—®é¢˜éœ€è¦è®¡ç®—2084çš„25%ï¼Œå¯ä»¥ä½¿ç”¨è®¡ç®—å™¨å·¥å…·ï¼›ç¬¬äºŒä¸ªé—®é¢˜è¯¢é—®å…³äºPalworldè¿™æ¬¾æ¸¸æˆçš„ä¿¡æ¯ï¼Œéœ€è¦ç”¨åˆ°Wikipediaå·¥å…·ã€‚</p>
<p>Action:</p>
 <figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;action&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Calculator&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;action_input&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2084 * 25%&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>Observation: Answer: 521.0<br>
Thought:å¯¹äºç¬¬äºŒä¸ªé—®é¢˜ï¼Œæˆ‘éœ€è¦ä½¿ç”¨Wikipediaå·¥å…·æ¥æŸ¥è¯¢Palworldè¿™æ¬¾æ¸¸æˆçš„ä¿¡æ¯ã€‚<br>
Action:</p>
 <figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;action&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Wikipedia&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;action_input&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Palworld&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>Observation: Page: Palworld<br>
Summary: Palworld is an action-adventure survival game by Japanese developer Pocket Pair. The game is set in an open world populated with animal-like creatures known as â€œPalsâ€. The players can battle and capture Pals in order to use them for base building, traversal, and combat. Palworld can be played either solo, or online by up to 32 players on one server. Announced in 2021, it was launched via early access for Windows, Xbox One, and Xbox Series X/S in January 2024.<br>
The gameâ€™s comedic premise, which involves using firearms and equipping Pals with them, earned it the nickname â€œPokÃ©mon with gunsâ€. Other elements, such as using creatures for food or placing them to work in mines and factories, have also garnered attention. It was generally well received, with praise for its gameplay, content, and satirical premise, but criticism for its reliance on shock humor and use of unoriginal designs and mechanics.Palworld sold eight million units in the first six days of early access and reached two million concurrent players on Steam, making it the second-highest played game of all time on the platform.</p>
<p>Page: Brotato<br>
Summary: Brotato is a 2023 shoot 'em up video game created by French independent developer Thomas Gervraud under the studio name Blobfish. It was first released via Steam early access in 2022, during which it sold over one million copies. Brotato received positive reviews from critics and players, and it was later ported to multiple platforms.</p>
<p>Page: List of video games in development<br>
Summary: This is a confirmed list of video games in development, but are scheduled for release beyond 2024 or currently carry no release date at all.</p>
</blockquote>
</li>
<li>
<p>æ€»ç»“ä¸€ä¸‹ä¸Šé¢çš„æµç¨‹<br>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s11.ax1x.com/2024/02/24/pFUfYgP.png" alt=""></p>
</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__title"><span class="post-copyright-info"><h>LangChainå…¥é—¨æŒ‡å—</h></span></div><div class="post-copyright__type"><span class="post-copyright-info"><a href="https://cyborg2077.github.io/2024/01/26/LangChainPrimer/">https://cyborg2077.github.io/2024/01/26/LangChainPrimer/</a></span></div><div class="post-copyright-m"><div class="post-copyright-m-info"><div class="post-copyright-a"><h>ä½œè€…</h><div class="post-copyright-cc-info"><h>Kyle Violet</h></div></div><div class="post-copyright-c"><h>å‘å¸ƒäº</h><div class="post-copyright-cc-info"><h>2024-01-26</h></div></div><div class="post-copyright-u"><h>æ›´æ–°äº</h><div class="post-copyright-cc-info"><h>2024-02-24</h></div></div><div class="post-copyright-c"><h>è®¸å¯åè®®</h><div class="post-copyright-cc-info"><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a rel="noopener" target="_blank" title="CC BY-NC-SA 4.0" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a></div></div></div></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/LangChain/"><div class="tags-punctuation"><svg class="faa-tada icon" style="height:1.1em;width:1.1em;fill:currentColor;position:relative;top:2px;margin-right:3px" aria-hidden="true"><use xlink:href="#icon-sekuaibiaoqian"></use></svg></div>LangChain</a></div></div><link rel="stylesheet" href="/css/coin.css" media="defer" onload="this.media='all'"/><div class="post-reward"><button class="tip-button reward-button"><span class="tip-button__text">æŠ•å–‚ä½œè€…</span><div class="coin-wrapper"><div class="coin"><div class="coin__middle"></div><div class="coin__back"></div><div class="coin__front"></div></div></div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat.svg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/wechat.svg" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="/img/alipay.svg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/alipay.svg" alt="alipay"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div></button></div><script defer="defer" src="/js/coin.js"></script><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/02/07/NavicatSyncPit/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img0.baidu.com/it/u=4155835667,974645702&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=PNG?w=889&amp;h=500" onerror="onerror=null;src='/assets/r2.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">Navicatåœ¨ç»“æ„åŒæ­¥æ—¶çš„æ³¨æ„äº‹é¡¹</div></div></a></div><div class="next-post pull-right"><a href="/2023/12/31/SelectForUpdate/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fi0.hdslb.com%2Fbfs%2Farticle%2F7195c774995376cbaf3c2868706521746c0e9142.png&amp;refer=http%3A%2F%2Fi0.hdslb.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=jpeg?sec=1645330580&amp;t=7ef089d6818c156c451e5072f53f3597" onerror="onerror=null;src='/assets/r2.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">SELECT FOR UPDATEçš„é”ç²’åº¦</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> è¯„è®º</span></div></div><div class="comment-wrap"><div><div id="giscus-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="cols"><div class="col"><div class="container"><div class="front avatarPanel"><div class="inner"><div class="player-title">Attributes</div><div class="player-avatar"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2023/11/18/D1mT7ed2uyJkwVG.png" onerror="this.onerror=null;this.src='/assets/r1.png'" alt="avatar"/></div></div></div><div class="back attributesPanel"><div class="inner"><div class="player-lv">LV.14</div><div class="player-name">Kyle Violet</div><div class="attributes-value"><div class="attributes-value-item"><a href="/archives/"><div class="attributes">æ–‡ç« </div><div class="value-bar"><div class="value-bar-fill" style="width:68.00%"><div class="value-bar-fill-in" style="background: rgba(89, 230, 54,0.6)"></div></div></div><span>136/200</span></a></div><div class="attributes-value-item"><a href="/tags/"><div class="attributes">æ ‡ç­¾</div><div class="value-bar"><div class="value-bar-fill" style="width:51.00%"><div class="value-bar-fill-in" style="background: rgba(224, 20, 20, 0.6)"></div></div></div><span>102/200</span></a></div><div class="attributes-value-item"><a href="/categories/"><div class="attributes">åˆ†ç±»</div><div class="value-bar"><div class="value-bar-fill" style="width:12.00%"><div class="value-bar-fill-in" style="background: rgba(30, 97, 226, 0.6)"></div></div></div><span>12/100</span></a></div></div></div></div></div></div><div class="col"><div class="container"><div class="front descriptionPanel"><div class="inner"><div class="player_description">The furthest distance in the world <br>ls not between life and death <br>But when l stand in front of you <br> Yet you don't know that l love you</div><div class="play-bottom"></div></div></div><div class="back buttonPanel"><div class="inner"><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Cyborg2077"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/Cyborg2077" target="_blank" title="Github"><svg class="social_icon iconfont" aria-hidden="true" style="width:1.15em;height:1.15em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-github-cyborg"></use></svg></a><a class="social-icon faa-parent animated-hover" href="http://wpa.qq.com/msgrd?v=3&amp;uin=1586385296&amp;site=qq&amp;menu=yes" target="_blank" title="QQ"><svg class="social_icon iconfont" aria-hidden="true" style="width:1.15em;height:1.15em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-QQ-cyborg"></use></svg></a><a class="social-icon faa-parent animated-hover" href="https://music.163.com/#/user/home?id=608935942" target="_blank" title="ç½‘æŠ‘äº‘"><svg class="social_icon iconfont" aria-hidden="true" style="width:1.15em;height:1.15em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-netease-cyborg"></use></svg></a><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/160218990" target="_blank" title="Bilibili"><svg class="social_icon iconfont" aria-hidden="true" style="width:1.15em;height:1.15em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-bilibili-cyborg"></use></svg></a><a class="social-icon faa-parent animated-hover" href="https://steamcommunity.com/profiles/76561198851566538/" target="_blank" title="Steam"><svg class="social_icon iconfont" aria-hidden="true" style="width:1.15em;height:1.15em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-steam-cyborg"></use></svg></a></div><div class="play-bottom"></div></div></div></div></div></div></div><div class="card-widget card-announcement"><div class="item-headline"><a class="faa-parent animated-hover"><svg class="faa-tada icon" style="height:25px;width:25px;fill:currentColor;position:relative;top:5px" aria-hidden="true"><use xlink:href="#icon-gonggao"></use></svg></a><span style="font-weight:bold">å…¬å‘Šæ </span></div><div class="announcement_content">æ°é¥­å¹¿å‘Šï¼Œä¸€ä¸ªè®ºæ–‡<font color="orange">æŸ¥é‡/é™é‡</font>ç½‘ç«™ï¼Œä¹Ÿå…¼ä»»å„ç§æ–‡æœ¬é™é‡ã€æ¶¦è‰²ã€æ‰©å†™ç­‰å¤„ç†ï¼Œ<font color="orange">æŠ„å„ç§ä½œä¸šçš„æ—¶å€™æœ‰å¤§ç”¨ï¼ï¼</font><br>æ³¨å†Œæœ‰å…è´¹ä½“éªŒå­—æ•°ï¼Œè®ºæ–‡æŸ¥é‡ä»·æ ¼ç°åœ¨æ˜¯<font color="orange">æ–°å²ä½</font>,ç›®å‰è¿˜æ–°ä¸Šäº†ç”Ÿæˆ<font color="orange">å¼€é¢˜æŠ¥å‘Š</font>çš„æ¨¡å—ï¼Œæ„Ÿå…´è¶£çš„å…„å¼ŸèŒå¯ä»¥æˆ³é“¾æ¥çœ‹çœ‹ï¼š<a href="https://www.kuaijiangchong.com.cn/" target="_blank">å¿«é™é‡--é«˜ç«¯é™é‡ï¼Œé¥é¥é¢†å…ˆ</a></div><div id="welcome-info"></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><svg class="meta_icon" style="width:22px;height:22px;position:relative;top:5px"><use xlink:href="#icon-mulu1"></use></svg><span style="font-weight:bold">ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">ä»€ä¹ˆæ˜¯LangChain</span></a></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">2.</span> <span class="toc-text">å¦‚ä½•ä½¿ç”¨LangChain</span></a></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">3.</span> <span class="toc-text">LangChainçš„æ¨¡å‹</span></a></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">4.</span> <span class="toc-text">LangChain çš„ä¸»è¦ç‰¹ç‚¹</span></a></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">5.</span> <span class="toc-text">ä½¿ç”¨ç¤ºä¾‹</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8F%90%E7%A4%BA%E6%A8%A1%E6%9D%BF%EF%BC%88PromptTemplate%EF%BC%89"><span class="toc-number">5.1.</span> <span class="toc-text">æç¤ºæ¨¡æ¿ï¼ˆPromptTemplateï¼‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#LLM-Chain"><span class="toc-number">5.2.</span> <span class="toc-text">LLM Chain</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Retrieval-Chain%EF%BC%88%E5%9F%BA%E4%BA%8E%E6%A3%80%E7%B4%A2%E7%9A%84chain%EF%BC%89"><span class="toc-number">5.3.</span> <span class="toc-text">Retrieval Chainï¼ˆåŸºäºæ£€ç´¢çš„chainï¼‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%B9%E6%8D%AE%E6%96%87%E6%A1%A3%E6%9E%84%E5%BB%BA%E5%90%91%E9%87%8F"><span class="toc-number">5.4.</span> <span class="toc-text">æ ¹æ®æ–‡æ¡£æ„å»ºå‘é‡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9E%84%E5%BB%BA%E9%93%BE"><span class="toc-number">5.5.</span> <span class="toc-text">æ„å»ºé“¾</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%8C%E6%95%B4demo"><span class="toc-number">5.6.</span> <span class="toc-text">å®Œæ•´demo</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Conversation-Retrieval-Chain%EF%BC%88%E5%AF%B9%E8%AF%9D%E6%A3%80%E7%B4%A2%E9%93%BE%EF%BC%89"><span class="toc-number">5.7.</span> <span class="toc-text">Conversation Retrieval Chainï¼ˆå¯¹è¯æ£€ç´¢é“¾ï¼‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Agent"><span class="toc-number">5.8.</span> <span class="toc-text">Agent</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9E%84%E5%BB%BA%E6%9C%8D%E5%8A%A1"><span class="toc-number">5.9.</span> <span class="toc-text">æ„å»ºæœåŠ¡</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">6.</span> <span class="toc-text">é“¾çš„æ¦‚å¿µï¼ˆè¡¥å……ï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%BA%E5%BA%8F%E9%93%BE%EF%BC%88SequentialChains%EF%BC%89"><span class="toc-number">6.1.</span> <span class="toc-text">é¡ºåºé“¾ï¼ˆSequentialChainsï¼‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E9%93%BE%E7%BB%84%E5%90%88"><span class="toc-number">6.2.</span> <span class="toc-text">å¤šé“¾ç»„åˆ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E9%93%BE"><span class="toc-number">6.3.</span> <span class="toc-text">è·¯ç”±é“¾</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">7.</span> <span class="toc-text">ä»£ç†çš„æ¦‚å¿µï¼ˆè¡¥å……ï¼‰</span></a></li></ol></div></div></div></div></main><footer id="footer" style="background-color: transparent;"><div id="footer-wrap"><div id="ft"><div class="ft-item-1"><div class="t-top"><div class="t-t-l"><p class="ft-t t-l-t">æ ¼è¨€ğŸ§¬</p><div class="bg-ad"><div>ç¦»æˆ‘ä»¬æœ€è¿‘çš„æ˜Ÿæ˜Ÿæœ‰4.25å…‰å¹´è¿œï¼Œæˆ‘ä»¬è®¸çš„æ„¿æœ›è‡³å°‘éƒ½è¦èŠ±ä¸Š9å¹´æ‰èƒ½æˆçœŸã€‚â€”â€”â€”â€”æ‰€ä»¥ï¼Œå‘å®‡å®™ä¸‹è®¢å•è¦æœ‰è€å¿ƒã€‚âœ¨</div><div class="btn-xz-box"><a class="btn-xz" target="_blank" rel="noopener" href="https://stellarium.org/">ç‚¹å‡»å¼€å¯æ˜Ÿè¾°ä¹‹æ—…</a></div></div></div><div class="t-t-r"><p class="ft-t t-l-t">çŒœä½ æƒ³çœ‹ğŸ’¡</p><ul class="ft-links"><li><a href="/gossip/">æˆ‘çš„è¯´è¯´</a><a href="/box/nav/">ç½‘å€å¯¼èˆª</a></li><li><a href="/social/link/">æˆ‘çš„æœ‹å‹</a><a href="/comments/">ç•™ç‚¹ä»€ä¹ˆ</a></li><li><a href="/personal/about/">å…³äºä½œè€…</a><a href="/archives/">æ–‡ç« å½’æ¡£</a></li><li><a href="/categories/">æ–‡ç« åˆ†ç±»</a><a href="/tags/">æ–‡ç« æ ‡ç­¾</a></li><li><a href="/box/fitness/">å¥èº«æ—¥å¯„</a><a href="/secret/">è®°å¿†èƒ¶å›Š</a></li></ul></div></div></div><div class="ft-item-2"><p class="ft-t">æ¨èå‹é“¾âŒ›</p><div class="ft-img-group"><div class="img-group-item"><a href="https://cyborg2077.github.io/" title="Kyle's Blog"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2023/11/18/D1mT7ed2uyJkwVG.png" alt=""/></a></div><div class="img-group-item"><a href="javascript:void(0)" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""/></a></div><div class="img-group-item"><a href="javascript:void(0)" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""/></a></div><div class="img-group-item"><a href="javascript:void(0)" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""/></a></div><div class="img-group-item"><a href="javascript:void(0)" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""/></a></div><div class="img-group-item"><a href="javascript:void(0)" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""/></a></div><div class="img-group-item"><a href="javascript:void(0)" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""/></a></div></div></div></div><div class="copyright"><span><b>&copy;2021-2024</b></span><span><b>&nbsp;&nbsp;By Kyle Violet</b></span></div><div id="workboard"></div><pghbdages><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" title="åšå®¢æ¡†æ¶ä¸ºHexo_v6.3.0"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.ladydaily.com/badge/Frame-Hexo-blue.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" title="ä¸»é¢˜ç‰ˆæœ¬Butterfly_v4.3.1"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.ladydaily.com/badge/Theme-Butterfly-6513df.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://vercel.com/" style="margin-inline:5px" title="æœ¬ç«™é‡‡ç”¨å¤šçº¿éƒ¨ç½²ï¼Œä¸»çº¿è·¯æ‰˜ç®¡äºVercel"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.ladydaily.com/badge/Hosted-Vercel-brightgreen.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://user.51.la/" style="margin-inline:5px" title="æœ¬ç«™æ•°æ®åˆ†æå¾—ç›Šäº51laæŠ€æœ¯æ”¯æŒ"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.ladydaily.com/badge/Analytics-51la-3db1eb.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://icp.gov.moe/?keyword=20226665" style="margin-inline:5px" title="æœ¬ç«™å·²åŠ å…¥èŒICPè±ªåå¥—é¤ï¼ŒèŒICPå¤‡20226665å·"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.ladydaily.com/badge/èŒICPå¤‡-20226665-fe1384.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://bitiful.dogecast.com/buckets" style="margin-inline:5px" title="æœ¬ç½‘ç«™ç»Service Workeråˆ†æµè‡³ç¼¤çº·äº‘å¯¹è±¡å­˜å‚¨"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src=" https://sourcebucket.s3.ladydaily.com/badge/Bucket-ç¼¤çº·äº‘-9c62da.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://www.netdun.net/" style="margin-inline:5px" title="æœ¬ç«™ä½¿ç”¨ç½‘ç›¾æ˜Ÿçƒæä¾›CDNåŠ é€Ÿä¸é˜²æŠ¤"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.ladydaily.com/badge/CDN-ç½‘ç›¾æ˜Ÿçƒ-fff2cc.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" title="æœ¬ç½‘ç«™æºç ç”±Githubæä¾›å­˜å‚¨ä»“åº“"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src=" https://sourcebucket.s3.ladydaily.com/badge/Source-Github-d021d6.svg" alt=""/></a></pghbdages></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><a class="icon-V hidden" onclick="switchNightMode()" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><svg width="25" height="25" viewBox="0 0 1024 1024"><use id="modeicon" xlink:href="#icon-moon"></use></svg></a><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button><button class="share" type="button" title="å³é”®æ¨¡å¼" onclick="changeMouseMode()"><i class="fas fa-mouse"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog right_side"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button class="share" type="button" title="åˆ†äº«é“¾æ¥" onclick="share()"><i class="fas fa-share-nodes"></i></button><a id="to_comment" href="#post-comment" title="ç›´è¾¾è¯„è®º"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="fas fa-arrow-up"></i><span id="percent">0<span>%</span></span></button><button id="go-down" type="button" title="ç›´è¾¾åº•éƒ¨" onclick="btf.scrollToDest(document.body.scrollHeight, 500)"><i class="fas fa-arrow-down"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  æ•°æ®åº“åŠ è½½ä¸­</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div class="js-pjax" id="rightMenu"><div class="rightMenu-group rightMenu-small"><a class="rightMenu-item" href="javascript:window.history.back();"><i class="fa fa-arrow-left"></i></a><a class="rightMenu-item" href="javascript:window.history.forward();"><i class="fa fa-arrow-right"></i></a><a class="rightMenu-item" href="javascript:window.location.reload();"><i class="fa fa-refresh"></i></a><a class="rightMenu-item" href="javascript:rmf.scrollToTop();"><i class="fa fa-arrow-up"></i></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-text"><a class="rightMenu-item" href="javascript:rmf.copySelect();"><i class="fa fa-copy"></i><span>å¤åˆ¶</span></a><a class="rightMenu-item" href="javascript:window.open(&quot;https://www.baidu.com/s?wd=&quot;+window.getSelection().toString());window.location.reload();"><i class="fa fa-search"></i><span>ç™¾åº¦æœç´¢</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-too"><a class="rightMenu-item" href="javascript:window.open(window.getSelection().toString());window.location.reload();"><i class="fa fa-link"></i><span>è½¬åˆ°é“¾æ¥</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-paste"><a class="rightMenu-item" href="javascript:rmf.paste()"><i class="fa fa-copy"></i><span>ç²˜è´´</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-post"><a class="rightMenu-item" href="#post-comment"><i class="fas fa-comment"></i><span>ç©ºé™è¯„è®º</span></a><a class="rightMenu-item" href="javascript:rmf.copyWordsLink()"><i class="fa fa-link"></i><span>å¤åˆ¶æœ¬æ–‡åœ°å€</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-to"><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()"><i class="fa fa-window-restore"></i><span>æ–°çª—å£æ‰“å¼€</span></a><a class="rightMenu-item" id="menu-too" href="javascript:rmf.open()"><i class="fa fa-link"></i><span>è½¬åˆ°é“¾æ¥</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()"><i class="fa fa-copy"></i><span>å¤åˆ¶é“¾æ¥</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-img"><a class="rightMenu-item" href="javascript:rmf.saveAs()"><i class="fa fa-download"></i><span>ä¿å­˜å›¾ç‰‡</span></a><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()"><i class="fa fa-window-restore"></i><span>åœ¨æ–°çª—å£æ‰“å¼€</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()"><i class="fa fa-copy"></i><span>å¤åˆ¶å›¾ç‰‡é“¾æ¥</span></a></div><div class="rightMenu-group rightMenu-line"><a class="rightMenu-item" href="javascript:randomPost()"><i class="fa fa-paper-plane"></i><span>éšä¾¿é€›é€›</span></a><a class="rightMenu-item" href="javascript:switchNightMode();"><i class="fa fa-moon"></i><span>æ˜¼å¤œåˆ‡æ¢</span></a><a class="rightMenu-item" href="/personal/about/"><i class="fa fa-info-circle"></i><span>å…³äºåšå®¢</span></a><a class="rightMenu-item" href="javascript:toggleWinbox();"><i class="fas fa-cog"></i><span>ç¾åŒ–è®¾ç½®</span></a><a class="rightMenu-item" href="javascript:rmf.fullScreen();"><i class="fas fa-expand"></i><span>åˆ‡æ¢å…¨å±</span></a><a class="rightMenu-item" href="javascript:window.print();"><i class="fa-solid fa-print"></i><span>æ‰“å°é¡µé¢</span></a></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.staticfile.org/fancyapps-ui/4.0.31/fancybox.umd.min.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/instant.page/5.1.0/instantpage.min.js" type="module"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/vanilla-lazyload/17.3.1/lazyload.iife.min.js"></script><script src="/js/search/local-search.js"></script><script async="async">var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())
setTimeout(function(){preloader.endLoading();}, 5000);
document.getElementById('loading-box').addEventListener('click',()=> {preloader.endLoading()})</script><div class="js-pjax"><script>function loadGiscus () {
  let nowTheme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'light'

  const config = Object.assign({
    src: 'https://giscus.app/client.js',
    'data-repo': 'Cyborg2077/Cyborg2077.github.io',
    'data-repo-id': 'R_kgDOGflxEw',
    'data-category-id': 'DIC_kwDOGflxE84CRxKp',
    'data-mapping': 'pathname',
    'data-theme': nowTheme,
    'data-reactions-enabled': '1',
    crossorigin: 'anonymous',
    async: true
  },null)

  let ele = document.createElement('script')
  for (let key in config) {
    ele.setAttribute(key, config[key])
  }
  document.getElementById('giscus-wrap').insertAdjacentElement('afterbegin',ele)
}

function changeGiscusTheme () {
  const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'light'

  function sendMessage(message) {
    const iframe = document.querySelector('iframe.giscus-frame');
    if (!iframe) return;
    iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
  }

  sendMessage({
    setConfig: {
      theme: theme
    }
  });
}

if ('Giscus' === 'Giscus' || !true) {
  if (true) btf.loadComment(document.getElementById('giscus-wrap'), loadGiscus)
  else loadGiscus()
} else {
  function loadOtherComment () {
    loadGiscus()
  }
}</script></div><div class="aplayer no-destroy" data-id="6831019121" data-server="netease" data-type="playlist" data-fixed="true" data-mini="true" data-listFolded="false" data-order="random" data-preload="none" data-autoplay="true" muted></div><div id="vcomments"></div><script> new Valine({ el:'#vcomment', appId:'06KXhkKAB9IH7PreBEBl0WL0-MdYXbMMI', appKey:'JApVWPKkDT6qzbMdWfKlva41' })</script><script src="https://cdn.staticfile.org/jquery/3.6.3/jquery.min.js"></script><script async data-pjax src="/js/txmap.js"></script><script async src="https://cdn1.tianli0.top/npm/vue@2.6.14/dist/vue.min.js"></script><script async src="https://cdn1.tianli0.top/npm/element-ui@2.15.6/lib/index.js"></script><script async src="https://cdn.bootcdn.net/ajax/libs/clipboard.js/2.0.11/clipboard.min.js"></script><script defer type="text/javascript" src="https://cdn1.tianli0.top/npm/sweetalert2@8.19.0/dist/sweetalert2.all.js"></script><script async src="//npm.elemecdn.com/pace-js@1.2.4/pace.min.js"></script><script defer src="https://cdn1.tianli0.top/gh/nextapps-de/winbox/dist/winbox.bundle.min.js"></script><script async src="//at.alicdn.com/t/c/font_3586335_hsivh70x0fm.js"></script><script async src="//at.alicdn.com/t/c/font_3636804_gr02jmjr3y9.js"></script><script async src="//at.alicdn.com/t/c/font_3612150_kfv55xn3u2g.js"></script><script async src="//at.alicdn.com/t/c/font_3049706_xky4v9paku7.js"></script><script async src="https://cdn.wpon.cn/2022-sucai/Gold-ingot.js"></script><canvas id="universe"></canvas><canvas id="snow"></canvas><script defer src="/js/fomal.js"></script><script async src="//at.alicdn.com/t/c/font_4244550_myoln7t3mdn.js"></script><script id="canvas_nest" defer="defer" color="255,192,203" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdnjs.cloudflare.com/ajax/libs/butterfly-extsrc/1.1.3/canvas-nest.min.js"></script><script id="click-show-text" src="https://cdnjs.cloudflare.com/ajax/libs/butterfly-extsrc/1.1.3/click-show-text.min.js" data-mobile="false" data-text="å¯Œå¼º,æ°‘ä¸»,æ–‡æ˜,å’Œè°,è‡ªç”±,å¹³ç­‰,å…¬æ­£,æ³•åˆ¶,çˆ±å›½,æ•¬ä¸š,è¯šä¿¡,å‹å–„" data-fontsize="15px" data-random="false" async="async"></script><link rel="stylesheet" href="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/aplayer/1.10.1/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/aplayer/1.10.1/APlayer.min.js"></script><script src="https://cdn1.tianli0.top/npm/js-heo@1.0.12/metingjs/Meting.min.js"></script><script src="https://lib.baomitu.com/pjax/0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["link[rel=\"canonical\"]","meta[property=\"og:image\"]","meta[property=\"og:title\"]","meta[property=\"og:url\"]","head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show","#web_bg",".js-pjax","#bibi","body > title","#app","#tag-echarts","#posts-echart","#categories-echarts"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --> <script data-pjax>if(document.getElementById('recent-posts') && (location.pathname ==='/'|| '/' ==='all')){
    var parent = document.getElementById('recent-posts');
    var child = '<div class="recent-post-item" style="width:100%;height: auto"><div id="catalog_magnet"><div class="magnet_item"><a class="magnet_link" href="https://cyborg2077.github.io/categories/å­¦ä¹ ç¬”è®°/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ¡ Kyleã®å­¦ä¹ ç¬”è®° (67)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://cyborg2077.github.io/categories/é¢è¯•é¢˜/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ¼ Kyleã®é¢è¯•é¢˜æ€»ç»“ (10)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://cyborg2077.github.io/categories/åŠ›æ‰£/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ‰ Kyleã®åˆ·é¢˜æ—¥å¿— (13)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://cyborg2077.github.io/categories/æ‚è°ˆ/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸŸ Kyleã®æ‚è°ˆ (2)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://cyborg2077.github.io/categories/éšå†™/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ¨ Kyleã®éšå†™ (10)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://cyborg2077.github.io/categories/å®ç”¨æ•™ç¨‹/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ¥ Kyleã®å®ç”¨æ•™ç¨‹ (3)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><a class="magnet_link_more"  href="https://cyborg2077.github.io/categories/" style="flex:1;text-align: center;margin-bottom: 10px;">æŸ¥çœ‹æ›´å¤š...</a></div></div>';
    console.log('å·²æŒ‚è½½magnet')
    parent.insertAdjacentHTML("afterbegin",child)}
     </script><style>#catalog_magnet{flex-wrap: wrap;display: flex;width:100%;justify-content:space-between;padding: 10px 10px 0 10px;align-content: flex-start;}.magnet_item{flex-basis: calc(33.333333333333336% - 5px);background: #e9e9e9;margin-bottom: 10px;border-radius: 8px;transition: all 0.2s ease-in-out;}.magnet_item:hover{background: var(--text-bg-hover)}.magnet_link_more{color:#555}.magnet_link{color:black}.magnet_link:hover{color:white}@media screen and (max-width: 600px) {.magnet_item {flex-basis: 100%;}}.magnet_link_context{display:flex;padding: 10px;font-size:16px;transition: all 0.2s ease-in-out;}.magnet_link_context:hover{padding: 10px 20px;}</style>
    <style></style><script data-pjax>
  function butterfly_clock_anzhiyu_injector_config(){
    var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
    var item_html = '<div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="hexo_electric_clock"><img class="entered loading" id="card-clock-loading" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu@1.1.6/lib/loading.gif" style="height: 120px; width: 100%;" data-ll-status="loading"/></div></div></div></div></div>';
    console.log('å·²æŒ‚è½½butterfly_clock_anzhiyu')
    if(parent_div_git) {
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var qweather_key = 'e57e16d653c34fc49b5d1cc0713eb9ab';
  var gaud_map_key = 'e2b04289e870b005374ee030148d64fd&s=rsv3';
  var baidu_ak_key = 'undefined';
  var flag = 0;
  var clock_rectangle = '112.6534116,27.96920845';
  var clock_default_rectangle_enable = 'false';

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_clock_anzhiyu_injector_config();
  }
  else if (epage === cpage){
    butterfly_clock_anzhiyu_injector_config();
  }
  </script><script src="https://widget.qweather.net/simple/static/js/he-simple-common.js?v=2.0"></script><script data-pjax src="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu@1.1.6/lib/clock.min.js"></script><script data-pjax>
  function butterfly_footer_beautify_injector_config(){
    var parent_div_git = document.getElementById('footer-wrap');
    var item_html = '<div id="workboard"></div><div id="ghbdages" style="overflow:hidden;max-height:90px;height:auto;text-align:center;margin-top:10px"><div class="swiper-wrapper"><div class="swiper-slide"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" title="åšå®¢æ¡†æ¶ä¸ºHexo_v5.4.0"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo" alt=""/></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" title="ä¸»é¢˜ç‰ˆæœ¬Butterfly_v4.1.0"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&amp;logo=bitdefender" alt=""/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" title="æœ¬ç«™é¡¹ç›®ç”±Githubæ‰˜ç®¡"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&amp;logo=GitHub" alt=""/></a></div><div class="swiper-slide"><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" title="æœ¬ç«™é‡‡ç”¨çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº«4.0å›½é™…è®¸å¯åè®®è¿›è¡Œè®¸å¯"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&amp;logo=Claris" alt=""/></a></div></div></div><style>a.github-badge:hover:before {display:none}</style>';
    console.log('å·²æŒ‚è½½butterfly_footer_beautify')
    parent_div_git.insertAdjacentHTML("beforeend",item_html)
    }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_footer_beautify_injector_config();
  }
  else if (epage === cpage){
    butterfly_footer_beautify_injector_config();
  }
  </script><script async src="https://unpkg.zhimg.com/hexo-butterfly-footer-beautify@1.0.0/lib/runtime.min.js"></script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-footer-beautify/lib/swiperbdage_init.min.js"></script><script data-pjax>
  function butterfly_swiper_injector_config(){
    var parent_div_git = document.getElementById('recent-posts');
    var item_html = '<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2022/11/05/NewFeaturesOfJava8/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img2.baidu.com/it/u=852907915,3528076091&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=PNG?w=889&amp;h=500" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-11-05</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2022/11/05/NewFeaturesOfJava8/&quot;);" href="javascript:void(0);" alt="">Java 8æ–°ç‰¹æ€§</a><div class="blog-slider__text">Java8æ–°ç‰¹æ€§ï¼Œä¹‹å‰åªæ˜¯è‰è‰çœ‹äº†ä¸€ä¸‹ï¼Œåæ¥å‘ç°streamæµæ“ä½œæŒºå¥½ç”¨çš„ï¼Œæ¥è¡¥ä¸€ä¸‹ç¥¨</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2022/11/05/NewFeaturesOfJava8/&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2022/12/22/MeassageQueue/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img2.baidu.com/it/u=945409242,1491286515&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=PNG?w=889&amp;h=500" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-12-22</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2022/12/22/MeassageQueue/&quot;);" href="javascript:void(0);" alt="">MeassageQueue</a><div class="blog-slider__text">æ¶ˆæ¯é˜Ÿåˆ—ç›¸å…³å­¦ä¹ è®°å½•</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2022/12/22/MeassageQueue/&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2022/12/21/Docker/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img2.baidu.com/it/u=4052816064,1042373333&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=889&amp;h=500" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-12-21</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2022/12/21/Docker/&quot;);" href="javascript:void(0);" alt="">Docker</a><div class="blog-slider__text">Dockerå®ç”¨ç¯‡å­¦ä¹ ç¬”è®°</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2022/12/21/Docker/&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2022/12/24/ElasticSearch/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fpic3.zhimg.com%2Fv2-dbe4189cad999946abdcd174fba140ea_r.jpg&amp;refer=http%3A%2F%2Fpic3.zhimg.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=auto?sec=1651217592&amp;t=44946406f8e7b9ed15f483e0495b33c9" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-12-24</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2022/12/24/ElasticSearch/&quot;);" href="javascript:void(0);" alt="">ElasticSearch</a><div class="blog-slider__text">åˆ†å¸ƒå¼æœç´¢å¼•æ“</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2022/12/24/ElasticSearch/&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2022/11/08/SpringCloud/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img0.baidu.com/it/u=1415156609,1199509453&amp;fm=253&amp;fmt=auto&amp;app=120&amp;f=JPEG?w=949&amp;h=500" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-11-08</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2022/11/08/SpringCloud/&quot;);" href="javascript:void(0);" alt="">SpringCloud</a><div class="blog-slider__text">SpringCloudå­¦ä¹ ç¬”è®°</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2022/11/08/SpringCloud/&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2022/09/29/ReggieTakeOut/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://images.wallpaperscraft.com/image/single/silhouette_night_starry_sky_137292_300x168.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-09-29</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2022/09/29/ReggieTakeOut/&quot;);" href="javascript:void(0);" alt="">ç‘å‰å¤–å–</a><div class="blog-slider__text">ç‘å‰å¤–å–å®æˆ˜é¡¹ç›®</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2022/09/29/ReggieTakeOut/&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2022/10/22/RedisPractice/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img0.baidu.com/it/u=1415156609,1199509453&amp;fm=253&amp;fmt=auto&amp;app=120&amp;f=JPEG?w=949&amp;h=500" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-10-22</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2022/10/22/RedisPractice/&quot;);" href="javascript:void(0);" alt="">Rediså®æˆ˜ç¯‡</a><div class="blog-slider__text">Rediså®æˆ˜ç¯‡ï¼ŒåŒ…å«ä¼˜æƒ åˆ¸ç§’æ€ï¼Œåˆ†å¸ƒå¼é”ï¼Œæ¶ˆæ¯é˜Ÿåˆ—ç”¨æˆ·ç­¾åˆ°ç­‰åŠŸèƒ½</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2022/10/22/RedisPractice/&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2023/10/28/RDelayedQueue/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img2.baidu.com/it/u=4052816064,1042373333&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=889&amp;h=500" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-10-28</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2023/10/28/RDelayedQueue/&quot;);" href="javascript:void(0);" alt="">Redissonå»¶è¿Ÿé˜Ÿåˆ—å®ç°å€’è®¡æ—¶ä»»åŠ¡</a><div class="blog-slider__text">é¡¹ç›®é‡Œæœ‰ä¸ªåœºæ™¯éœ€è¦åšå»¶è¿Ÿä»»åŠ¡</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2023/10/28/RDelayedQueue/&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
    console.log('å·²æŒ‚è½½butterfly_swiper')
    parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  var elist = 'undefined'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_swiper_injector_config();
  }
  else if (epage === cpage){
    butterfly_swiper_injector_config();
  }
  </script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js"></script><div class="js-pjax"><script async="async">var arr = document.getElementsByClassName('recent-post-item');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '2s');
    arr[i].setAttribute('data-wow-delay', '200ms');
    arr[i].setAttribute('data-wow-offset', '30');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script><script async="async">var arr = document.getElementsByClassName('card-widget');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '2s');
    arr[i].setAttribute('data-wow-delay', '200ms');
    arr[i].setAttribute('data-wow-offset', '30');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script></div><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow.min.js"></script><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow_init.js"></script><script data-pjax src="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.js"></script><script data-pjax>
  function gitcalendar_injector_config(){
      var parent_div_git = document.getElementById('gitZone');
      var item_html = '<div class="recent-post-item" id="gitcalendarBar" style="width:100%;height:auto;padding:10px;"><style>#git_container{min-height: 320px}@media screen and (max-width:650px) {#git_container{min-height: 0px}}</style><div id="git_loading" style="width:10%;height:100%;margin:0 auto;display: block;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animatetransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animatetransform></path></svg><style>#git_container{display: none;}</style></div><div id="git_container"></div></div>';
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
      console.log('å·²æŒ‚è½½gitcalendar')
      }

    if( document.getElementById('gitZone') && (location.pathname ==='/site/census/'|| '/site/census/' ==='all')){
        gitcalendar_injector_config()
        GitCalendarInit("/api?Cyborg2077",['#d9e0df', '#c6e0dc', '#a8dcd4', '#9adcd2', '#89ded1', '#77e0d0', '#5fdecb', '#47dcc6', '#39dcc3', '#1fdabe', '#00dab9'],'Cyborg2077')
    }
  </script><!-- hexo injector body_end end --><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/koharu.model.json"},"log":false});</script></body></html>